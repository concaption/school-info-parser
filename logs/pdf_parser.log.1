2025-01-31 09:46:14,533 - PDFParser - INFO - Starting PDF processing
2025-01-31 09:46:14,534 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 09:46:14,534 - PDFParser - INFO - Initializing PDFParser
2025-01-31 09:46:14,567 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 09:46:14,568 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 09:46:14,568 - PDFParser - INFO - Processing page 1/18
2025-01-31 09:46:14,611 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:46:14,614 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:46:14,626 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:46:14,627 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:46:24,441 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:46:24,441 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "notes": "Official IELTS, Cambridge, TOEIC, and OET Exam Centre and CD IELTS Exam Centre"
        },
        {
            "city": "Leeds",
            "country": "UK",
            "notes": "Official IELTS Exam Centre, CELTA Training Centre, and CD IELTS Exam Centre"
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "notes": "Official CELTA Training Centre"
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "notes": "Official IELTS, Cambridge, CELPIP, TOEIC, and OET Exam Centre and CD IELTS Exam Centre"
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "notes": "New for 2025"
        }
    ],
    "courses": [],
    "accommodations": [],
    "additional_fees": [],
    "terms": [],
    "website": "www.ces-schools.com"
}
2025-01-31 09:46:24,441 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:46:24,442 - PDFParser - INFO - Successfully processed page 1
2025-01-31 09:46:24,442 - PDFParser - INFO - Processing page 2/18
2025-01-31 09:46:24,508 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:46:24,512 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:46:24,519 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:46:24,520 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:46:49,268 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:46:49,268 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes Mon-Fri, 09:00-13:00; 14:00-16:00 Tues-Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Minimum 4 weeks, 13:45-17:00 Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€160", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "Group and One-to-One lessons (Mon-Fri, 09:00-13:00 and 14:00-16:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€700", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "€35 per week"
                    }
                },
                {
                    "type": "Residence",
                    "price_per_week": null,
                    "description": "Details on request"
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 09:46:49,268 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:46:49,268 - PDFParser - INFO - Successfully processed page 2
2025-01-31 09:46:49,268 - PDFParser - INFO - Processing page 3/18
2025-01-31 09:46:49,274 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:46:49,279 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:46:49,284 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:46:49,285 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:47:02,660 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:47:02,660 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room (not available for students aged 16-18 years inclusive)",
                    "supplements": {
                        "Summer": "€35/week",
                        "Special Diet": "€35/week",
                        "Christmas Holidays": "€345 (20 Dec 2025 to 3 Jan 2026)"
                    }
                },
                {
                    "type": "Residential - Auburn and Crestfield",
                    "price_per_week": {
                        "Single room": "€300",
                        "Shared room": "€265"
                    },
                    "description": "Self-catering, 18+ years, minimum 2 weeks stay. Private residences approx. 4-5 km from the school, compulsory airport transfer."
                },
                {
                    "type": "Residential - Heyday",
                    "price_per_week": "€399",
                    "description": "Self-catering, 18+ years, minimum 2 weeks stay. Located 14 minutes' walk from the school, all single en-suite rooms."
                }
            ],
            "additional_fees": {
                "accommodation_placement": "€85",
                "airport_transfer": "€85 (one way)"
            }
        }
    ],
    "terms": {
        "accommodation": "Homestay includes half board Monday-Friday and full board on weekends. Students must notify absences with a fee charged for missing days. Meals are not included in residential options.",
        "insurance": "Medical insurance mandatory for ILEP students, at a cost of €130 per year.",
        "tuition": "Standard course offers 18.33 contact hours per week. Intensive course offers 23.83 contact hours per week.",
        "examinations": "CES offers IELTS (€215), Cambridge First (€205), and Advanced (€210) tests.",
        "materials": "Textbook cost: €28, IELTS book: €45",
        "activities": "Excursions cost approximately €15-€65. Free evening activities are also available.",
        "holidays": "School closed on specified dates with no refund or time in lieu for public holidays."
    }
}
2025-01-31 09:47:02,660 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:47:02,661 - PDFParser - INFO - Successfully processed page 3
2025-01-31 09:47:02,661 - PDFParser - INFO - Processing page 4/18
2025-01-31 09:47:02,687 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:47:02,691 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:47:02,696 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:47:02,697 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:47:58,495 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:47:58,495 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": "6th January - 19th December 2025",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00 Monday to Friday, 14:00 - 16:00 Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "14:00 - 17:15 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€150", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€145", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "Includes 5 hours of one-to-one lessons and group lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00 Monday to Friday, 14:00 - 16:00 Tuesday to Thursday",
                    "prices": [
                        {"duration": "12 weeks", "price": "€3480", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6630", "currency": "EUR"},
                        {"duration": "Additional weeks", "price": "€265/week", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer supplement (June-August)": "€35/week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": {
            "notice_required": "14 days notice required"
        }
    }
}
2025-01-31 09:47:58,495 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:47:58,495 - PDFParser - INFO - Successfully processed page 4
2025-01-31 09:47:58,495 - PDFParser - INFO - Processing page 5/18
2025-01-31 09:47:58,499 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:47:58,501 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:47:58,507 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:47:58,507 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:48:14,620 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:48:14,621 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": "",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": "Half board; extra night for €50",
                    "supplements": {
                        "Single Room Summer Supplement": {
                            "price_per_week": "€50",
                            "applicable_period": "May 17 to September 28"
                        },
                        "Special Diet Supplement": {
                            "price_per_week": "€35",
                            "description": "Coeliac, gluten-free, lactose-free, vegan, and vegetarian"
                        },
                        "Christmas Holidays": {
                            "price_per_week": "€345",
                            "applicable_period": "December 20 to January 3, 2026"
                        }
                    }
                },
                {
                    "type": "Residential (University College Cork)",
                    "price_from_per_week": "€285",
                    "description": "Extra night for €50"
                },
                {
                    "type": "Airport Transfer (one way)",
                    "price": "€60",
                    "description": "Transfer on arrival to homestay or residence"
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "€85"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a carefully selected homestay on request, with half board (breakfast and dinner) Monday to Friday and full board on weekends. No allowance for absences from homestay. Retainer fee of €60 per week applies for five days or more of vacancy.",
        "insurance": "Medi-PEL is mandatory for ILEP students, costing €130 per annum, including PEL (Protection for Enrolled Learners). Insurance activation requires a Medical Insurance Request Form and a policy number issued by CES.",
        "tuition_hours": "Standard General English: 18.33 contact hours per week. Intensive Course: 23.83 contact hours per week. All lessons are 55 minutes.",
        "examinations": {
            "IELTS": "€215",
            "Cambridge First": "€205",
            "Advanced": "€210"
        },
        "text_book": {
            "Text Book + Digital E-Book": "€28",
            "IELTS Coursebook": "€45"
        },
        "social_activities": "Excursions cost approximately €45-€65 for full-day trips and €15-€25 for half-day trips. Free afternoon and evening activities are also available.",
        "policy_of_care": "CES has a policy of care for all 16- and 17-year-old students in adult courses.",
        "school_holidays": "Holidays include January 01, February 03, March 17, April 18, April 21, May 02, June 04, August 27, October 27, December 19, 2025 - January 05, 2026."
    }
}
2025-01-31 09:48:14,621 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:48:14,621 - PDFParser - INFO - Successfully processed page 5
2025-01-31 09:48:14,621 - PDFParser - INFO - Processing page 6/18
2025-01-31 09:48:14,645 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:48:14,649 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:48:14,654 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:48:14,655 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:48:47,895 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:48:47,895 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Language School (Toronto)",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00, Monday to Thursday; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "420", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "400", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "375", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15, Monday to Thursday; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "445", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "420", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "400", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Digital Marketing",
                    "lessons_per_week": 20,
                    "description": "09:00 - 14:00, General English; 13:00 - 15:15, Monday to Thursday for Digital Marketing",
                    "prices": [{"duration": "12 weeks", "price": "5340", "currency": "USD"}]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 30,
                    "description": "09:00 - 12:15, Monday to Friday",
                    "prices": [{"duration": "12 weeks", "price": "5340", "currency": "USD"}]
                },
                {
                    "name": "English for Business",
                    "lessons_per_week": 20,
                    "description": "09:00 - 14:00, General English; 13:00 - 14:00 for Business",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "420", "currency": "USD"}
                    ]
                },
                {
                    "name": "General English for 30+",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15, General English (30+)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00, Monday to Thursday; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15, Monday to Thursday; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course",
                    "lessons_per_week": 25,
                    "description": "20 lessons per week, General English + 5 hours of one-to-one preparation sessions",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Fast Track Cambridge Examination Preparation Course",
                    "lessons_per_week": 30,
                    "description": "30 lessons per week",
                    "prices": [
                        {"duration": "4 weeks", "price": "2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "195 USD",
                "private_lesson": {
                    "general": "85 USD per lesson",
                    "exam_preparation": "95 USD per lesson"
                },
                "material_fee": "20 USD per week",
                "cambridge_material_and_exam_administration": "575 USD",
                "ielts_paper_based_exam": "370 USD",
                "ielts_computer_based_exam": "370 USD"
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified"
    }
}
2025-01-31 09:48:47,895 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:48:47,895 - PDFParser - INFO - Successfully processed page 6
2025-01-31 09:48:47,896 - PDFParser - INFO - Processing page 7/18
2025-01-31 09:48:47,909 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:48:47,912 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:48:47,920 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:48:47,921 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:49:10,177 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:49:10,177 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "prices": [
                        {
                            "type": "Full-Board Accommodation (Single)",
                            "price_per_week": "$350",
                            "summer_surcharge": "$30 (01 June - 31 Aug)"
                        },
                        {
                            "type": "Half-Board Accommodation (Single)",
                            "price_per_week": "$320",
                            "summer_surcharge": "$30 (01 June - 31 Aug)"
                        },
                        {
                            "type": "Full-Board Accommodation (Shared)",
                            "price_per_week": "$310",
                            "summer_surcharge": "$30 (01 June - 31 Aug)"
                        },
                        {
                            "type": "Half-Board Accommodation (Shared)",
                            "price_per_week": "$275",
                            "summer_surcharge": "$30 (01 June - 31 Aug)"
                        },
                        {
                            "type": "Executive Half-Board with Private Bathroom",
                            "price_per_week": "$365",
                            "summer_surcharge": "$30 (01 June - 31 Aug)"
                        }
                    ],
                    "addons": [
                        {
                            "type": "Special Diet Supplement (Full-Board)",
                            "price_per_week": "$50"
                        },
                        {
                            "type": "Special Diet Supplement (Half-Board)",
                            "price_per_week": "$45"
                        },
                        {
                            "type": "Extra Night",
                            "price_per_night": "$60"
                        },
                        {
                            "type": "Underage Fee (16-17 years)",
                            "price_per_week": "$25"
                        }
                    ],
                    "placement_fee": "$275"
                },
                {
                    "type": "Residential Self-Catering",
                    "options": [
                        {
                            "name": "Casa Canada (18+)",
                            "prices": [
                                {
                                    "room_type": "Shared Room",
                                    "weekly": "$525",
                                    "monthly_min_duration": "4 weeks"
                                },
                                {
                                    "room_type": "1 Bedroom",
                                    "weekly": "$650",
                                    "monthly_min_duration": "4 weeks"
                                }
                            ]
                        },
                        {
                            "name": "28 Langley Ave.",
                            "price": {
                                "weekly": "$575",
                                "monthly": "$1985"
                            }
                        },
                        {
                            "name": "Tartu Student Residence (17+)",
                            "availability": "May - August",
                            "prices": [
                                {
                                    "type": "Economy Suite",
                                    "weekly": "$550",
                                    "monthly": "$1450"
                                },
                                {
                                    "type": "Premium (AC Unit)",
                                    "weekly": "$650",
                                    "monthly": "$1750"
                                }
                            ]
                        }
                    ],
                    "placement_fee": "$275"
                }
            ],
            "additional_fees": {
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized": "$75",
                "custodian_fee_notarized": "$200",
                "medical_insurance_per_day": "$3",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in carefully selected homestays. No refund or credit will be issued for absence or late arrival.",
        "medical_insurance": "Students are strongly advised to have travel and medical insurance before arriving.",
        "tuition_hours": {
            "standard": "15 hours per week",
            "intensive": "18.75 hours per week",
            "super_intensive": "22.50 hours per week"
        },
        "social_activities": [
            "Day trips to Niagara Falls ($125), Algonquin Park ($200), New York ($700), and more.",
            "Sport activities like golf ($575 per week) and yoga ($150 per month)."
        ],
        "policy_of_care": "CES has a strict policy for under-18 students.",
        "school_holidays": [
            "01 January",
            "17 February",
            "18 April",
            "19 May",
            "01 July",
            "04 August",
            "01 September",
            "30 September",
            "13 October",
            "11 November",
            "25 December",
            "26 December"
        ]
    }
}
2025-01-31 09:49:10,177 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:49:10,177 - PDFParser - INFO - Successfully processed page 7
2025-01-31 09:49:10,178 - PDFParser - INFO - Processing page 8/18
2025-01-31 09:49:10,181 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:49:10,183 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:49:10,188 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:49:10,189 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:49:30,568 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:49:30,568 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Classes held 09:00-12:15 Mon-Fri.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$365", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "Classes held 09:00-14:00 Mon-Thurs, 09:00-12:15 Fridays.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Classes held 09:00-15:15 Mon-Thurs, 09:00-12:15 Fridays.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "Classes held 09:00-14:00 Mon-Thurs, 09:00-12:15 Fridays.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "Classes held 09:00-15:15 Mon-Thurs, 09:00-12:15 Fridays.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Courses",
                    "lessons_per_week": 25,
                    "description": "Classes held 09:00-12:15 Mon-Fri, plus 5 hours One-to-One lessons per week.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Courses",
                    "lessons_per_week": 30,
                    "description": "Classes held 09:00-15:15 Mon-Thurs, 09:00-12:15 Fridays.",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": "$195",
                "private_lessons": {
                    "general": "$85 per lesson",
                    "exam_preparation": "$95 per lesson"
                },
                "cambridge_materials_exam_administration": "$575",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 09:49:30,568 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:49:30,568 - PDFParser - INFO - Successfully processed page 8
2025-01-31 09:49:30,568 - PDFParser - INFO - Processing page 9/18
2025-01-31 09:49:30,573 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:49:30,575 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:49:30,581 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:49:30,581 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:49:45,506 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:49:45,506 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": "",
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 15,
                    "description": "Sessions are 45 minutes, excluding breaks."
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 18.75,
                    "description": "Sessions are 45 minutes, excluding breaks."
                },
                {
                    "name": "Super Intensive Course",
                    "lessons_per_week": 22.5,
                    "description": "Sessions are 45 minutes, excluding breaks."
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "name": "Full-Board Accommodation",
                            "price_per_week": "$375",
                            "price_per_week_summer": "$405",
                            "description": "Single room, breakfast, lunch, and dinner."
                        },
                        {
                            "name": "Half-Board Accommodation",
                            "price_per_week": "$360",
                            "price_per_week_summer": "$390",
                            "description": "Single room, breakfast, and dinner."
                        },
                        {
                            "name": "Shared Full-Board Accommodation",
                            "price_per_week": "$355",
                            "price_per_week_summer": "$385",
                            "description": "Shared room, breakfast, lunch, and dinner."
                        },
                        {
                            "name": "Shared Half-Board Accommodation",
                            "price_per_week": "$335",
                            "price_per_week_summer": "$365",
                            "description": "Shared room, breakfast, and dinner."
                        },
                        {
                            "name": "Executive Half-Board with Private Bathroom",
                            "price_per_week": "$480",
                            "price_per_week_summer": "$510",
                            "description": "Single room, breakfast, and dinner, with a private bathroom (subject to availability)."
                        }
                    ],
                    "additional_fees": {
                        "host_family_add_ons": {
                            "special_diet_supplement": {
                                "price_full_board": "$50",
                                "price_half_board": "$45",
                                "description": "For dietary requirements such as coeliac, gluten-free, lactose-free, vegan, halal, kosher, vegetarian."
                            },
                            "extra_night": "$60",
                            "underage_fee": "$25 per week (for students 16-18 years)."
                        }
                    }
                },
                {
                    "type": "Residential",
                    "options": [
                        {
                            "name": "GEC Viva (18+)",
                            "pricing": {
                                "weekly": "Not available",
                                "monthly": "$1600/month"
                            },
                            "description": "Economy downtown shared rooms not available."
                        },
                        {
                            "name": "Casa Canada",
                            "pricing": {
                                "weekly": "$600/week",
                                "monthly": "$2400/month"
                            },
                            "description": ""
                        },
                        {
                            "name": "YWCA Student Residence",
                            "pricing": {
                                "weekly": "TBA",
                                "monthly": "TBA"
                            },
                            "description": ""
                        }
                    ]
                }
            ],
            "additional_fees": {
                "airport_transfer_one_way": "$150",
                "airport_transfer_return": "$300",
                "custodian_fees_non_notarized": "$75 (required by Canadian Immigration, under 18 years).",
                "custodian_fees_notarized": "$200 (required by Canadian Immigration, under 18 years).",
                "medical_insurance_per_day": "$3",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a carefully selected homestay on request. No allowance will be made for absence from the homestay during the time arranged or for late arrival/early departure. Shared accommodations are only available for two people traveling together and cannot be guaranteed otherwise.",
        "medical_insurance": "Students are strongly advised to take out travel and health insurance before leaving home. Insurance should cover the loss of personal possessions and the loss of tuition fees if the student has to cancel a course or return home early.",
        "tuition_hours": "All teaching/tuition hours are 45 minutes long.",
        "social_activities": "CES organizes a range of afternoon, evening, and overnight trips/activities for students, including trips to Whistler, Victoria, Rocky Mountains, and Seattle.",
        "policy_care_under19": "CES has a strict welfare policy for students under the age of 19 studying in adult schools.",
        "school_holidays": "School holidays include January 1, February 18, April 1, April 19, May 20, July 4, August 1, September 30, October 13, November 11, December 25, and December 26, 2025."
    }
}
2025-01-31 09:49:45,506 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:49:45,506 - PDFParser - INFO - Successfully processed page 9
2025-01-31 09:49:45,506 - PDFParser - INFO - Processing page 10/18
2025-01-31 09:49:45,540 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:49:45,542 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:49:45,548 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:49:45,548 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:50:00,327 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:50:00,328 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "UK",
            "address": "N/A",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Monday to Friday, 14:00 - 16:30 Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Monday to Friday (General English), 14:00 - 16:30 Tuesday to Thursday (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": "N/A",
            "courses": [
                {
                    "name": "CELTA Training Course (Edinburgh only)",
                    "lessons_per_week": "Full Time or Part Time",
                    "description": "09:30 - 17:00 Monday to Friday with independent work approx. 20 hours per week.",
                    "prices": [
                        {"type": "Face-to-Face", "price": "£1545", "currency": "GBP"},
                        {"type": "Online (Full Time or Part Time)", "price": "£1400", "currency": "GBP"},
                        {"type": "Online (24-Week Part Time)", "price": "£1515", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "N/A",
        "maximum_class_size": 14,
        "lesson_duration": "45 minutes"
    }
}
2025-01-31 09:50:00,328 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:50:00,328 - PDFParser - INFO - Successfully processed page 10
2025-01-31 09:50:00,328 - PDFParser - INFO - Processing page 11/18
2025-01-31 09:50:00,335 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:50:00,337 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:50:00,342 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:50:00,343 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:50:18,420 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:50:18,420 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "address": "Not specified in the image",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£280",
                    "description": "Half-board, single room",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special Diet": "£35/week"
                    },
                    "holiday_surcharge": "£350/week (20 Dec to 3 Jan)"
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£235",
                    "description": "Half-board, shared room",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special Diet": "£35/week"
                    },
                    "holiday_surcharge": "£350/week (20 Dec to 3 Jan)"
                },
                {
                    "type": "Residential",
                    "price_ranges": {
                        "Double room with 2 sharing": "£275",
                        "Twin room with 2 sharing": "£350",
                        "Double room for single use": "£450",
                        "Twin room for single use": "£560",
                        "Large double room for single use": "£560"
                    },
                    "notes": "Rathbone Apartments, Zone 1 Central London, 18+ years, minimum 4 weeks, departures in October, November, and December not accepted."
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "£75"
            }
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "address": "Not specified in the image",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£280",
                    "description": "Half-board, single room",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special Diet": "£35/week"
                    },
                    "holiday_surcharge": "£350/week (20 Dec to 3 Jan)"
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£235",
                    "description": "Half-board, shared room",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special Diet": "£35/week"
                    },
                    "holiday_surcharge": "£350/week (20 Dec to 3 Jan)"
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "£75"
            }
        }
    ],
    "terms": {
        "accommodation": "Half-board includes bed, breakfast, and dinner. Shared accommodation is guaranteed only for two people traveling together. Placement in private homes may occur if no homestays are available.",
        "tuition_hours": "Standard Course is 15 contact hours/week, Intensive Course is 22 contact hours/week, excluding breaks.",
        "examinations": "IELTS exam costs £220 (subject to change).",
        "textbooks": "Textbook + Digital Book costs £32.",
        "medical_insurance": "Students are advised to take out travel and medical insurance.",
        "school_holidays": {
            "closure_dates": [
                "01 Jan 2025",
                "18 April 2025",
                "26 May 2025",
                "25 Aug 2025",
                "22 Dec 2025 - 02 Jan 2026"
            ]
        }
    }
}
2025-01-31 09:50:18,420 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:50:18,420 - PDFParser - INFO - Successfully processed page 11
2025-01-31 09:50:18,421 - PDFParser - INFO - Processing page 12/18
2025-01-31 09:50:18,425 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:50:18,427 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:50:18,432 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:50:18,433 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:50:32,614 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:50:32,614 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri, 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 hours One-to-One lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri: General English; 14:00 - 16:30 Tues to Thurs: IELTS",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English and Culture Programme (50+)",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri. Includes afternoon cultural visits and 1 full day tour.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": "Full-time and Part-time online options",
                    "description": "Full-time: 09:00 - 17:00, Mon to Fri. Part-time online: ~20 hrs/week.",
                    "prices": [
                        {"course_version": "24 weeks (part-time)", "price": "£1515", "currency": "GBP"},
                        {"course_version": "Full/Part-time", "price": "£1400", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "class_size": "Maximum class size is 9",
        "teaching_hours": "All teaching/tuition hours are 45 minutes."
    }
}
2025-01-31 09:50:32,614 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:50:32,614 - PDFParser - INFO - Successfully processed page 12
2025-01-31 09:50:32,615 - PDFParser - INFO - Processing page 13/18
2025-01-31 09:50:32,619 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:50:32,620 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:50:32,627 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:50:32,628 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:50:47,375 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:50:47,375 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null,
            "courses": null,
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£280",
                        "premium_single": "£335",
                        "shared": "£235",
                        "premium_shared": "£275"
                    },
                    "description": "Half-board accommodation (bed, breakfast, and dinner).",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special Diet": "£35/week",
                        "Christmas Holiday Accommodation": "£350 (20 Dec to 3 Jan 2026)"
                    },
                    "placement_fee": "£75"
                }
            ],
            "additional_fees": {
                "airport_transfer": {
                    "from_heathrow": [
                        {"passengers": 1, "price": "£165"},
                        {"passengers": 2, "price": "£170"},
                        {"passengers": 3, "price": "£175"}
                    ],
                    "from_gatwick": [
                        {"passengers": 1, "price": "£205"},
                        {"passengers": 2, "price": "£210"},
                        {"passengers": 3, "price": "£215"}
                    ],
                    "from_stansted": [
                        {"passengers": 1, "price": "£215"},
                        {"passengers": 2, "price": "£220"},
                        {"passengers": 3, "price": "£225"}
                    ]
                },
                "digital_textbook": "£32"
            }
        }
    ],
    "terms": {
        "accommodation": "No allowance for absence during the arranged dates. Shared rooms are guaranteed only for 2 students traveling together. Single rooms for students aged 16-17 are not guaranteed in July and August.",
        "medical_insurance": "Students are advised to arrange medical and travel insurance before leaving home.",
        "tuition_hours": "Standard course is 15 contact hours per week. Intensive course is 22 contact hours per week, excluding breaks.",
        "examinations": "IELTS exam: £220 (subject to change).",
        "social_activities": "Optional excursions range from £8 to £120 depending on duration. Afternoon and evening activities are also provided.",
        "policy_of_care": "Strict policy of care for students aged 16-17 enrolled in adult programs.",
        "school_holidays": [
            "01 January",
            "18 April",
            "21 April",
            "05 May",
            "26 May",
            "25 August",
            "22 December 2025 - 02 January 2026"
        ]
    }
}
2025-01-31 09:50:47,376 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:50:47,376 - PDFParser - INFO - Successfully processed page 13
2025-01-31 09:50:47,376 - PDFParser - INFO - Processing page 14/18
2025-01-31 09:50:47,398 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:50:47,402 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:50:47,407 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:50:47,408 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:51:22,143 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:51:22,143 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies (CES)",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£240", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£230", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£225", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday; 14:00 - 16:30, Tuesday and Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons per week + 5 hours of one-to-one lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"extra_week_price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday General English; 14:00 - 16:30, Tuesday and Thursday IELTS",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 25,
                    "description": "20 group lessons per week + 5 hours of one-to-one lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"extra_week_price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course",
                    "lessons_per_week": null,
                    "description": "Flight not included; 24 weeks in Ireland and UK, 36 weeks in total.",
                    "prices": [
                        {"duration": "24 weeks", "price": "£5520", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£8100", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday; 14:00 - 16:30, Tuesday to Thursday",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8040", "currency": "GBP"},
                        {"extra_week_price": "£335", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "1- or 2-week courses; 09:30 - 13:00, Monday to Friday; Afternoon programs include lectures and visits.",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": null,
                    "description": "Full-time (09:30 - 17:00); Includes independent work around 20 hours per week.",
                    "prices": [
                        {"mode": "Face-to-Face", "price": "£1545", "currency": "GBP"},
                        {"mode": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"},
                        {"mode": "Online (part-time or full-time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday General English; 14:00 - 16:30, Tuesday and Thursday Business English",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"price_per_hour": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": null
}
2025-01-31 09:51:22,143 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:51:22,143 - PDFParser - INFO - Successfully processed page 14
2025-01-31 09:51:22,143 - PDFParser - INFO - Processing page 15/18
2025-01-31 09:51:22,148 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:51:22,150 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:51:22,156 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:51:22,156 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:51:59,642 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:51:59,642 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": "Not provided",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "room_type": "Single",
                            "price_per_week": "£240",
                            "description": "Half-board, includes meals. Summer supplement applies in July and August.",
                            "supplements": {
                                "Summer": "£35/week (July and August)",
                                "Special Diet": "£35/week",
                                "Christmas Holiday": "£350 (20 Dec to 3 Jan 2026)"
                            }
                        },
                        {
                            "room_type": "Shared",
                            "price_per_week": "£215",
                            "description": "Half-board, includes meals. Must be traveling together to request shared accommodation.",
                            "supplements": {
                                "Summer": "£35/week (July and August)"
                            }
                        }
                    ]
                },
                {
                    "type": "Residential",
                    "price_per_week": "£225",
                    "description": "Single ensuite room, available year-round for 18+ students. Minimum 4 weeks."
                }
            ],
            "additional_fees": {
                "accommodation_placement": "£75",
                "airport_transfer": [
                    {
                        "route": "Leeds Bradford Airport to CES Leeds (One-way)",
                        "price": {
                            "one_passenger": "£100",
                            "two_passengers": "£105",
                            "three_passengers": "£110"
                        }
                    },
                    {
                        "route": "Manchester Airport to CES Leeds (One-way)",
                        "price": {
                            "one_passenger": "£150",
                            "two_passengers": "£155",
                            "three_passengers": "£160"
                        }
                    },
                    {
                        "route": "Liverpool Airport to CES Leeds (One-way)",
                        "price": {
                            "one_passenger": "£185",
                            "two_passengers": "£190",
                            "three_passengers": "£195"
                        }
                    }
                ]
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is provided on a request basis. No allowances for absences will be made. Shared room accommodations only guaranteed for 2 people traveling together.",
        "medical_insurance": "Medical insurance is strongly advised before travel.",
        "tuition_hours": "Standard course is 15 contact hours per week. Intensive course provides 22 contact hours per week.",
        "examinations": "IELTS exam costs £220. CES Leeds is an official test center.",
        "text_book": "Digital e-book costs £32.",
        "social_activities": "Activities are paid individually. Full-day costs £60–£75, half-day costs £5–£20.",
        "school_holidays": "01 Jan, 18 Apr, 01 May, 26 May, 25 Aug, 22 Dec 2025 – 02 Jan 2026."
    }
}
2025-01-31 09:51:59,642 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:51:59,642 - PDFParser - INFO - Successfully processed page 15
2025-01-31 09:51:59,642 - PDFParser - INFO - Processing page 16/18
2025-01-31 09:51:59,647 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:51:59,649 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:51:59,654 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:51:59,655 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:52:52,115 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:52:52,116 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "UK",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30-13:00 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£245", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£235", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£225", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£220", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£210", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 and 14:00-16:30 Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "20 group lessons per week + 5 hours One-to-One lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Monday to Friday (General English) and 14:00-16:30 Tuesday to Thursday (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 20,
                    "description": "20 group lessons per week + 5 hours One-to-One lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course (Ireland and UK)",
                    "lessons_per_week": 20,
                    "description": "Flight not included",
                    "prices": [
                        {"duration": "24 weeks", "price": "£5280", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£7560", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course (Ireland and UK)",
                    "lessons_per_week": 30,
                    "description": "Flight not included",
                    "prices": [
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£10980", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Monday to Friday (General English) and 14:00-16:30 Tuesday to Thursday",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "Afternoon programme of lectures and visits (Language Development and Methodology)",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£770", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": null,
                    "description": "Full-time: 09:00-17:00 Monday to Friday, Part-time with independent tasks approximately 20 hours per week",
                    "prices": [
                        {"mode": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"},
                        {"mode": "*Online (Part-time or Full-time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Monday to Friday (General English) and 14:00-16:30 Tuesday to Thursday (Business English)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "Per hour", "price": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "general_terms": "All teaching hours are 45 minutes. Maximum class size is 14."
    }
}
2025-01-31 09:52:52,116 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:52:52,116 - PDFParser - INFO - Successfully processed page 16
2025-01-31 09:52:52,116 - PDFParser - INFO - Processing page 17/18
2025-01-31 09:52:52,120 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:52:52,122 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:52:52,127 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:52:52,128 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:53:06,433 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:53:06,433 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay (Half-Board)",
                    "price_per_week": {
                        "single_room": "£240",
                        "shared_room": "£215"
                    },
                    "description": "Breakfast, lunch, and dinner included.",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special_Diet": "£35/week",
                        "Christmas_Holidays": "£350 (20 Dec to 3 Jan 2026)"
                    }
                }
            ],
            "additional_fees": {
                "accommodation_placement": "£75",
                "airport_transfer": {
                    "to/from Heathrow Airport": {
                        "one_passenger": "£170",
                        "two_passengers": "£175",
                        "three_passengers": "£180"
                    },
                    "to/from Gatwick Airport": {
                        "one_passenger": "£140",
                        "two_passengers": "£145",
                        "three_passengers": "£150"
                    },
                    "to/from Stansted Airport": {
                        "one_passenger": "£250",
                        "two_passengers": "£255",
                        "three_passengers": "£260"
                    }
                },
                "textbook": "£32",
                "IELTS_exam": "£220 (subject to change)"
            }
        }
    ],
    "terms": {
        "accommodation": "Arranged in carefully selected homestay. No allowance for absence. Room guarantee for 16-17 year olds not during July and August. Shared rooms require paired travelers.",
        "medical_insurance": "Recommended to cover loss of tuition fees or early return. CES can assist in purchasing insurance.",
        "tuition_hours": "Standard course: 15 contact hours/week. Intensive course: 22 contact hours/week.",
        "social_activities": "Optional excursions and activities available. Costs: Full day £40-£85; Half day £20-£45.",
        "school_holidays": "18 April, 21 April, 5 May, 26 May, 25 August, 22 December 2025 - 2 January 2026. No refunds for public holidays."
    }
}
2025-01-31 09:53:06,433 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:53:06,433 - PDFParser - INFO - Successfully processed page 17
2025-01-31 09:53:06,433 - PDFParser - INFO - Processing page 18/18
2025-01-31 09:53:06,443 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:53:06,445 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:53:06,451 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:53:06,451 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:53:17,407 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:53:17,407 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "72 Dame Street, Dublin 2, Ireland",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "description": "Provided for a minimum of 2 weeks; full refund will be given if notified 28 days prior to arrival.",
                    "notice_period": "28 days",
                    "refund_policy": "Full refund if notified at least 28 days before arrival."
                },
                {
                    "type": "Self-catering",
                    "description": "Accommodation is provided based on availability; refund policy depends on notice period.",
                    "notice_period": "28 days",
                    "refund_policy": "Refund depends on the supplements."
                }
            ],
            "additional_fees": {
                "registration": {
                    "fee": "€250",
                    "currency": "EUR",
                    "refund_policy": "Non-refundable if cancellation occurs less than 14 days prior to arrival."
                },
                "deposit": {
                    "fee": "€250",
                    "currency": "EUR",
                    "refund_policy": "Non-refundable."
                }
            }
        },
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "27 South Street, Worthing, West Sussex, BN11 3AR, United Kingdom",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "registration": {
                    "fee": "£250",
                    "currency": "GBP",
                    "refund_policy": "Non-refundable if cancellation occurs less than 14 days prior to arrival."
                }
            }
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "89 Bloor Street West, Toronto, Ontario, Canada, M4W 1A3",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "registration": {
                    "fee": "CAD $195",
                    "currency": "CAD",
                    "refund_policy": "Non-refundable if cancellation occurs less than 14 days prior to arrival."
                },
                "deposit": {
                    "fee": "CAD $350",
                    "currency": "CAD",
                    "refund_policy": "Non-refundable."
                }
            }
        }
    ],
    "terms": {
        "cancellation": "All cancellations must be notified in writing. Refunds are available depending on the notice period.",
        "visa_refusal_policy": "A refusal of visa will allow fees to be refunded, subject to a deduction of deposits and bank charges.",
        "amendment_policy": "Amendments to study dates may incur a fee of €50/£50/CAD $50."
    }
}
2025-01-31 09:53:17,407 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:53:17,408 - PDFParser - INFO - Successfully processed page 18
2025-01-31 09:53:17,409 - PDFParser - INFO - PDF processing completed
2025-01-31 09:53:17,409 - PDFParser - INFO - Merging results from all pages
2025-01-31 09:53:17,409 - PDFParser - ERROR - Error in merge_results: 'address'
2025-01-31 09:53:17,409 - PDFParser - ERROR - Error in process_pdf: 'address'
2025-01-31 09:53:17,409 - PDFParser - ERROR - Main process failed: 'address'
2025-01-31 09:57:30,088 - PDFParser - INFO - Starting PDF processing
2025-01-31 09:57:30,089 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 09:57:30,089 - PDFParser - INFO - Initializing PDFParser
2025-01-31 09:57:30,128 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 09:57:30,129 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 09:57:30,129 - PDFParser - INFO - Processing page 1/18
2025-01-31 09:57:30,201 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:57:30,206 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:57:30,222 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:57:30,223 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:57:37,518 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:57:37,518 - PDFParser - DEBUG - Raw API response content:   
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {}
}  
2025-01-31 09:57:37,518 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:57:37,518 - PDFParser - INFO - Successfully processed page 1
2025-01-31 09:57:37,518 - PDFParser - INFO - Processing page 2/18
2025-01-31 09:57:37,583 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:57:37,586 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:57:37,591 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:57:37,592 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:58:01,967 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:58:01,967 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00 Mon to Fri",
                    "prices": [
                        { "duration": "2-4 weeks", "price": "€355", "currency": "EUR" },
                        { "duration": "5-11 weeks", "price": "€315", "currency": "EUR" },
                        { "duration": "12-23 weeks", "price": "€285", "currency": "EUR" },
                        { "duration": "24-35 weeks", "price": "€265", "currency": "EUR" },
                        { "duration": "36+ weeks", "price": "€255", "currency": "EUR" }
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00 Mon to Fri & 14:00 - 16:00 Tues to Thurs",
                    "prices": [
                        { "duration": "2-4 weeks", "price": "€425", "currency": "EUR" },
                        { "duration": "5-11 weeks", "price": "€400", "currency": "EUR" },
                        { "duration": "12-23 weeks", "price": "€385", "currency": "EUR" },
                        { "duration": "24-35 weeks", "price": "€345", "currency": "EUR" },
                        { "duration": "36+ weeks", "price": "€330", "currency": "EUR" }
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "13:45 - 17:00 Mon to Fri",
                    "prices": [
                        { "duration": "2-4 weeks", "price": "€200", "currency": "EUR" },
                        { "duration": "5-11 weeks", "price": "€190", "currency": "EUR" },
                        { "duration": "12-23 weeks", "price": "€180", "currency": "EUR" },
                        { "duration": "24-35 weeks", "price": "€160", "currency": "EUR" },
                        { "duration": "36+ weeks", "price": "€155", "currency": "EUR" }
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "Group + One-to-One lessons",
                    "description": "09:00 - 13:00 Mon to Fri (group lessons) + One-to-One",
                    "prices": [
                        { "duration": "2-4 weeks", "price": "€735", "currency": "EUR" },
                        { "duration": "5-11 weeks", "price": "€700", "currency": "EUR" },
                        { "duration": "12+ weeks", "price": "€675", "currency": "EUR" }
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00 Mon to Fri",
                    "prices": [
                        { "duration": "2-4 weeks", "price": "€355", "currency": "EUR" },
                        { "duration": "5-11 weeks", "price": "€315", "currency": "EUR" },
                        { "duration": "12-23 weeks", "price": "€285", "currency": "EUR" },
                        { "duration": "24-35 weeks", "price": "€265", "currency": "EUR" },
                        { "duration": "36+ weeks", "price": "€255", "currency": "EUR" }
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00 Mon to Fri & 14:00 - 16:00 Tues to Thurs",
                    "prices": [
                        { "duration": "2-4 weeks", "price": "€425", "currency": "EUR" },
                        { "duration": "5-11 weeks", "price": "€400", "currency": "EUR" },
                        { "duration": "12-23 weeks", "price": "€385", "currency": "EUR" },
                        { "duration": "24-35 weeks", "price": "€345", "currency": "EUR" },
                        { "duration": "36+ weeks", "price": "€330", "currency": "EUR" }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room with half board",
                    "supplements": {
                        "Summer": "€35/week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "14 days notice required"
    }
}
2025-01-31 09:58:01,967 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:58:01,967 - PDFParser - INFO - Successfully processed page 2
2025-01-31 09:58:01,967 - PDFParser - INFO - Processing page 3/18
2025-01-31 09:58:01,973 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:58:01,977 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:58:01,983 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:58:01,983 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:58:12,490 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:58:12,490 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "Not provided",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€280",
                    "description": "Half board included (breakfast and dinner Monday to Friday and all meals on weekends). Single rooms are not available to students aged 16-18 years.",
                    "supplements": {
                        "Summer": "€35/week (June 1 - September 15, for students over 18 years)",
                        "Special Diet": "€35/week (e.g., Coeliac, gluten free, lactose free, vegan, vegetarian)"
                    }
                },
                {
                    "type": "Christmas Holidays Homestay Accommodation",
                    "price_per_week": "€345",
                    "description": "Available from December 20, 2025, to January 3, 2026."
                },
                {
                    "type": "Residential (Auburn and Crestfield)",
                    "price_per_week": {
                        "single_room": "€300",
                        "shared_room": "€265"
                    },
                    "description": "Self-catering, 18+ years, a minimum of 2 weeks. Includes compulsory airport transfer on arrival. Located approximately 4-5 km from the school."
                },
                {
                    "type": "Residential (Heyday)",
                    "price_per_week": "€399",
                    "description": "Self-catering, 18+ years, a minimum of 2 weeks. Located 14 minutes walking distance from the school, all rooms are single ensuite."
                }
            ],
            "additional_fees": {
                "placement_fee": "€85",
                "airport_transfer": "€85 (one way)"
            }
        }
    ],
    "terms": {
        "accommodation": "Homestay arrangement includes half board during weekdays and full board on weekends. No allowance for absences or late arrivals. Unused days incur a fee of €60 per week.",
        "insurance": "Mandatory for ILEP students, at €130 per annum. Includes Protection for Enrolled Learners.",
        "tuition_hours": "Standard Course: 18.33 contact hours per week. Intensive Course: 23.83 contact hours per week.",
        "examinations": "IELTS exam costs €215. Cambridge Advanced (C1) costs €210.",
        "text_books": {
            "general": "€28",
            "IELTS_or_Cambridge": "€45"
        },
        "social_activities": "Organized excursions and evening activities available. Costs range from €15-65 based on activity.",
        "school_holidays": "January 1, February 3, March 17, April 18, April 21, May 5, May 20, June 4, August 27, October 19, December 20, 2025 - January 5, 2026."
    }
}
2025-01-31 09:58:12,490 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:58:12,490 - PDFParser - INFO - Successfully processed page 3
2025-01-31 09:58:12,490 - PDFParser - INFO - Processing page 4/18
2025-01-31 09:58:12,517 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:58:12,520 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:58:12,526 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:58:12,526 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:58:34,965 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:58:34,965 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "All year, morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "All year, morning classes Mon-Fri, 09:00-13:00; Tue-Thu afternoons, 14:00-16:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "All year, afternoons Mon-Fri, 14:00-17:15 (minimum 4 weeks)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€150", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€145", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 30,
                    "description": "All year, includes 20 group lessons Mon-Fri, 09:00-13:00, and 5 hours of one-to-one lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 09:58:34,965 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:58:34,965 - PDFParser - INFO - Successfully processed page 4
2025-01-31 09:58:34,965 - PDFParser - INFO - Processing page 5/18
2025-01-31 09:58:34,969 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:58:34,971 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:58:34,977 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:58:34,977 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:58:58,459 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:58:58,459 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": null,
                    "supplements": {
                        "Extra Night": "€50",
                        "Single Room Summer Supplement": "€50 per week (May 17 to September 28)",
                        "Special Diet Supplement": "€35 per week (Coeliac, gluten free, lactose free, vegan, vegetarian)",
                        "Christmas Holidays Homestay Accommodation Fee": "€345 per week (December 20 to January 3, 2026)"
                    }
                },
                {
                    "type": "University College Cork Residence",
                    "price_per_week": "From €285",
                    "description": "Extra Night at €50",
                    "supplements": {}
                },
                {
                    "type": "Airport Transfer",
                    "price_per_trip": "€60",
                    "description": "One-way transfer to homestay or residence",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "Accommodation placement fee": "€85",
                "Registration fee": null,
                "Insurance (mandatory for ILEP students)": "€130 per annum"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is in carefully selected homestays or residences offering half board during the weekdays and full board on weekends. A retainer fee of €60 per week applies for students vacating for five days or longer.",
        "insurance": "Medical insurance costs €130 per annum. Coverage becomes effective upon fulfilling enrollment requirements.",
        "tuition_hours": "Standard Course - 18.33 contact hours per week; Intensive Course - 23.83 contact hours per week. All teaching hours are 55 minutes.",
        "examinations": "IELTS exam costs €215, Cambridge First €205, Advanced €210 (subject to change).",
        "text_book": "Textbook + Digital E-Book €28. IELTS coursebook €45.",
        "social_activities": "Social activities range from €15 to €65 depending on full or half-day excursions, with some free activities provided.",
        "policy_of_care": "Strict policy for the care and welfare of 16-17 year old students.",
        "school_holidays": "No classes during public holidays: January 1, February 3, March 17, April 18, April 21, May 2, June 4, August 27, October 27, December 19-25, January 5, 2026."
    }
}
2025-01-31 09:58:58,459 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:58:58,460 - PDFParser - INFO - Successfully processed page 5
2025-01-31 09:58:58,460 - PDFParser - INFO - Processing page 6/18
2025-01-31 09:58:58,485 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:58:58,488 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:58:58,493 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:58:58,494 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:59:32,705 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:59:32,705 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Language School Toronto",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$400", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$375", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Digital Marketing",
                    "lessons_per_week": 20,
                    "description": "Group lessons (09:00 - 12:15 Mon to Fri) and 10 extra hours (13:00 - 15:15 Mon to Thurs)",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 30,
                    "description": "09:00 - 12:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Business",
                    "lessons_per_week": 25,
                    "description": "20 general lessons (09:00 - 12:15 Mon to Fri) and 5 business lessons (13:00 - 14:00 Mon to Thurs)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "General English for 30+",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri with 5 One-to-One lessons (13:00 - 15:30)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "$195",
                "private_lessons_general": "$85 per lesson",
                "private_lessons_exam_preparation": "$95 per lesson",
                "Cambridge_materials_exam_admin": "$575",
                "IELTS_paper_based_exam": "$370",
                "IELTS_computer_based_cd": "$370",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "teaching_hours": "All teaching/tuition hours are 45 minutes",
        "class_size": "Maximum class size is 16."
    }
}
2025-01-31 09:59:32,705 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:59:32,705 - PDFParser - INFO - Successfully processed page 6
2025-01-31 09:59:32,705 - PDFParser - INFO - Processing page 7/18
2025-01-31 09:59:32,712 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:59:32,713 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:59:32,719 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:59:32,720 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 09:59:46,791 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 09:59:46,791 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": 15,
                    "description": "Classes are 45 minutes each. Includes breaks.",
                    "prices": []
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 18.75,
                    "description": "Classes are 45 minutes each. Includes breaks.",
                    "prices": []
                },
                {
                    "name": "Super Intensive Course",
                    "lessons_per_week": 22.5,
                    "description": "Classes are 45 minutes each. Includes breaks.",
                    "prices": []
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "Single Full Board": "CAD 350",
                        "Shared Full Board": "CAD 310",
                        "Single Half Board": "CAD 320",
                        "Shared Half Board": "CAD 275",
                        "Executive Half Board": "CAD 365"
                    },
                    "description": "Full board, half board, and executive options available.",
                    "supplements": {
                        "Summer Supplement (per week)": "CAD 30 (June 1 - August 31)",
                        "Special Diet": {
                            "Full Board": "CAD 50",
                            "Half Board": "CAD 45"
                        },
                        "Extra Night": "CAD 60",
                        "Underage Fee (16-17 Years)": "CAD 25 per week"
                    }
                },
                {
                    "type": "Residential Self Catering",
                    "price_per_week": {
                        "Casa Canada Shared Room": "CAD 525",
                        "Casa Canada 1 Bedroom": "CAD 650",
                        "28 Langley Ave": "CAD 575",
                        "Tartu Student Residence Economy Suite": "CAD 550",
                        "Tartu Student Residence Premium (AC)": "CAD 650"
                    },
                    "price_per_month": {
                        "Casa Canada Shared Room": "CAD 1985",
                        "Casa Canada 1 Bedroom": "CAD 1985",
                        "Tartu Student Residence Economy Suite": "CAD 1450",
                        "Tartu Student Residence Premium (AC)": "CAD 1750"
                    },
                    "description": "Self-catering residences for adults (18+). Minimum 4 weeks."
                }
            ],
            "additional_fees": {
                "Accommodation Placement Fee": "CAD 275",
                "Airport Transfer (one way)": "CAD 150",
                "Airport Return Transfer": "CAD 300",
                "Custodian Fee Non-Notarized": "CAD 75",
                "Custodian Fee Notarized": "CAD 200",
                "Medical Insurance": "CAD 3 per day",
                "Homestay Move Fee": "CAD 150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation must be pre-arranged. Late arrival fee (non-Saturday/Sunday): CAD 125. Shared accommodations are not guaranteed. Check-in/check-out must be Saturday-Saturday or Sunday-Sunday.",
        "medical_insurance": "Students are strongly advised to arrange travel and medical insurance.",
        "tuition_hours": "Teaching hours are 45 minutes. General teaching includes 15 hours/week. Intensive: 18.75. Super Intensive: 22.5.",
        "social_activities": "Includes day trips and activities, e.g., Niagara Falls (CAD 125), yoga (CAD 150/month), golf (CAD 575/week).",
        "policy_of_care": "Strict policy for 16-17 year old students.",
        "school_holidays": [
            "01 January 2025",
            "17 February 2025",
            "18 April 2025",
            "19 May 2025",
            "01 July 2025",
            "04 August 2025",
            "01 September 2025",
            "30 September 2025",
            "13 October 2025",
            "11 November 2025",
            "25 December 2025",
            "26 December 2025"
        ]
    }
}
2025-01-31 09:59:46,791 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 09:59:46,792 - PDFParser - INFO - Successfully processed page 7
2025-01-31 09:59:46,792 - PDFParser - INFO - Processing page 8/18
2025-01-31 09:59:46,799 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 09:59:46,802 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 09:59:46,809 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 09:59:46,810 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:00:08,273 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:00:08,274 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$365", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thu, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thu, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thu, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thu, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course (FCE/CAE)",
                    "lessons_per_week": 30,
                    "description": "09:00 - 12:15 Mon to Fri + 5 hours One-to-One lessons per week, 13:00 - 15:30 two afternoons for additional Cambridge Preparation.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ],
                    "exam_dates": ["FCE: 10 June, CAE: 04 June", "FCE: 25 Nov, CAE: 26 Nov"]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thu, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ],
                    "exam_dates": ["FCE: 24 July, CAE: 25 July", "FCE: 21 Aug, CAE: 22 Aug"]
                }
            ],
            "accommodations": [], 
            "additional_fees": {
                "registration": "$195",
                "private_lessons": {
                    "general": "$85 per lesson",
                    "exam_preparation": "$95 per lesson"
                },
                "Cambridge_materials": "$575",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "class_duration": "45 minutes per lesson",
        "class_size": "Maximum of 16 students"
    }
}
2025-01-31 10:00:08,274 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:00:08,274 - PDFParser - INFO - Successfully processed page 8
2025-01-31 10:00:08,274 - PDFParser - INFO - Processing page 9/18
2025-01-31 10:00:08,279 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:00:08,280 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:00:08,286 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:00:08,287 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:00:24,953 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:00:24,953 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "type": "Full-Board",
                            "price_per_week": "$375",
                            "shared_price_per_week": "$355",
                            "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                        },
                        {
                            "type": "Half-Board",
                            "price_per_week": "$360",
                            "shared_price_per_week": "$335",
                            "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                        },
                        {
                            "type": "Executive Half-Board with Private Bathroom",
                            "price_per_week": "$480",
                            "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                        }
                    ],
                    "add_ons": {
                        "special_diet_supplement": "$50 p/w (Full-Board), $45 p/w (Half-Board)",
                        "extra_night": "$60",
                        "underage_fee": "$25 p/w (16-18 years)"
                    },
                    "placement_fee": "$275"
                },
                {
                    "type": "Residential",
                    "options": [
                        {
                            "name": "GEC Viva (18+)",
                            "shared_room_weekly": "Not Available",
                            "shared_room_monthly": "$1600/month",
                            "private_price_per_week": "$600",
                            "private_price_per_month": "$2400/month"
                        },
                        {
                            "name": "YWCA Student Residence",
                            "price": "TBA"
                        }
                    ],
                    "placement_fee": "$275"
                }
            ],
            "additional_fees": {
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized": "$75 (if required by Canadian Immigration, Under 18)",
                "custodian_fee_notarized": "$200 (if required by Canadian Immigration, Under 18)",
                "medical_insurance_daily": "$3",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a carefully selected homestay. No allowance for absence from homestay during arranged time. Shared accommodations for two traveling together only.",
        "medical_insurance": "Students are advised to arrange travel and medical insurance before travel to cover personal and tuition losses.",
        "tuition_hours": {
            "standard": "15 hours per week (45 minutes per lesson)",
            "intensive": "18.75 hours per week",
            "super_intensive": "22.50 hours per week"
        },
        "social_activities": "CES organizes trips including Whistler, Victoria, Rocky Mountains, Seattle, and more.",
        "policy_care": "CES provides care for students under 19 in adult schools.",
        "school_holidays": [
            "01 January",
            "17 February",
            "18 April",
            "19 May",
            "01 July",
            "04 August",
            "01 September",
            "30 September",
            "13 October",
            "11 November",
            "25 December",
            "26 December 2025"
        ]
    }
}
2025-01-31 10:00:24,953 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:00:24,953 - PDFParser - INFO - Successfully processed page 9
2025-01-31 10:00:24,954 - PDFParser - INFO - Processing page 10/18
2025-01-31 10:00:24,987 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:00:24,989 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:00:24,994 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:00:24,995 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:01:01,372 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:01:01,372 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri 09:30-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes Mon-Fri 09:30-16:30",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "Morning group classes + afternoons one-to-one",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "Specialized preparation for IELTS Mon-Fri 09:30-16:30",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 20,
                    "description": "Exam preparation focusing on Cambridge FCE exams.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "Preparation for higher education.",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4380", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8520", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Course",
                    "lessons_per_week": 20,
                    "description": "Specialized teaching training and development.",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£770", "currency": "GBP"}
                    ]
                }
            ]
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "English and Culture, 50+ Programme",
                    "lessons_per_week": 20,
                    "description": "A cultural programme tailored for adults 50+.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "description": "Official CELTA certification course.",
                    "prices": [
                        {"type": "Face-to-face", "price": "£1545", "currency": "GBP"},
                        {"type": "Online (Part-time or full-time)", "price": "£1400", "currency": "GBP"},
                        {"type": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"}
                    ]
                }
            ]
        }
    ],
    "terms": {
        "registration_fee": "£75 for all students",
        "maximum_class_size": 14,
        "lesson_duration": "45 minutes",
        "cancellation": "Not explicitly stated in image."
    }
}
2025-01-31 10:01:01,373 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:01:01,373 - PDFParser - INFO - Successfully processed page 10
2025-01-31 10:01:01,373 - PDFParser - INFO - Processing page 11/18
2025-01-31 10:01:01,379 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:01:01,382 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:01:01,388 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:01:01,388 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:01:26,003 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:01:26,003 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "UK",
            "address": "Not specified",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£280",
                        "premium_single": "£335",
                        "shared": "£235",
                        "premium_shared": "£275"
                    },
                    "description": "Half-board",
                    "supplements": {
                        "summer": "£35 per week (July and August)",
                        "special_diet": "£35 per week",
                        "christmas_holidays": "£350 per week (20 Dec to 3 Jan 2026)"
                    }
                },
                {
                    "type": "Residential",
                    "price_per_week": {
                        "double_two_share": "£275",
                        "twin_two_share": "£350",
                        "double_single_occupancy": "£455",
                        "twin_single_occupancy": "£560",
                        "large_double_single": "£560"
                    },
                    "description": "Rathbone Apartments, Zone 1 Central London. Minimum stay 4 weeks, age 18+. Departures in October, November, and December are not accepted."
                }
            ]
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": "Not specified",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£280",
                        "shared": "£235"
                    },
                    "description": "Half-board",
                    "supplements": {
                        "summer": "£35 per week (July and August)"
                    }
                }
            ]
        }
    ],
    "additional_fees": {
        "accommodation_placement": "£75",
        "airport_transfer": {
            "london_gatwick_heathrow": {
                "one_passenger": "£145",
                "two_passengers": "£150",
                "three_passengers": "£155"
            },
            "london_stansted": {
                "one_passenger": "£200",
                "two_passengers": "£210",
                "three_passengers": "£220"
            },
            "edinburgh": {
                "one_passenger": "£80",
                "two_passengers": "£85",
                "three_passengers": "£90"
            },
            "glasgow_to_edinburgh": {
                "one_passenger": "£280",
                "two_passengers": "£285",
                "three_passengers": "£290"
            }
        },
        "registration": "£85"
    },
    "terms": {
        "accommodation": "Half board includes bed, breakfast, and dinner. Shared accommodation is only available for 2 people traveling together. Accommodation is not guaranteed for single rooms or groups during July and August.",
        "medical_insurance": "Students are advised to obtain travel and medical insurance before leaving home.",
        "tuition_hours": {
            "general_course": "15 contact hours per week",
            "intensive_course": "22 contact hours per week"
        },
        "examinations": "IELTS exam costs £220 (subject to change).",
        "text_book_cost": "£32",
        "school_holidays": ["1 Jan", "18 Apr", "6 May", "26 May", "25 Aug", "22 Dec 2025 - 2 Jan 2026"]
    }
}
2025-01-31 10:01:26,003 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:01:26,004 - PDFParser - INFO - Successfully processed page 11
2025-01-31 10:01:26,004 - PDFParser - INFO - Processing page 12/18
2025-01-31 10:01:26,009 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:01:26,013 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:01:26,018 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:01:26,018 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:02:07,729 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:02:07,729 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30-13:00 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Monday to Friday, 14:00-16:30 Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "20 group lessons + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Monday to Friday, 14:00-16:30 Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course",
                    "lessons_per_week": 20,
                    "description": "20 group lessons + 5 one-to-one lessons per week, 09:30-13:00 Monday to Friday, 14:00-16:30 two afternoons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi-Destination Course (UK and Ireland)",
                    "lessons_per_week": null,
                    "description": "Flight not included",
                    "prices": [
                        {"duration": "24 weeks (20 lessons p/w)", "price": "£6,000", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons p/w)", "price": "£8,520", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons p/w)", "price": "£8,640", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons p/w)", "price": "£12,420", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Monday to Friday, 14:00-16:30 Tuesday to Thursday",
                    "prices": [
                        {"duration": "3 months", "price": "£4,380", "currency": "GBP"},
                        {"duration": "6 months", "price": "£8,520", "currency": "GBP"},
                        {"duration": "Extra per week", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English and Culture, 50+ Programme",
                    "lessons_per_week": 20,
                    "description": "Afternoons dedicated to cultural visits and one full-day tour included",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1,065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": null,
                    "description": "Full-time: 09:00-17:00 Monday to Friday or online part-time over 24 weeks",
                    "prices": [
                        {"duration": "Online (24-week part-time)", "price": "£1,515", "currency": "GBP"},
                        {"duration": "Online (part-time or full-time)", "price": "£1,400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Monday to Friday, 14:00-16:30 Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": "Customizable",
                    "description": null,
                    "prices": [
                        {"duration": "Per hour", "price": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": null,
        "class_size": "Maximum 9 students per class during July and August"
    }
}
2025-01-31 10:02:07,730 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:02:07,730 - PDFParser - INFO - Successfully processed page 12
2025-01-31 10:02:07,730 - PDFParser - INFO - Processing page 13/18
2025-01-31 10:02:07,740 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:02:07,744 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:02:07,751 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:02:07,752 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:02:19,555 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:02:19,556 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "IELTS Exam Preparation",
                    "prices": [
                        {"exam_fee": "£220", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "category": "Half-Board",
                    "price": {
                        "single": "£280",
                        "single_premium": "£335",
                        "shared": "£235",
                        "shared_premium": "£275"
                    },
                    "currency": "GBP",
                    "description": "Includes bed, breakfast, and dinner.",
                    "supplements": {
                        "summer": "£35/week (July and August)",
                        "special_diet": "£35/week",
                        "Christmas_Homestay": "£350 (20 Dec 2025 - 3 Jan 2026)"
                    },
                    "terms": "Shared room accommodation only for 2 people traveling together. Cannot guarantee for others."
                }
            ],
            "transport": {
                "airport_transfer_fees": {
                    "Heathrow": [
                        {"one_passenger": "£165", "two_passengers": "£170", "three_passengers": "£175"}
                    ],
                    "Gatwick": [
                        {"one_passenger": "£205", "two_passengers": "£210", "three_passengers": "£215"}
                    ],
                    "Stansted": [
                        {"one_passenger": "£215", "two_passengers": "£220", "three_passengers": "£225"}
                    ]
                }
            },
            "additional_fees": {
                "accommodation_placement": "£75",
                "digital_ebook": "£32",
                "social_activity_costs": {
                    "full_day": "£75-£120",
                    "half_day": "£8-£90"
                }
            }
        }
    ],
    "terms": {
        "accommodation": "No allowance for absence. Single room guarantee for 16-17 years not during July-August.",
        "medical_insurance": "CES assists with travel insurance; recommended to acquire before departure.",
        "teaching_hours": "Standard course has 15 teaching hours per week.",
        "policy_of_care": "Strict care for 16-17-year-olds in adult schools.",
        "school_holidays": {
            "dates": [
                {"start": "01 January 2025", "end": "02 January 2025"},
                {"start": "18 April 2025", "end": "21 April 2025"},
                {"start": "05 May 2025"},
                {"start": "26 May 2025"},
                {"start": "22 December 2025", "end": "02 January 2026"}
            ],
            "refund_policy": "No refund or time in lieu for public holidays."
        }
    }
}
2025-01-31 10:02:19,556 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:02:19,556 - PDFParser - INFO - Successfully processed page 13
2025-01-31 10:02:19,556 - PDFParser - INFO - Processing page 14/18
2025-01-31 10:02:19,587 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:02:19,591 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:02:19,596 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:02:19,597 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:02:59,162 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:02:59,163 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30-13:00 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£240", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£230", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£225", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri and 14:00-16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons per week + 5 hours One-to-One lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri (General English) and 14:00-16:30 Tues to Thurs (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 25,
                    "description": "20 group lessons per week + 5 hours One-to-One lessons per week in FCE preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri and 14:00-16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8040", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£335", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "01-26 July: Language Development and Methodology, CLIL (Blended)",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": null,
                    "description": "Full time 09:30-17:00 Mon to Fri (includes part-time online options)",
                    "prices": [
                        {"mode": "Face-to-Face", "price": "£1545", "currency": "GBP"},
                        {"mode": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"},
                        {"mode": "Online (part-time or full-time)", "price": "£1400", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "class_size": "Maximum class size is 14.",
        "lesson_duration": "All teaching/tuition hours are 45 minutes."
    }
}
2025-01-31 10:02:59,163 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:02:59,163 - PDFParser - INFO - Successfully processed page 14
2025-01-31 10:02:59,163 - PDFParser - INFO - Processing page 15/18
2025-01-31 10:02:59,168 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:02:59,171 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:02:59,176 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:02:59,177 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:03:14,762 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:03:14,762 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£240",
                        "shared": "£215"
                    },
                    "description": "Half-board (breakfast and dinner) accommodation",
                    "supplements": {
                        "Summer Supplement": "£35/week (July and August)",
                        "Special Diet Supplement": "£35/week (e.g., gluten-free, vegan, halal, etc.)",
                        "Christmas Holiday Accommodation Fee": "£350 (20 Dec to 3 Jan 2026)"
                    },
                    "placement_fee": "£75"
                },
                {
                    "type": "Residential",
                    "price_per_week": "£225 (single en-suite room)",
                    "description": "Year-round accommodation for students 18+ years, minimum stay of 4 weeks",
                    "placement_fee": "£75"
                }
            ],
            "additional_fees": {
                "airport_transfer": {
                    "Leeds Bradford Airport": {
                        "one_passenger": "£100",
                        "two_passengers": "£105",
                        "three_passengers": "£110"
                    },
                    "Manchester Airport": {
                        "one_passenger": "£150",
                        "two_passengers": "£155",
                        "three_passengers": "£160"
                    },
                    "Liverpool Airport": {
                        "one_passenger": "£185",
                        "two_passengers": "£190",
                        "three_passengers": "£195"
                    }
                },
                "IELTS_exam_fee": "£220",
                "digital_e_book": "£32"
            }
        }
    ],
    "terms": {
        "accommodation": "Arrangements made with selected homestay providers. No allowance for absences or late arrivals/departures.",
        "medical_insurance": "Travel and medical insurance recommended to cover tuition and personal loss.",
        "tuition_hours": "Standard Course: 15 contact hours/week. Intensive Course: 22 contact hours/week.",
        "examinations": "IELTS fees apply, with exams possible at CES Leeds.",
        "school_holidays": [
            "01 January",
            "18 April",
            "01 May",
            "26 May",
            "25 August",
            "22 December 2025 - 02 January 2026"
        ],
        "social_activities": "Variety of excursions and activities available at an additional fee (full-day: £40-75, half-day: £5-20)."
    }
}
2025-01-31 10:03:14,762 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:03:14,762 - PDFParser - INFO - Successfully processed page 15
2025-01-31 10:03:14,762 - PDFParser - INFO - Processing page 16/18
2025-01-31 10:03:14,767 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:03:14,771 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:03:14,776 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:03:14,777 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:03:37,506 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:03:37,506 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "N/A",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:30-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£245", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£235", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£225", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£220", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£210", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes Mon-Fri, 09:30-13:00 and 14:00-16:30 Tue-Thu",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "Morning group lessons plus afternoon one-to-one classes",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "General English and IELTS preparation classes Mon-Fri, 09:30-13:00 and 14:00-16:30 Tue-Thu",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation (FCE)",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "Morning group lessons Mon-Fri and afternoon one-to-one classes for FCE preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course",
                    "lessons_per_week": "20 or 30",
                    "description": "Study in Ireland and UK without flights included",
                    "prices": [
                        {"duration": "24 weeks (20 lessons)", "price": "£5280", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons)", "price": "£7560", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons)", "price": "£7560", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons)", "price": "£10980", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "Full-time classes preparing for university, Mon-Fri, 09:30-13:00 and 14:00-16:30 Tue-Thu",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "One and two-week courses starting every Monday from 30 June to 25 July, Mon-Fri 09:30-13:00 and lectures/visits in the afternoons",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£770", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": "Full/part-time",
                    "description": "Full-time: 09:00-17:00 Mon-Fri. Part-time: independent work of approx. 20 hrs per week",
                    "prices": [
                        {"format": "Online (24 weeks, part-time)", "price": "£1515", "currency": "GBP"},
                        {"format": "Online (part-time or full-time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "Available in July and August, Mon-Fri, 09:30-13:00 and 14:00-16:30 Tue-Thu",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": "Custom",
                    "description": "Private individual lessons",
                    "prices": [
                        {"rate": "£75/hour", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "general": "All teaching/tuition hours are 45 minutes. Maximum class size is 14."
    }
}
2025-01-31 10:03:37,506 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:03:37,506 - PDFParser - INFO - Successfully processed page 16
2025-01-31 10:03:37,506 - PDFParser - INFO - Processing page 17/18
2025-01-31 10:03:37,510 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:03:37,512 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:03:37,518 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:03:37,518 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:03:47,082 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:03:47,082 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£240",
                        "shared": "£215"
                    },
                    "description": "Half board accommodation with bed, breakfast, and dinner",
                    "supplements": {
                        "summer": "£35/week (July and August)",
                        "special_diet": "£35/week (gluten-free, vegan, halal, etc.)",
                        "Christmas_Holidays": "£350 (20 December to 3 January 2026)"
                    }
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "£75",
                "text_book": "£32",
                "IELTS_exam": "£220 (subject to change)"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in carefully selected homestays. No allowance for absence is provided, and a shared room is only guaranteed for those traveling together.",
        "medical_insurance": "Recommended to be arranged by the student to cover losses including travel or tuition fees.",
        "tuition_hours": "Standard course offers 15 contact hours per week; Intensive course offers 22 hours per week.",
        "holidays": "01 January, 18 April, 21 April, 05 May, 26 May, 25 August, 22 December 2025 - 02 January 2026. (No refunds for public holidays.)",
        "social_activities": "Various activities available and paid for separately. Approximate costs: Full day £40-£85, half-day £20-£45."
    }
}
2025-01-31 10:03:47,082 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:03:47,082 - PDFParser - INFO - Successfully processed page 17
2025-01-31 10:03:47,082 - PDFParser - INFO - Processing page 18/18
2025-01-31 10:03:47,092 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:03:47,094 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:03:47,100 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:03:47,101 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:03:55,942 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:03:55,942 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies (CES)",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "72 Dame Street, Dublin 2, Ireland",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Provided for a minimum of 2 weeks with full refund given if cancellation notice is provided at least 7 days in advance.",
                    "supplements": {}
                },
                {
                    "type": "Self-catering",
                    "price_per_week": null,
                    "description": "Provided for a minimum of 28 days with full refund given if cancellation notice is provided at least 28 days in advance.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "deposit": "€250",
                "cancellation_fee": "€250 if canceled less than 14 days prior to arrival"
            }
        },
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "27 South Street, Worthing, West Sussex, BN11 3AR",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "deposit": "£250"
            }
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "180 Bloor Street West, Toronto, Ontario M4W 1A3",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "deposit": "$350",
                "registration_fee": "$195",
                "PAL Service Fee": "$80"
            }
        }
    ],
    "terms": {
        "cancellation": "Cancellation notice of 10-14 days before arrival will incur a fee of €250 (Ireland)/£250 (UK)/$350 (Canada). No refunds for students changing from Intensive to Standard Course or withdrawing 14 days before their course begins.",
        "visa_refusal": "CES will refund the deposit upon receipt of visa refusal notice.",
        "postponement": "A new start date will depend on availability, and no fees will be refunded."
    }
}
2025-01-31 10:03:55,942 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:03:55,943 - PDFParser - INFO - Successfully processed page 18
2025-01-31 10:03:55,944 - PDFParser - INFO - PDF processing completed
2025-01-31 10:03:55,944 - PDFParser - INFO - Merging results from all pages
2025-01-31 10:03:55,944 - PDFParser - ERROR - Error in merge_results: 'NoneType' object is not iterable
2025-01-31 10:03:55,944 - PDFParser - ERROR - Error in process_pdf: 'NoneType' object is not iterable
2025-01-31 10:03:55,944 - PDFParser - ERROR - Main process failed: 'NoneType' object is not iterable
2025-01-31 10:08:34,437 - PDFParser - INFO - Starting PDF processing
2025-01-31 10:08:34,438 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 10:08:34,438 - PDFParser - INFO - Initializing PDFParser
2025-01-31 10:08:34,472 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 10:08:34,473 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 10:08:34,473 - PDFParser - INFO - Processing page 1/18
2025-01-31 10:08:34,516 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:08:34,520 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:08:34,531 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:08:34,532 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:08:47,881 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:08:47,881 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "IELTS, Cambridge, TOEIC and OET Exam Preparation",
                    "lessons_per_week": null,
                    "description": "Official Exam Centre",
                    "prices": []
                },
                {
                    "name": "CELTA Training",
                    "lessons_per_week": null,
                    "description": "CELTA Training Centre",
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Leeds",
            "country": "UK",
            "address": null,
            "courses": [
                {
                    "name": "IELTS Exam Preparation",
                    "lessons_per_week": null,
                    "description": "Official IELTS Exam Centre",
                    "prices": []
                },
                {
                    "name": "CELTA Training",
                    "lessons_per_week": null,
                    "description": "CELTA Training Centre",
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": null,
            "courses": [
                {
                    "name": "CELTA Training",
                    "lessons_per_week": null,
                    "description": "CELTA Training Centre",
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "IELTS, Cambridge, CELPIP, TOEIC and OET Exam Preparation",
                    "lessons_per_week": null,
                    "description": "Official Exam Centre",
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": null
}
2025-01-31 10:08:47,882 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:08:47,882 - PDFParser - INFO - Successfully processed page 1
2025-01-31 10:08:47,882 - PDFParser - INFO - Processing page 2/18
2025-01-31 10:08:47,948 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:08:47,951 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:08:47,956 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:08:47,957 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:09:22,790 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:09:22,791 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00-13:00 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "09:00-13:00 Monday to Friday; 14:00-16:00 Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "13:45-17:00 Monday to Friday",
                    "prices": [
                        {"duration": "4-11 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€160", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "Group lessons plus one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€700", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "09:00-13:00 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "General English in the morning; IELTS in the afternoon",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Course (FCE/CAE)",
                    "lessons_per_week": 26,
                    "description": "Specific dates throughout the year",
                    "prices": [
                        {"duration": "9 weeks", "price": "€3600", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€4000", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Long Term (Study and Work Visa Eligible)",
                    "lessons_per_week": 20,
                    "description": "Can only be applied for Ireland",
                    "prices": [
                        {"duration": "25 weeks + 8 weeks holidays", "price": "€6575", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "Preparation for entry to university",
                    "prices": [
                        {"duration": "12 weeks", "price": "€4620", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€8280", "currency": "EUR"},
                        {"duration": "Extra Week", "price": "€345", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Overseas Teacher Training Course",
                    "lessons_per_week": 20,
                    "description": "Includes methodology and language development.",
                    "prices": [
                        {"duration": "1 week", "price": "€550", "currency": "EUR"},
                        {"duration": "2 weeks", "price": "€1095", "currency": "EUR"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": null,
                    "description": "Face-to-face or online training",
                    "prices": [
                        {"format": "Face-to-Face", "price": "€1995", "currency": "EUR"},
                        {"format": "Online (Part-Time or Full-Time)", "price": "€1800 or €1665", "currency": "EUR"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 26,
                    "description": "Available July to August",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": null,
                    "description": "Customizable private lessons",
                    "prices": [
                        {"duration": "1 hour", "price": "€85", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "€35/week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "14 days notice required",
        "class_duration": "55 minutes",
        "max_class_size": 14
    }
}
2025-01-31 10:09:22,791 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:09:22,791 - PDFParser - INFO - Successfully processed page 2
2025-01-31 10:09:22,791 - PDFParser - INFO - Processing page 3/18
2025-01-31 10:09:22,797 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:09:22,800 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:09:22,806 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:09:22,807 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:09:40,790 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:09:40,790 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "18.33 contact hours per week, excluding breaks.",
                    "prices": []
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 26,
                    "description": "23.83 contact hours per week, excluding breaks.",
                    "prices": []
                },
                {
                    "name": "IELTS Preparation",
                    "description": "Includes preparation for IELTS and examination options.",
                    "prices": [
                        {"item": "IELTS Exam Fee", "price": "€215", "currency": "EUR"},
                        {"item": "Advanced Exam Fee", "price": "€210", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room with half board (breakfast and dinner Mon-Fri; full board Sat-Sun).",
                    "supplements": {
                        "Single Room Summer Supplement": "€35/week (June 1st - September 15th, for students over 18)",
                        "Special Diet Supplement": "€35/week",
                        "Christmas Holidays Homestay Fee": "€345 (Dec 20, 2025 - Jan 3, 2026)"
                    }
                },
                {
                    "type": "Auburn and Crestfield Residence",
                    "price_per_week": {
                        "single_room": "€300",
                        "shared_room": "€265"
                    },
                    "description": "Self-catering. Minimum 2 weeks. Includes compulsory airport transfer on arrival.",
                    "additional_details": "18+ students. Located 4-5 km from school with private bathroom. Subject to availability."
                },
                {
                    "type": "Heyday Residence",
                    "price_per_week": "€399",
                    "description": "Single room, self-catering. Year-round. Located 14 minutes walking distance from school.",
                    "additional_details": "18+ students. Minimum 2 weeks. All rooms are en-suite. Subject to availability."
                }
            ],
            "additional_fees": {
                "accommodation_placement": "€85",
                "airport_transfer": "€85 (one way, arrival only)"
            }
        }
    ],
    "terms": {
        "accommodation": "Carefully selected homestay with half board or breakfast included. No allowance for absence from the homestay.",
        "insurance": "Medi-PEL mandatory for ILEP students at €130. Includes Protection for Enrolled Learners (PEL).",
        "tuition_hours": {
            "standard": "18.33 contact hours per week.",
            "intensive": "23.83 contact hours per week."
        },
        "text_book": {
            "cost": "€28 for Digital and Textbook. Cambridge/IELTS course book: €45."
        },
        "school_holidays": "No refunds or time given in lieu for holidays listed: Jan 1, Feb 3, Mar 17, Apr 18, May 2, Jun 4, Aug 29, Oct 27, Dec 19, 2025 - Jan 5, 2026."
    }
}
2025-01-31 10:09:40,791 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:09:40,791 - PDFParser - INFO - Successfully processed page 3
2025-01-31 10:09:40,791 - PDFParser - INFO - Processing page 4/18
2025-01-31 10:09:40,818 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:09:40,821 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:09:40,826 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:09:40,827 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:10:01,925 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:10:01,926 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00, Monday to Friday & 14:00 - 16:00, Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "14:00 - 17:15, Monday to Friday (Minimum 4 weeks)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€150", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€145", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 30,
                    "description": "25 group lessons + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00 & 14:00 - 16:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Courses (CAE/FCE)",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00 & 14:00 - 16:00, Monday to Friday. Specific dates apply.",
                    "prices": [
                        {"duration": "9 weeks", "price": "€2835", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€3150", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Long Term Course",
                    "lessons_per_week": 20,
                    "description": "25 weeks + 8 weeks holidays (Study and Work Visa required).",
                    "prices": [
                        {"duration": "25 weeks", "price": "€5000", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "Preparation for academic English skills.",
                    "prices": [
                        {"duration": "12 weeks", "price": "€3480", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6360", "currency": "EUR"},
                        {"duration": "extra weeks", "price": "€265", "currency": "EUR"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00 & 14:00 - 16:00, Monday to Friday (July to August).",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "€35/week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "class_duration": "55 minutes per lesson",
        "maximum_class_size": 14
    }
}
2025-01-31 10:10:01,926 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:10:01,926 - PDFParser - INFO - Successfully processed page 4
2025-01-31 10:10:01,926 - PDFParser - INFO - Processing page 5/18
2025-01-31 10:10:01,931 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:10:01,933 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:10:01,938 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:10:01,939 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:10:23,528 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:10:23,528 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": "Accommodation arranged with a host family, includes half board during weekdays and full board on weekends.",
                    "supplements": {
                        "Extra Night": "€50",
                        "Single Room Summer Supplement": "€50/week (May 17 to September 28)",
                        "Special Diet Supplement": "€35/week (e.g., coeliac, gluten free, vegan, vegetarian)",
                        "Christmas Holidays Homestay Fee": "€345/week (Dec 20 to Jan 3, 2026)"
                    }
                },
                {
                    "type": "Residence (University College Cork)",
                    "price_per_week": "From €285",
                    "description": null,
                    "supplements": {
                        "Extra Night": "€50"
                    }
                }
            ],
            "additional_fees": {
                "accommodation_placement": "€85",
                "airport_transfer": "€60 (one way)"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged with carefully selected homestays. Students who vacate their room for five days or longer are charged €60/week retainer fee.",
        "insurance": "Medical insurance is mandatory for LLEP students at €130 per year.",
        "tuition_hours": "Standard Course: 18.33 contact hours per week. Intensive Course: 23.83 contact hours per week.",
        "examinations": "IELTS exam: €215, Cambridge First: €205, Advanced: €210 (subject to change).",
        "text_books": "Text Book + Digital E-Book: €28. IELTS Coursebook: €45.",
        "social_activities": "Students pay for excursions: Full day: €45-€65, Half day: €15-€25. Free afternoon and evening activities are organized.",
        "policy_of_care": "Strict care policy for students aged 16-17.",
        "school_holidays": "01 January, 03 February, 17 March, 18 April, 21 April, 05 May, 02 June, 04 August, 27 October, 19 December 2025 to 05 January 2026."
    }
}
2025-01-31 10:10:23,528 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:10:23,528 - PDFParser - INFO - Successfully processed page 5
2025-01-31 10:10:23,528 - PDFParser - INFO - Processing page 6/18
2025-01-31 10:10:23,552 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:10:23,555 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:10:23,561 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:10:23,561 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:10:42,909 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:10:42,909 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Unknown (Toronto Language School)",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00-12:15 Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00-14:00 Mon-Thurs; 09:00-12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$400", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$375", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00-15:15 Mon-Thurs; 09:00-12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Digital Marketing",
                    "lessons_per_week": 20,
                    "description": "09:00-12:15 Mon-Fri - General English + 10 lessons per week on Digital Marketing.",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 30,
                    "description": "09:00-12:15 Mon-Thurs; 09:00-12:15 Fridays (B2 Entry Required)",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Business",
                    "lessons_per_week": 20,
                    "description": "09:00-12:15 Mon-Fri + 5 lessons Business English focus.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "General English for 30+",
                    "lessons_per_week": 20,
                    "description": "B1-B2 level, 09:00-12:15 Mon-Fri (Adults 30+)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "$195",
                "private_lessons_general": "$85 (per 60 minutes)",
                "private_lessons_exam_preparation": "$95 (per lesson)",
                "exam_and_materials_fee": "$575",
                "IELTS_paper_based_exam": "$370",
                "IELTS_computer_based_exam": "$370",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "cancellation": "All teaching/tuition hours are 45 minutes. Maximum class size is 16."
    }
}
2025-01-31 10:10:42,910 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:10:42,910 - PDFParser - INFO - Successfully processed page 6
2025-01-31 10:10:42,910 - PDFParser - INFO - Processing page 7/18
2025-01-31 10:10:42,916 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:10:42,918 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:10:42,923 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:10:42,924 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:10:56,423 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:10:56,423 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single_full_board": {
                            "standard": "$350",
                            "summer": "$380"
                        },
                        "shared_full_board": {
                            "standard": "$310",
                            "summer": "$340"
                        },
                        "single_half_board": {
                            "standard": "$320",
                            "summer": "$350"
                        },
                        "shared_half_board": {
                            "standard": "$275",
                            "summer": "$305"
                        },
                        "executive_half_board": {
                            "standard": "$365",
                            "summer": "$395"
                        }
                    },
                    "notes": {
                        "special_diet_supplement": "$50/week (Full-Board), $45/week (Half-Board)",
                        "extra_night": "$60",
                        "underage_fee": "$25/week (ages 16-17)"
                    },
                    "placement_fee": "$275"
                },
                {
                    "type": "Residential Self-Catering",
                    "price_per_week": {
                        "casa_canada_shared_room": "$525",
                        "casa_canada_1_bedroom": "$650",
                        "28_langley_ave": "$575",
                        "tartu_student_residence_economy": "$550",
                        "tartu_student_residence_premium": "$650"
                    },
                    "price_per_month": {
                        "casa_canada_shared_room": "$1985",
                        "tartu_student_residence_economy": "$1450",
                        "tartu_student_residence_premium": "$1750"
                    },
                    "placement_fee": "$275"
                }
            ],
            "additional_fees": {
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized": "$75",
                "custodian_fee_notarized": "$200",
                "medical_insurance": "$3/day",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "No allowance for absence during the homestay period. Late arrival fee for non-Saturday/Sunday arrival: $125.",
        "medical_insurance": "Students must take out travel and medical insurance before leaving home.",
        "tuition_hours": "Standard course is 15 hours per week. Intensive is 18.75 hours per week. Super Intensive is 22.50 hours per week.",
        "social_activities": "Includes trips like Niagara Falls ($125), New York ($700), Boston ($700), Yoga ($150/month), Golf ($575/week).",
        "policy_of_care": "Strict policy of care for all 16 and 17-year-old students.",
        "school_holidays": "01 January, 17 February, 18 April, 19 May, 01 July, 04 August, 01 September, 30 September, 13 October, 11 November, 25 December, 26 December 2025."
    }
}
2025-01-31 10:10:56,423 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:10:56,423 - PDFParser - INFO - Successfully processed page 7
2025-01-31 10:10:56,423 - PDFParser - INFO - Processing page 8/18
2025-01-31 10:10:56,427 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:10:56,429 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:10:56,434 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:10:56,435 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:11:14,966 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:11:14,966 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Monday to Friday, 09:00 - 12:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$365", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "Morning classes Monday to Thursday, 09:00 - 14:00; Friday, 09:00 - 12:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Monday to Thursday, 09:00 - 15:15; Friday, 09:00 - 12:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "Monday to Thursday, 09:00 - 14:00; Friday, 09:00 - 12:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "02 July - 30 August, Monday to Thursday, 09:00 - 15:15; Friday, 09:00 - 12:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Courses",
                    "lessons_per_week": 25,
                    "description": "Monday to Friday, 09:00 - 12:15 + 5 hours One-to-One lessons per week, 13:00 - 15:30 (two afternoons for exam preparation)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Courses",
                    "lessons_per_week": 30,
                    "description": "02 July - 25 July and 28 July - 22 August, Monday to Thursday, 09:00 - 15:15; Friday, 09:00 - 12:15",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "$195",
                "private_lessons_general": "$85 per lesson",
                "private_lessons_exam_preparation": "$95 per lesson",
                "Cambridge_materials_exam_administration": "$575",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 10:11:14,966 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:11:14,967 - PDFParser - INFO - Successfully processed page 8
2025-01-31 10:11:14,967 - PDFParser - INFO - Processing page 9/18
2025-01-31 10:11:14,971 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:11:14,973 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:11:14,979 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:11:14,979 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:11:32,118 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:11:32,118 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "placement_fee": "$275",
                    "options": [
                        {
                            "type": "Full-Board",
                            "price_per_week": {
                                "single": "$375",
                                "shared": "$355",
                                "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                            }
                        },
                        {
                            "type": "Half-Board",
                            "price_per_week": {
                                "single": "$360",
                                "shared": "$335",
                                "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                            }
                        },
                        {
                            "type": "Executive Half-Board with Private Bathroom",
                            "price_per_week": {
                                "single": "$480",
                                "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                            }
                        }
                    ],
                    "add_ons": {
                        "special_diet_supplement": {
                            "full_board": "$50 p/w",
                            "half_board": "$45 p/w",
                            "notes": "Coeliac, gluten free, lactose free, vegan, halal, kosher, vegetarian"
                        },
                        "extra_night": "$60",
                        "underage_fee": "$25 p/w (Applies to 16 - 18 yrs)"
                    }
                },
                {
                    "type": "Residential",
                    "placement_fee": "$275",
                    "options": [
                        {
                            "name": "GEC Viva",
                            "age_requirements": "18+",
                            "location": "Economy Downtown",
                            "price": {
                                "weekly": "Not available",
                                "monthly": "$1600"
                            }
                        },
                        {
                            "name": "Casa Canada",
                            "price": {
                                "weekly": "$600",
                                "monthly": "$2400"
                            }
                        },
                        {
                            "name": "YWCA Student Residence",
                            "price": {
                                "weekly": "TBA",
                                "monthly": "TBA"
                            }
                        }
                    ]
                }
            ],
            "additional_fees": {
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized": "$75",
                "custodian_fee_notarized": "$200",
                "medical_insurance": "$3 per day",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a carefully selected homestay on request. No allowance will be made for absence from the homestay during the time arranged, or for late arrival/early departure. Shared accommodation is only available for 2 people travelling together; cannot be guaranteed otherwise. Check-in and check-out has to be Saturday to Saturday or Sunday to Sunday; otherwise, an extra night fee will be charged. Late arrival fee — non-Saturday / Sunday arrival fee: $125.",
        "medical_insurance": "Students are strongly advised to take out travel and medical insurance before leaving home. Insurance should cover the loss of personal possessions and loss of tuition fees if you have to cancel your course or return home early.",
        "tuition_hours": "All teaching/tuition hours are 45 minutes. Standard Course is 15 hours per week, excluding breaks. Intensive Course is 18.75 hours, excluding breaks. Super Intensive Course is 22.50 hours per week, excluding breaks.",
        "social_activities": "CES organizes a range of afternoon, evening, and overnight stay activities for students to join. Most popular trips include Whistler, Victoria, Rocky Mountains, and Seattle.",
        "policy_on_care": "CES has a strict policy on care and welfare for all students under 19 years of age studying in our adult schools. Please contact us directly or visit www.ces-schools.com for more information.",
        "school_holidays": "January 01, February 18, April 01, May 20, July 01, August 05, September 30, September 13, October 11, November 25, December 25, December 26, 2025."
    }
}
2025-01-31 10:11:32,119 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:11:32,119 - PDFParser - INFO - Successfully processed page 9
2025-01-31 10:11:32,119 - PDFParser - INFO - Processing page 10/18
2025-01-31 10:11:32,153 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:11:32,154 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:11:32,160 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:11:32,160 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:12:14,112 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:12:14,113 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:30 - 13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning plus afternoon sessions Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "Group lessons with One-to-One",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"extra_week": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "IELTS-focused lessons Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 30,
                    "description": "Preparation for FCE exams with One-to-One",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"extra_week": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course (Ireland and UK)",
                    "lessons_per_week": 20,
                    "description": "Offered in Ireland and UK locations",
                    "prices": [
                        {"duration": "24 weeks", "price": "£6000", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£8640", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "For university preparation",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4380", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8520", "currency": "GBP"},
                        {"extra_week": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English and Culture, 50+ Programme (Edinburgh Only)",
                    "lessons_per_week": 20,
                    "description": "Designed for learners aged 50+",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "Blended and face-to-face CELTA preparation",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£770", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": 30,
                    "description": "Private tutoring",
                    "prices": [
                        {"price_per_hour": "£75", "currency": "GBP"}
                    ]
                }
            ]
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "courses": [
              {
                    "name": "CELTA Training",
                    "lessons_per_week": "Varied",
                    "description": "Cambridge CELTA face-to-face or online courses",
                    "prices": [
                        {"face_to_face": "£1545", "currency": "GBP"},
                        {"online_part_time": "£1400", "currency": "GBP"},
                        {"online_full_time": "£1515", "currency": "GBP"}
                    ]
              }
          ]
      }
    ],
    "accommodations": [],
    "additional_fees": {"registration": "£75"},
    "terms": {
        "maximum_class_size": 14,
        "teaching_duration": "45 minutes per lesson"
    }
}
2025-01-31 10:12:14,113 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:12:14,113 - PDFParser - INFO - Successfully processed page 10
2025-01-31 10:12:14,113 - PDFParser - INFO - Processing page 11/18
2025-01-31 10:12:14,124 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:12:14,128 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:12:14,136 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:12:14,137 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:12:18,804 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:12:18,805 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£280",
                        "premium_single": "£335",
                        "shared": "£235",
                        "premium_shared": "£275"
                    },
                    "description": "Half-board (bed, breakfast, dinner) available. Supplemental charges may apply.",
                    "supplements": {
                        "summer": "£35/week (July and August)",
                        "special_diet": "£35 P aparelho.adjust***huge apps điều variables....75."}}]}]}
2025-01-31 10:12:18,805 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:12:18,805 - PDFParser - INFO - Successfully processed page 11
2025-01-31 10:12:18,805 - PDFParser - INFO - Processing page 12/18
2025-01-31 10:12:18,810 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:12:18,814 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:12:18,819 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:12:18,820 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:12:45,411 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:12:45,411 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30-13:00 Mon to Fri.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri, 14:00-16:30 Tues to Thurs.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "Group lessons and 5 hours One-to-One lessons per week.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri General English, 14:00-16:30 Tues to Thurs IELTS-focused lessons.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24+ weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri General English, 14:00-16:30 two afternoons One to One FCE-specific preparation.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term/Multi Destination Course (Ireland & UK)",
                    "lessons_per_week": 20,
                    "description": "Flight not included, available for 24-36 weeks.",
                    "prices": [
                        {"duration": "24 weeks", "price": "£6000", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£8640", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri, 14:00-16:30 Tues to Thurs.",
                    "prices": [
                        {"duration": "3 months", "price": "£4380", "currency": "GBP"},
                        {"duration": "6 months", "price": "£8520", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English and Culture, 50+ Programme",
                    "duration": "2 weeks",
                    "description": "09:30-13:00 Mon to Fri General English and cultural activities.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "description": "Full-time 09:00-17:00 Mon to Fri or a 24-week part-time option. Must attend teaching practice every week.",
                    "prices": [
                        {"mode": "24-week part-time", "price": "£1515", "currency": "GBP"},
                        {"mode": "Full-time", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 Mon to Fri General English, 14:00-16:30 Tues to Thurs Business English.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "description": "Tailored private lessons.",
                    "prices": [
                        {"price_per_hour": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "class_size": "Maximum of 9 students per class during July and August.",
        "lesson_duration": "All teaching/tuition hours are 45 minutes."
    }
}
2025-01-31 10:12:45,411 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:12:45,411 - PDFParser - INFO - Successfully processed page 12
2025-01-31 10:12:45,412 - PDFParser - INFO - Processing page 13/18
2025-01-31 10:12:45,416 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:12:45,419 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:12:45,424 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:12:45,425 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:13:00,739 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:13:00,739 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Host Family (Half-Board)",
                    "price_per_week": {
                        "single_standard": "£280",
                        "single_premium": "£335",
                        "shared_standard": "£235",
                        "shared_premium": "£275"
                    },
                    "description": "Half-board (bed, breakfast, and dinner).",
                    "supplements": {
                        "summer": "£35/week (July and August)",
                        "special_diet": "£35/week",
                        "Christmas_Holiday_homestay": "£350/week (20 Dec to 3 Jan 2026)"
                    }
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "£75",
                "airport_transfer": {
                    "to_Heathrow": {
                        "1_passenger": "£165",
                        "2_passengers": "£170",
                        "3_passengers": "£175"
                    },
                    "to_Gatwick": {
                        "1_passenger": "£205",
                        "2_passengers": "£210",
                        "3_passengers": "£215"
                    },
                    "to_Stansted": {
                        "1_passenger": "£215",
                        "2_passengers": "£220",
                        "3_passengers": "£225"
                    }
                },
                "digital_e-book": "£32",
                "IELTS_exam": "£220"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a carefully selected homestay on request. Half board includes bed, breakfast, and dinner. No allowance for absence or late arrival/departure. Shared room accommodation is only guaranteed for 2 people traveling together.",
        "medical_insurance": "Insurance is strongly advised to cover loss, personal possessions, and tuition fees.",
        "tuition_hours": "Standard Course: 15 contact hours/week. Intensive Course: 22 contact hours/week.",
        "examinations": "IELTS exam costs £220 (Subject to change)",
        "social_activities": "Activities cost £75–£120 for full days, £8–£90 for half days.",
        "policy_of_care": "Strict policy of care and welfare for 16-17-year-old students in adult schools.",
        "school_holidays": "01 January, 18 April, 21 April, 05 May, 26 May, 25 August, 22 December 2025 - 02 January 2026."
    }
}
2025-01-31 10:13:00,739 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:13:00,739 - PDFParser - INFO - Successfully processed page 13
2025-01-31 10:13:00,739 - PDFParser - INFO - Processing page 14/18
2025-01-31 10:13:00,760 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:13:00,765 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:13:00,770 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:13:00,771 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:13:26,423 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:13:26,424 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri (09:30-13:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£240", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£230", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£225", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes Mon-Fri (09:30-13:00; 14:00-16:30 Tue-Thu)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes Mon-Fri (09:30-13:00; 14:00-16:30 Tue-Thu)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course (Ireland and UK)",
                    "lessons_per_week": "20 or 30",
                    "description": "Includes flight between locations",
                    "prices": [
                        {"duration": "24 weeks (20 lessons)", "price": "£5520", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons)", "price": "£8100", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons)", "price": "£8040", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons)", "price": "£11880", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes Mon-Fri (09:30-13:00; 14:00-16:30 Tue-Thu)",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8040", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£335", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "Morning and afternoon classes Mon-Fri, language development and methodology",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": 30,
                    "description": "Full-time or part-time, independent work approx. 20 hrs/week",
                    "prices": [
                        {"format": "Face-to-Face", "price": "£1545", "currency": "GBP"},
                        {"format": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"},
                        {"format": "Online (part-time/full-time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes Mon-Fri (09:30-13:00; 14:00-16:30 Tue-Thu)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": "As needed",
                    "description": "Individual lessons tailored to your needs",
                    "prices": [
                        {"duration": "Per hour", "price": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 10:13:26,424 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:13:26,424 - PDFParser - INFO - Successfully processed page 14
2025-01-31 10:13:26,424 - PDFParser - INFO - Processing page 15/18
2025-01-31 10:13:26,428 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:13:26,431 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:13:26,437 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:13:26,437 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:13:37,834 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:13:37,834 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£240",
                        "shared": "£215"
                    },
                    "description": "Half-board (bed, breakfast, dinner) accommodation with homestay families.",
                    "supplements": {
                        "summer": "£35/week (July and August)",
                        "special_diet": "£35/week (Gluten free, lactose free, vegan, halal, kosher, vegetarian, food allergy)",
                        "Christmas_holidays": "£350 (20 Dec to 3 Jan 2026)"
                    },
                    "placement_fee": "£75"
                },
                {
                    "type": "Residential",
                    "price_per_week": "£225 (Single en suite room)",
                    "description": "Accommodation for 18+ years, booked for a minimum of 4 weeks.",
                    "placement_fee": "£75"
                }
            ],
            "additional_fees": {
                "airport_transfer": {
                    "Leeds_Bradford_Airport": {
                        "one_passenger": "£100",
                        "two_passengers": "£105",
                        "three_passengers": "£110"
                    },
                    "Manchester_Airport": {
                        "one_passenger": "£150",
                        "two_passengers": "£155",
                        "three_passengers": "£160"
                    },
                    "Liverpool_Airport": {
                        "one_passenger": "£185",
                        "two_passengers": "£190",
                        "three_passengers": "£195"
                    },
                    "London_airports": "Price upon request"
                },
                "IELTS_exam": "£220",
                "textbook": "£32"
            }
        }
    ],
    "terms": {
        "accommodation": "No absences allowed during scheduled accommodation. Single homestay rooms (for 16-17 years) not guaranteed during July and August. Shared rooms for max 2 people if traveling together.",
        "medical_insurance": "Students must obtain medical insurance. CES does not cover personal or tuition loss.",
        "tuition_hours": "Standard course is 15 contact hours/week. Intensive course is 22 contact hours/week.",
        "school_holidays": [
            "1 January",
            "18 April",
            "1 May",
            "26 May",
            "25 August",
            "22 December 2025 - 2 January 2026"
        ],
        "social_activities": "Excursions range from £5-£60. CES organizes free and paid activities.",
        "policy_of_care": "Strict policy for 16-17-year-old students. Additional info available."
    }
}
2025-01-31 10:13:37,835 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:13:37,835 - PDFParser - INFO - Successfully processed page 15
2025-01-31 10:13:37,835 - PDFParser - INFO - Processing page 16/18
2025-01-31 10:13:37,839 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:13:37,843 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:13:37,849 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:13:37,849 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:14:00,186 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:14:00,186 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "N/A",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes from Monday to Friday, 09:30 - 13:00.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£245", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£235", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£225", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£220", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£210", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes from Monday to Thursday.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "Group lessons in the morning and individual lessons in the afternoon.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "Morning General English and IELTS preparation in the afternoon.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "Group lessons in the morning and individual lessons for exam preparation in the afternoon.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course",
                    "lessons_per_week": "20 or 30",
                    "description": "Courses in Ireland and the UK, flight costs not included.",
                    "prices": [
                        {"duration": "24 weeks (20 lessons/week)", "price": "£5280", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons/week)", "price": "£7560", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons/week)", "price": "£7560", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons/week)", "price": "£10,980", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "Pathway program preparing students for university entry.",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "Training program with practical sessions.",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£770", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": "N/A",
                    "description": "Online and part-time/full-time CELTA program.",
                    "prices": [
                        {"duration": "24-week part-time", "price": "£1515", "currency": "GBP"},
                        {"duration": "Full/part-time", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "Morning General English and Business English in the afternoon.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": "N/A",
                    "description": "Individual lessons tailored to student needs.",
                    "prices": [
                        {"price": "£75/hour", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "N/A"
    }
}
2025-01-31 10:14:00,187 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:14:00,187 - PDFParser - INFO - Successfully processed page 16
2025-01-31 10:14:00,187 - PDFParser - INFO - Processing page 17/18
2025-01-31 10:14:00,191 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:14:00,194 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:14:00,199 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:14:00,200 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:14:14,032 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:14:14,032 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "Not specified",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "description": "Half-board (bed, breakfast, and dinner) accommodation in a carefully selected homestay.",
                    "pricing": [
                        {
                            "type": "Single Room",
                            "price_per_week": "£240",
                            "notes": "Summer Supplement: £35 p/w (July and August)"
                        },
                        {
                            "type": "Shared Room",
                            "price_per_week": "£215",
                            "notes": "Summer Supplement: £35 p/w (July and August)"
                        }
                    ],
                    "add_ons": [
                        {
                            "description": "Special Diet Supplement",
                            "price_per_week": "£35",
                            "notes": "Gluten free, lactose free, vegan, halal, kosher, vegetarian, food allergy (contact school for more info)"
                        },
                        {
                            "description": "Christmas Holidays Homestay Accommodation",
                            "price": "£350",
                            "dates": "20 Dec to 3 Jan 2026"
                        }
                    ],
                    "placement_fee": "£75"
                }
            ],
            "additional_fees": {
                "airport_transfer": {
                    "from_heathrow": {
                        "one_passenger": "£170",
                        "two_passengers": "£175",
                        "three_passengers": "£180"
                    },
                    "from_gatwick": {
                        "one_passenger": "£140",
                        "two_passengers": "£145",
                        "three_passengers": "£150"
                    },
                    "from_stansted": {
                        "one_passenger": "£250",
                        "two_passengers": "£255",
                        "three_passengers": "£260"
                    }
                },
                "IELTS_exam_cost": "£220",
                "textbook_cost": "£32"
            }
        }
    ],
    "terms": {
        "accommodation": "No allowance for absence during the stay. Single rooms for 16-17-year-old students not guaranteed in July and August. Shared room accommodation is only for pairs traveling together.",
        "medical_insurance": "Students should purchase travel and medical insurance before arriving.",
        "tuition_hours": "Standard Course = 15 contact hours per week. Intensive Course = 22 contact hours per week.",
        "social_activities": "Students pay only for excursions/activities they participate in. Full day = £40-85, Half day = £20-45. Free activities also organized.",
        "school_holidays": "01 January, 18 April, 21 April, 05 May, 26 May, 25 August, 22 December 2025 - 02 January 2026. No refunds for public holidays."
    }
}
2025-01-31 10:14:14,032 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:14:14,032 - PDFParser - INFO - Successfully processed page 17
2025-01-31 10:14:14,033 - PDFParser - INFO - Processing page 18/18
2025-01-31 10:14:14,043 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:14:14,047 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:14:14,052 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:14:14,053 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:14:24,590 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:14:24,590 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "72 Dame Street, Dublin 2, Ireland",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Provided for a minimum of 2 weeks; full refund given if cancellation is made with more than 2 weeks' notice.",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": "€250",
                "cancellation_fee": "€250"
            }
        },
        {
            "city": "West Sussex",
            "country": "United Kingdom",
            "address": "27 South Street, Worthing West Sussex, BN11 3AR",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Provided for a minimum of 2 weeks; full refund given if cancellation is made with more than 2 weeks' notice.",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": "£250",
                "cancellation_fee": "£250"
            }
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "180 Bloor Street West, Toronto, Ontario Canada M4W 1A3",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Provided for a minimum of 2 weeks; full refund given if cancellation is made with more than 2 weeks' notice.",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": "$350 CAD",
                "cancellation_fee": "$350 CAD"
            }
        }
    ],
    "terms": {
        "cancellation": "Cancellation fees of €250 Ireland / £250 UK / $350 CAD apply if cancellation occurs 14 days or less before program start date.",
        "tuition_refund": "No refund for students who fail to complete the program. Cancellation of tuition up to 14 days prior to arrival will be charged the cancellation fee."
    }
}
2025-01-31 10:14:24,590 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:14:24,590 - PDFParser - INFO - Successfully processed page 18
2025-01-31 10:14:24,592 - PDFParser - INFO - PDF processing completed
2025-01-31 10:14:24,592 - PDFParser - INFO - Merging results from all pages
2025-01-31 10:14:24,592 - PDFParser - ERROR - Error in merge_results: 'NoneType' object is not iterable
2025-01-31 10:14:24,592 - PDFParser - ERROR - Error in process_pdf: 'NoneType' object is not iterable
2025-01-31 10:14:24,592 - PDFParser - ERROR - Main process failed: 'NoneType' object is not iterable
2025-01-31 10:16:18,297 - PDFParser - INFO - Starting PDF processing
2025-01-31 10:16:18,301 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 10:16:18,301 - PDFParser - INFO - Initializing PDFParser
2025-01-31 10:16:18,342 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 10:16:18,343 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 10:16:18,343 - PDFParser - INFO - Processing page 1/18
2025-01-31 10:16:18,385 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:16:18,389 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:16:18,400 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:16:18,400 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:16:27,217 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:16:27,217 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Leeds",
            "country": "UK",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": null
}
2025-01-31 10:16:27,217 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:16:27,217 - PDFParser - INFO - Successfully processed page 1
2025-01-31 10:16:27,218 - PDFParser - INFO - Processing page 2/18
2025-01-31 10:16:27,285 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:16:27,287 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:16:27,293 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:16:27,294 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:16:59,553 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:16:59,553 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes, Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Afternoon classes Mon-Fri",
                    "prices": [
                        {"duration": "4-11 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-11 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes, Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Course",
                    "lessons_per_week": 26,
                    "description": "Focused preparation for Cambridge exams",
                    "prices": [
                        {"duration": "9 weeks", "price": "€3600", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€4000", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Long-Term Course",
                    "lessons_per_week": 20,
                    "description": "25 weeks + 8 weeks holidays; flight not included",
                    "prices": [
                        {"duration": "25+8 weeks", "price": "€6575", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "Preparing students for university courses",
                    "prices": [
                        {"duration": "12 weeks", "price": "€4620", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€8280", "currency": "EUR"},
                        {"duration": "Extra week", "price": "€345", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Overseas Teacher Training Course",
                    "lessons_per_week": 20,
                    "description": "Training for teachers of English",
                    "prices": [
                        {"duration": "1 week", "price": "€550", "currency": "EUR"},
                        {"duration": "2 weeks", "price": "€1095", "currency": "EUR"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "description": "Face-to-face and online CELTA training",
                    "prices": [
                        {"type": "Face-to-Face", "price": "€1995", "currency": "EUR"},
                        {"type": "Online (24-week part-time)", "price": "€1800", "currency": "EUR"},
                        {"type": "Online (Part-Time or Full-Time)", "price": "€1665", "currency": "EUR"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 26,
                    "description": "English classes with a focus on business English, July to August",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "description": "For personalized learning (minimum 2 hours/session)",
                    "prices": [
                        {"unit": "hour", "price": "€85", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board; €315/week (Full Board); supplements for summer: €35/week"
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "14 days notice required for refund policies."
    }
}
2025-01-31 10:16:59,554 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:16:59,554 - PDFParser - INFO - Successfully processed page 2
2025-01-31 10:16:59,554 - PDFParser - INFO - Processing page 3/18
2025-01-31 10:16:59,560 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:16:59,565 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:16:59,573 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:16:59,574 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:17:13,148 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:17:13,148 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single rooms are not available to students aged 16–18 years (inclusive).",
                    "supplements": {
                        "Summer": "€35/week",
                        "Special Diet": "€35/week",
                        "Christmas Holidays": "€345 (20 Dec 2025 to 3 Jan 2026)"
                    }
                },
                {
                    "type": "Residential - Auburn and Crestfield",
                    "price_per_week": {
                        "Single room": "€300",
                        "Shared room": "€265"
                    },
                    "description": "Self-catering, 18+ years, minimum 2 weeks. Compulsory airport transfer on arrival. Located 4–5 km from the school. Single and shared rooms available with private bathrooms."
                },
                {
                    "type": "Residential - Heyday",
                    "price_per_week": "€399",
                    "description": "Self-catering, 18+ years, minimum 2 weeks. 14 minutes’ walk from the school. All rooms are single en-suite."
                }
            ],
            "additional_fees": {
                "accommodation_placement": "€85",
                "airport_transfer": "€85 (one way)"
            }
        }
    ],
    "terms": {
        "accommodation": "Half-board included (breakfast and dinner Monday to Friday, full board on weekends). Students must arrange for arrival times with their host family.",
        "insurance": "Medi-PEL mandatory for ILEP students at €130 per annum. EU citizens must bring an EHIC card and meet additional requirements.",
        "tuition_hours": "Standard course: 18.33 contact hours/week. Intensive course: 23.83 contact hours/week. Class duration: 55 minutes.",
        "examinations": "CES Dublin is an official IELTS, TOEIC, and Cambridge Test Center. Exam fees are IELTS: €215, Cambridge First: €205, Advanced: €210.",
        "text_book": {
            "general": "Text Book + Digital E-Book: €28",
            "IELTS_or_Cambridge": "€45"
        },
        "social_activities": "Excursions: €15–€65 per activity. Free afternoon and evening activities provided.",
        "policy_of_care": "Strict policy of care for 16- and 17-year-old students in adult schools.",
        "school_holidays": "01 Jan, 03 Feb, 17 Mar, 18 Apr, 21 Apr, 05 May, 02 Jun, 04 Aug, 27 Oct, 19 Dec 2025–05 Jan 2026 (No refund for unused holidays)."
    }
}
2025-01-31 10:17:13,148 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:17:13,149 - PDFParser - INFO - Successfully processed page 3
2025-01-31 10:17:13,149 - PDFParser - INFO - Processing page 4/18
2025-01-31 10:17:13,175 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:17:13,179 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:17:13,184 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:17:13,185 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:17:34,270 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:17:34,270 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes Mon-Fri, 09:00-13:00 and 14:00-16:00 Tues-Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Minimum 4 weeks, 14:00-17:15 Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€150", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€145", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 30,
                    "description": "5 hours One-to-One lessons/week, group lessons Mon-Fri, 09:00-13:00 and two afternoons 14:00-16:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes Mon-Fri, 09:00-13:00 and 14:00-16:00 Tues-Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Course (CAE/FCE)",
                    "lessons_per_week": 26,
                    "description": "Specific dates for each class session throughout the year",
                    "prices": [
                        {"duration": "9 weeks", "price": "€2835", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€3150", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes Mon-Fri, 09:00-13:00 and 14:00-16:00 Tues-Thurs",
                    "prices": [
                        {"duration": "12 weeks", "price": "€3480", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6630", "currency": "EUR"},
                        {"duration": "additional weeks", "price": "€265", "currency": "EUR"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 26,
                    "description": "Business English focus, available July-August",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Teacher Training Courses (CLIL)",
                    "lessons_per_week": 20,
                    "description": "On demand; specialized teacher training including CLIL, Methodology, and Education Management tracks",
                    "prices": [
                        {"duration": "1 week", "price": "€450", "currency": "EUR"},
                        {"duration": "2 weeks", "price": "€900", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "14 days notice required"
    }
}
2025-01-31 10:17:34,270 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:17:34,270 - PDFParser - INFO - Successfully processed page 4
2025-01-31 10:17:34,271 - PDFParser - INFO - Processing page 5/18
2025-01-31 10:17:34,278 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:17:34,280 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:17:34,286 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:17:34,287 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:17:45,711 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:17:45,711 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": "Half board, additional night €50"
                },
                {
                    "type": "Homestay Accommodation Summer Supplement",
                    "price_per_week": "€50",
                    "description": "Applied during period: May 17 to September 28"
                },
                {
                    "type": "Special Diet Supplement",
                    "price_per_week": "€35",
                    "description": "Coeliac, gluten free, lactose free, vegan and vegetarian"
                },
                {
                    "type": "Christmas Holidays Homestay Accommodation Fee",
                    "price_per_week": "€345",
                    "description": "From December 20 to January 3, 2026"
                },
                {
                    "type": "University College Cork Residence",
                    "price_from": "€285",
                    "description": "Additional night €50"
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "€85",
                "airport_transfer_one_way": "€60"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is half board (breakfast and dinner) from Monday to Friday and full board (breakfast, lunch and dinner) on Saturday and Sunday. Homestays are located in the suburbs of Cork. No allowance for absence from the homestay during the time arranged, or for late arrival. Retainer fee of €60 per week for absences of five days or longer.",
        "insurance": "Medi-PEL mandatory for ILEP students, costing €130 per annum, including PEL. EU citizens must bring an EHIC card. Insurance is effective after submitting required forms.",
        "tuition_hours": "General course: 18.33 contact hours/week. Intensive course: 23.83 contact hours/week. Students are placed in Standard General English unless they meet the required level for intensive programs.",
        "examinations": {
            "IELTS_exam_cost": "€215",
            "Cambridge_First_exam_cost": "€205",
            "Advanced_exam_cost": "€210"
        },
        "textbook": "Textbook costs €28. IELTS coursebook costs €45.",
        "social_activities": "Excursions are optional, with costs of approximately €45-€65 for a full day and €15-€25 for a half day. Free afternoon and evening activities are offered.",
        "policy_of_care": "Strict welfare policy for 16 and 17 year old students. Contact school or visit the website for details.",
        "school_holidays": "January 1, February 3, March 17, April 18, April 21, May 2, June 4, August 27, October 27, December 19, December 25, January 5 (No refunds for public holidays)."
    }
}
2025-01-31 10:17:45,711 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:17:45,712 - PDFParser - INFO - Successfully processed page 5
2025-01-31 10:17:45,712 - PDFParser - INFO - Processing page 6/18
2025-01-31 10:17:45,736 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:17:45,739 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:17:45,745 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:17:45,746 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:18:11,684 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:18:11,685 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Language School Toronto",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Monday to Thursday, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$400", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$375", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Monday to Thursday, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Digital Marketing",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Monday to Friday (General English), 13:00 - 15:15 Monday to Thursday (Digital Marketing)",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 30,
                    "description": "09:00 - 12:15 Monday to Friday",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Business",
                    "lessons_per_week": 25,
                    "description": "09:00 - 12:15 Monday to Friday (General English), 13:00 - 14:00 Monday to Thursday (Business English)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "General English for 30+",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Monday to Friday (Available May to October)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation",
                    "lessons_per_week": 25,
                    "description": "09:00 - 12:15 Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Monday to Thursday, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 12:15 Monday to Friday, additional afternoon one-to-one preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast-Track Preparation",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Monday to Thursday, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration_fee": "$195",
                "private_lessons": {
                    "general": "$85",
                    "exam_preparation": "$95"
                },
                "cambridge_materials": "$575",
                "ielts_paper_based_exam": "$370",
                "ielts_computer_exam": "$370",
                "material_fee": "$20"
            }
        }
    ],
    "terms": {
        "teaching_hours": "All teaching/tuition hours are 45 minutes",
        "maximum_class_size": "Maximum class size is 16"
    }
}
2025-01-31 10:18:11,685 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:18:11,685 - PDFParser - INFO - Successfully processed page 6
2025-01-31 10:18:11,685 - PDFParser - INFO - Processing page 7/18
2025-01-31 10:18:11,692 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:18:11,694 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:18:11,700 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:18:11,701 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:18:51,348 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:18:51,348 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "type": "Single Full-Board",
                            "price_per_week": "$350",
                            "summer_supplement": "$30",
                            "notes": "June 1 - August 31"
                        },
                        {
                            "type": "Shared Full-Board",
                            "price_per_week": "$310",
                            "summer_supplement": "$30",
                            "notes": "June 1 - August 31"
                        },
                        {
                            "type": "Single Half-Board",
                            "price_per_week": "$320",
                            "summer_supplement": "$30",
                            "notes": "June 1 - August 31"
                        },
                        {
                            "type": "Shared Half-Board",
                            "price_per_week": "$275",
                            "summer_supplement": "$30",
                            "notes": "June 1 - August 31"
                        },
                        {
                            "type": "Executive Half-Board with Private Bathroom",
                            "price_per_week": "$365",
                            "summer_supplement": "$30",
                            "notes": "June 1 - August 31"
                        }
                    ],
                    "add_ons": [
                        {
                            "name": "Special Diet Supplement",
                            "price": "$50/wk (Full-Board), $45/wk (Half-Board)",
                            "notes": "Coeliac, gluten free, lactose free, vegan, halal, kosher, vegetarian"
                        },
                        {
                            "name": "Extra Night",
                            "price": "$60"
                        },
                        {
                            "name": "Underage Fee (16-17 years)",
                            "price": "$25/wk"
                        }
                    ],
                    "placement_fee": "$275"
                },
                {
                    "type": "Residential Self Catering",
                    "options": [
                        {
                            "name": "Casa Canada (18+)",
                            "weekly_price": "$525 (Shared Room), $650 (1 Bedroom)",
                            "monthly_price": "$1985"
                        },
                        {
                            "name": "28 Langley Ave.",
                            "weekly_price": "$575"
                        },
                        {
                            "name": "Tartu Student Residence (17+)",
                            "availability": "May - August",
                            "weekly_price": "$550 (Economy Suite), $650 (Premium AC Unit)",
                            "monthly_price": "$1450-$1750"
                        }
                    ],
                    "placement_fee": "$275"
                }
            ],
            "additional_fees": {
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized": "$75",
                "custodian_fee_notarized": "$200",
                "medical_insurance": "$3/day",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "cancellation": "",
        "accommodation": "Accommodation is arranged in a carefully selected homestay on request. No allowance will be made for absences. Non Saturday/Sunday arrival fee: $125.",
        "medical_insurance": "Students are encouraged to obtain travel and medical insurance.",
        "tuition_hours": "Standard: 15 hours/week; Intensive: 18.75 hours/week; Super Intensive: 22.5 hours/week.",
        "social_activities": "Trips include Niagara Falls ($125), New York ($700), and more.",
        "school_holidays": [
            "January 1, February 18, April 19, May 01, July 04, August 05, September 01, September 30, October 13, November 11, December 25-26, 2025"
        ]
    }
}
2025-01-31 10:18:51,348 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:18:51,348 - PDFParser - INFO - Successfully processed page 7
2025-01-31 10:18:51,348 - PDFParser - INFO - Processing page 8/18
2025-01-31 10:18:51,356 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:18:51,359 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:18:51,367 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:18:51,367 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:19:06,976 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:19:06,977 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$365", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course (FCE/CAE)",
                    "lessons_per_week": 30,
                    "description": "09:00 - 12:15 Mon to Fri + 5 hours One-to-One lessons per week, 13:00 - 15:30 two afternoons of Cambridge Preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays (Start Dates: 02 Jul - 25 Jul & 28 Jul - 22 Aug)",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "$195",
                "private_lesson_general": "$85 per lesson",
                "private_lesson_exam": "$95 per lesson",
                "cambridge_materials": "$575",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 10:19:06,977 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:19:06,977 - PDFParser - INFO - Successfully processed page 8
2025-01-31 10:19:06,977 - PDFParser - INFO - Processing page 9/18
2025-01-31 10:19:06,982 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:19:06,985 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:19:06,991 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:19:06,991 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:19:22,863 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:19:22,864 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "Single Full-Board Accommodation": "$375",
                        "Shared Full-Board Accommodation": "$355",
                        "Single Half-Board Accommodation": "$360",
                        "Shared Half-Board Accommodation": "$335",
                        "Executive Half-Board with Private Bathroom (Single)": "$480"
                    },
                    "supplements": {
                        "High Season Fee (June 1 - August 31)": "$30/week",
                        "Special Diet": {
                            "Full-Board": "$50/week",
                            "Half-Board": "$45/week",
                            "Notes": "Coeliac, gluten free, lactose free, vegan, halal, kosher, vegetarian"
                        },
                        "Extra Night": "$60",
                        "Underage Fee (Age 16-18)": "$25/week"
                    }
                },
                {
                    "type": "Residential",
                    "price_per_week": {
                        "GEC Viva (Economy Downtown, Shared Room)": null,
                        "GEC Viva (Economy Downtown, Monthly)": "$1600/month",
                        "Casa Canada": "$600/week",
                        "Casa Canada (Monthly)": "$2400/month",
                        "YWCA Student Residence": "TBA"
                    },
                    "additional_fees": {
                        "Accommodation Placement Fee": "$275",
                        "Airport Transfer (Arrival)": "$150",
                        "Airport Transfer (Return)": "$300",
                        "Custodian Fee (Non-Notarized, Under 18 years)": "$75",
                        "Custodian Fee (Notarized, Under 18 years)": "$200",
                        "Medical Insurance": "$3/day",
                        "Homestay Move Fee": "$150"
                    }
                }
            ],
            "terms": {
                "accommodation": "Accommodation is arranged in a carefully selected homestay on request. No allowance will be made for absence from the homestay during the time arranged, or for late arrival/early departure. Shared accommodation is only available for 2 people traveling together and cannot be guaranteed otherwise. Check-in and check-out has to be Saturday to Saturday or Sunday to Sunday, otherwise an extra night fee will be charged (Late arrival fee for non-Saturday/Sunday arrival: $125).",
                "medical_insurance": "You are strongly advised to take out travel and medical insurance before leaving home. Insurance should cover the loss of personal possessions and loss of tuition fees if you have to cancel your course or return home early.",
                "tuition_hours": "All teaching/tuition hours are 45 minutes. Standard Course is 15 hours per week, excluding breaks. Intensive Course is 18.75 hours, excluding breaks. Super Intensive Course is 22.50 hours per week, excluding breaks.",
                "social_activities": "CES organizes a range of afternoon, evening, and overnight stay activities for students to join. Most popular trips include Whistler, Victoria, Rocky Mountains, and Seattle.",
                "policy_care_of_underage_students": "CES has a strict policy and welfare for all students under 19 years of age studying in adult schools. Contact directly or visit www.ces-schools.com for more information.",
                "school_holidays": "01 January, 17 February, 18 April, 19 May, 01 July, 04 August, 01 September, 30 September, 13 October, 11 November, 25 December, 26 December 2025."
            }
        }
    ]
}
2025-01-31 10:19:22,864 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:19:22,864 - PDFParser - INFO - Successfully processed page 9
2025-01-31 10:19:22,864 - PDFParser - INFO - Processing page 10/18
2025-01-31 10:19:22,899 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:19:22,903 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:19:22,909 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:19:22,909 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:19:46,354 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:19:46,354 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "UK",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes, Mon-Fri, 09:30-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275 p/w", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265 p/w", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255 p/w", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250 p/w", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240 p/w", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning & afternoon classes: Mon-Fri 09:30-13:00, Tue-Thu 14:00-16:30",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390 p/w", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370 p/w", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365 p/w", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355 p/w", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345 p/w", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "Group lessons + One-to-One lessons: Mon-Fri 09:30-13:00 (Group), Tue-Thu 14:00-16:30 (One-to-One)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615 p/w", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605 p/w", "currency": "GBP"},
                        {"duration": "additional week", "price": "£595 p/w", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "General English + IELTS, Mon-Fri 09:30-13:00, Tue-Thu 14:00-16:30",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390 p/w", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370 p/w", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365 p/w", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355 p/w", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345 p/w", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Not provided",
                    "price_per_week": "Not provided",
                    "description": "Not provided"
                }
            ],
            "additional_fees": {
                "registration": "£75"
            }
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": "Not specified",
            "courses": [
                {
                    "name": "English and Culture, 50+ Programme (Edinburgh Only)",
                    "lessons_per_week": 20,
                    "description": "Cultural visits & afternoon activities",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course (Edinburgh Only)",
                    "description": "Cambridge English accredited CELTA training",
                    "prices": [
                        {"mode": "Face-to-Face", "price": "£1545", "currency": "GBP"},
                        {"mode": "Online (Part Time/Full Time)", "price": "£1400", "currency": "GBP"},
                        {"mode": "Online (24-week Part Time)", "price": "£1515", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Not provided",
                    "price_per_week": "Not provided",
                    "description": "Not provided"
                }
            ],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified",
        "additional_notes": "Maximum class size is 14 students.  All teaching/tuition hours are 45 minutes."
    }
}
2025-01-31 10:19:46,354 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:19:46,354 - PDFParser - INFO - Successfully processed page 10
2025-01-31 10:19:46,354 - PDFParser - INFO - Processing page 11/18
2025-01-31 10:19:46,361 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:19:46,363 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:19:46,369 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:19:46,369 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:19:54,385 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:19:54,385 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£__@__",
                    "description": ["Partialb_half"]



                }
            ]
        }
    ]
} 
2025-01-31 10:19:54,385 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:19:54,385 - PDFParser - INFO - Successfully processed page 11
2025-01-31 10:19:54,386 - PDFParser - INFO - Processing page 12/18
2025-01-31 10:19:54,390 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:19:54,392 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:19:54,398 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:19:54,398 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:20:17,141 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:20:17,142 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri, 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group lessons + 5 One-to-One lessons",
                    "description": "09:30 - 13:00 Mon to Fri - Group Lessons, 14:00 - 16:30 Two afternoons One-to-One",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"}
                    ],
                    "additional_info": "Extra week: £595"
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri - General English, 14:00 - 16:30 Tues to Thurs - IELTS",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course",
                    "lessons_per_week": "20 group lessons + 5 One-to-One lessons",
                    "description": "09:30 - 13:00 Mon to Fri General English, 14:00 - 16:30 Two afternoons One-to-One FCE Preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"}
                    ],
                    "additional_info": "Extra week: £595"
                },
                {
                    "name": "Long Term / Multi Destination Course (Ireland and UK)",
                    "lessons_per_week": "20 or 30 lessons",
                    "description": "Flight not included",
                    "prices": [
                        {"duration": "24 weeks (20 lessons)", "price": "£6000", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons)", "price": "£8520", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons)", "price": "£8640", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons)", "price": "£12420", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri, 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "3 months", "price": "£4380", "currency": "GBP"},
                        {"duration": "6 months", "price": "£8520", "currency": "GBP"},
                        {"duration": "Extra per week", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English and Culture, 50+ Programme",
                    "lessons_per_week": 20,
                    "description": "09 June - 20 June or 10 Nov - 21 Nov. Includes afternoon cultural visits and one full-day tour.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "details": "Full time (09:00 - 17:00 Mon to Fri) or Online Part Time (24 weeks). Must attend teaching practice weekly.",
                    "prices": [
                        {"type": "Online - 24 Week Part-Time", "price": "£1515", "currency": "GBP"},
                        {"type": "Online - Full/Part-Time", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri - General English, 14:00 - 16:30 Tues to Thurs - Business English",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "prices": [
                        {"duration": "Per hour", "price": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "max_class_size": "9 (during July and August maximum size will be 12)",
        "lesson_length": "45 minutes"
    }
}
2025-01-31 10:20:17,142 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:20:17,142 - PDFParser - INFO - Successfully processed page 12
2025-01-31 10:20:17,142 - PDFParser - INFO - Processing page 13/18
2025-01-31 10:20:17,146 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:20:17,148 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:20:17,154 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:20:17,154 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:20:29,264 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:20:29,264 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": "N/A",
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 15,
                    "description": "Standard Course includes 15 contact hours per week, excluding breaks. Intensive Course includes 22 contact hours per week, excluding breaks.",
                    "prices": []
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£280",
                        "premium": "£335",
                        "shared": "£235",
                        "shared_premium": "£275"
                    },
                    "description": "Half board (bed, breakfast, and dinner).",
                    "supplements": {
                        "summer": "£35/week (July and August)",
                        "special_diet": "£35/week",
                        "christmas_holidays": "£350 for 20 Dec to 3 Jan 2026"
                    }
                }
            ],
            "additional_fees": {
                "accommodation_placement": "£75",
                "digital_e-book": "£32",
                "IELTS_exam": "£220"
            }
        }
    ],
    "terms": {
        "cancellation": "No refund or time given in lieu for public holidays.",
        "accommodation": "No allowance will be made for absence from the homestay during the time arranged or for late arrival/early departure. Shared room accommodation is only guaranteed for 2 people if traveling together.",
        "insurance": "Strongly advised to take out medical and travel insurance before leaving home.",
        "social_activities": "Costs for excursions approximate as £75-£120 (full day) and £8-£90 (half day).",
        "school_holidays": "1 January, 18 April, 21 April, 05 May, 26 May, 25 August, 22 December 2025 - 2 January 2026."
    }
}
2025-01-31 10:20:29,264 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:20:29,264 - PDFParser - INFO - Successfully processed page 13
2025-01-31 10:20:29,264 - PDFParser - INFO - Processing page 14/18
2025-01-31 10:20:29,287 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:20:29,290 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:20:29,296 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:20:29,296 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:20:57,359 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:20:57,359 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies (CES)",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£240", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£230", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£225", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri | 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons per week + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri (General English) | 14:00 - 16:30 Tues to Thurs (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 25,
                    "description": "20 group lessons per week + 5 one-to-one lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi-Destination Course",
                    "lessons_per_week": 20,
                    "description": "General English in Ireland and UK",
                    "prices": [
                        {"duration": "24 weeks", "price": "£5520", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£8100", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri | 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8040", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£335", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Course",
                    "lessons_per_week": 20,
                    "description": "Language Development and Methodology, CLIL - Blended",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": null,
                    "description": "Full-time face-to-face or online (24-week part-time or full-time)",
                    "prices": [
                        {"option": "Face-to-face", "price": "£1545", "currency": "GBP"},
                        {"option": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"},
                        {"option": "Online (full-time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri (General English) | 14:00 - 16:30 Tues to Thurs (Business English)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": null,
                    "description": "Personalized one-to-one lessons",
                    "prices": [
                        {"price_per_hour": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "All teaching/tuition hours are 45 minutes. Maximum class size is 14."
    }
}
2025-01-31 10:20:57,359 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:20:57,359 - PDFParser - INFO - Successfully processed page 14
2025-01-31 10:20:57,359 - PDFParser - INFO - Processing page 15/18
2025-01-31 10:20:57,364 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:20:57,367 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:20:57,372 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:20:57,373 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:21:12,056 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:21:12,056 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": { 
                        "single": "£240", 
                        "shared": "£215"
                    },
                    "description": "Half board (breakfast and dinner) accommodation in Leeds.",
                    "supplements": {
                        "summer": "£35/week (July and August)",
                        "special_diet": "£35/week",
                        "Christmas holidays homestay accommodation fee": "£350 (20 Dec to 3 Jan 2026)"
                    },
                    "placement_fee": "£75"
                },
                {
                    "type": "Residence",
                    "price_per_week": "£225",
                    "description": "Single en suite room available for individuals aged 18+, with a minimum stay of 4 weeks.",
                    "placement_fee": "£75"
                }
            ],
            "additional_fees": {
                "airport_transfer": {
                    "from_Leeds_Bradford_Airport": {
                        "one_passenger": "£100",
                        "two_passengers": "£105",
                        "three_passengers": "£110"
                    },
                    "from_Manchester_Airport": {
                        "one_passenger": "£150",
                        "two_passengers": "£155",
                        "three_passengers": "£160"
                    },
                    "from_Liverpool_Airport": {
                        "one_passenger": "£185",
                        "two_passengers": "£190",
                        "three_passengers": "£195"
                    },
                    "London_airports_upon_request": null
                },
                "text_book_fee": "£32",
                "IELTS_exam_fee": "£220"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged with carefully selected homestays or residences. Shared rooms guaranteed only if traveling together, and single rooms for 16-17 year olds not guaranteed during July and August.",
        "medical_insurance": "Students are strongly advised to get travel and medical insurance before leaving home.",
        "tuition_hours": "Standard Course: 15 contact hours per week, Intensive Course: 22 contact hours per week.",
        "social_activities": "Excursions and activities are charged separately: full day £60-£75, half day £5-£20.",
        "policy_of_care": "Strict policy of care for students aged 16 and 17 in their adult schools.",
        "school_holidays": "01 January, 18 April, 01 May, 26 May, 25 August, 22 December 2025 - 02 January 2026."
    }
}
2025-01-31 10:21:12,056 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:21:12,056 - PDFParser - INFO - Successfully processed page 15
2025-01-31 10:21:12,056 - PDFParser - INFO - Processing page 16/18
2025-01-31 10:21:12,061 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:21:12,065 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:21:12,071 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:21:12,071 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:21:33,574 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:21:33,574 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30-13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£245", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£235", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£225", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£220", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£210", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 (Mon-Fri) + 14:00-16:30 (Tue-Thu)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group + 5 One-to-One",
                    "description": "09:30-13:00 (Mon-Fri group) + 14:00-16:30 (2 afternoons)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 (Mon-Fri) General English + 14:00-16:30 (Tue-Thu) IELTS",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation (FCE)",
                    "lessons_per_week": "20 group + 5 One-to-One",
                    "description": "09:30-13:00 (Mon-Fri) General English + 14:00-16:30 (2 afternoons) FCE",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term/Multi Destination Course",
                    "lessons_per_week": "20 or 30",
                    "description": "Study across Ireland and UK locations",
                    "prices": [
                        {"duration": "24 weeks (20 lessons)", "price": "£5280", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons)", "price": "£7560", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons)", "price": "£7560", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons)", "price": "£10980", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 (Mon-Fri) General English + 14:00-16:30 (Tue-Thu)",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00 (Mon-Fri) General English + 14:00-16:30 (Tue-Thu) Business English",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "Includes Language Development and Methodology, CLL, Blended courses for teaching professionals.",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£770", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "description": "Full time or Part time (approx. 20 hrs of independent work)",
                    "prices": [
                        {"type": "Online Part-Time", "price": "£1515", "currency": "GBP"},
                        {"type": "Online (Full or Part-Time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "description": "Private lessons",
                    "prices": [
                        {"type": "Per hour", "price": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "All teaching/tuition hours are 45 minutes. Maximum class size is 14."
    }
}
2025-01-31 10:21:33,574 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:21:33,574 - PDFParser - INFO - Successfully processed page 16
2025-01-31 10:21:33,574 - PDFParser - INFO - Processing page 17/18
2025-01-31 10:21:33,578 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:21:33,580 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:21:33,586 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:21:33,587 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:21:46,093 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:21:46,093 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "England",
            "address": null,
            "courses": [
                {
                    "name": "Standard Course",
                    "description": "15 contact hours per week, excluding breaks",
                    "extra_notes": "Teaching/tuition hours are 45 minutes each"
                },
                {
                    "name": "Intensive Course",
                    "description": "22 contact hours per week, excluding breaks",
                    "extra_notes": "Teaching/tuition hours are 45 minutes each"
                }
            ],
            "accommodations": [
                {
                    "type": "Host Family (Half-Board)",
                    "options": [
                        {
                            "room_type": "Single",
                            "price_per_week": "£240",
                            "summer_supplement": "£35 p/w (July and August)"
                        },
                        {
                            "room_type": "Shared",
                            "price_per_week": "£215",
                            "summer_supplement": "£35 p/w (July and August)",
                            "notes": "Shared room accommodation is only for 2 people traveling together"
                        }
                    ],
                    "add_ons": [
                        {
                            "type": "Special Diet Supplement",
                            "price_per_week": "£35",
                            "notes": "Gluten free, lactose free, vegan, halal, kosher, vegetarian, food allergy (contact for information)"
                        },
                        {
                            "type": "Christmas Holidays Homestay",
                            "price": "£350",
                            "duration": "20 Dec to 3 Jan 2026"
                        }
                    ]
                }
            ],
            "airport_transfer": {
                "from_heathrow": {
                    "one_passenger": "£170",
                    "two_passengers": "£175",
                    "three_passengers": "£180"
                },
                "from_gatwick": {
                    "one_passenger": "£140",
                    "two_passengers": "£145",
                    "three_passengers": "£150"
                },
                "from_stansted": {
                    "one_passenger": "£250",
                    "two_passengers": "£255",
                    "three_passengers": "£260"
                }
            },
            "additional_fees": {
                "accommodation_placement_fee": "£75",
                "ielts_exam": "£220",
                "digital_ebook": "£32"
            },
            "social_activities": {
                "excursion_costs": {
                    "full_day": "£40 - £85",
                    "half_day": "£20 - £45"
                },
                "free_activities": "CES organizes free afternoon and evening activities"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation arranged in a carefully selected homestay (half board: bed, breakfast, and dinner). No allowance for absence. Shared room accommodation only for 2 travelers together.",
        "medical_insurance": "Students are advised to take out travel and medical insurance before leaving home.",
        "school_holidays": "1 Jan, 18 Apr, 21 Apr, 5 May, 26 May, 25 Aug, 22 Dec 2025 - 2 Jan 2026 (no refunds for public holidays)",
        "policy_of_care": "CES has a strict policy for 16 and 17-year-old students in adult schools."
    }
}
2025-01-31 10:21:46,093 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:21:46,093 - PDFParser - INFO - Successfully processed page 17
2025-01-31 10:21:46,094 - PDFParser - INFO - Processing page 18/18
2025-01-31 10:21:46,103 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 10:21:46,105 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 10:21:46,111 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 10:21:46,111 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 10:22:00,202 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 10:22:00,202 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "72 Dame Street, Dublin 2, Ireland",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Full refund given for 2+ weeks' notice.",
                    "supplements": null
                },
                {
                    "type": "Self-catering",
                    "price_per_week": null,
                    "description": "Full refund given for 28+ days' notice.",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": "€250",
                "visa_refusal_fee": "€250"
            }
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "180 Bloor Street West, Toronto, Ontario Canada M4W 1A3",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Full refund given for 2+ weeks' notice.",
                    "supplements": null
                },
                {
                    "type": "Self-catering",
                    "price_per_week": null,
                    "description": "Full refund given for 28+ days' notice.",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": "$195 CAD",
                "visa_refusal_fee": "$350 CAD"
            }
        },
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "27 South Street, Worthing West Sussex, BN11 3AR",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Full refund given for 2+ weeks' notice.",
                    "supplements": null
                },
                {
                    "type": "Self-catering",
                    "price_per_week": null,
                    "description": "Full refund given for 28+ days' notice.",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": "£250 GBP",
                "visa_refusal_fee": "£250 GBP"
            }
        }
    ],
    "terms": {
        "cancellation": "Notice provided up to 14 days prior to the arrival date qualifies for partial fee refund.",
        "accommodation": "Full refund for homestay and self-catering accommodations with required notice periods (2+ weeks for homestay, 28+ days for self-catering).",
        "other_conditions": "CES reserves the right to adjust tuition or accommodation fees due to unavoidable delays. Students must ensure visa applications are correct to avoid cancellation fees."
    }
}
2025-01-31 10:22:00,203 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 10:22:00,203 - PDFParser - INFO - Successfully processed page 18
2025-01-31 10:22:00,204 - PDFParser - INFO - PDF processing completed
2025-01-31 10:22:00,204 - PDFParser - INFO - Merging results from all pages
2025-01-31 10:22:00,204 - PDFParser - INFO - Collected 25 locations for merging
2025-01-31 10:22:00,205 - PDFParser - INFO - Merged 24 locations
2025-01-31 10:22:00,205 - PDFParser - INFO - Successfully merged results
2025-01-31 10:22:00,205 - PDFParser - INFO - Writing results to output.json
2025-01-31 10:22:00,213 - PDFParser - INFO - Processing complete. Results saved to output.json
2025-01-31 11:01:58,022 - PDFParser - INFO - Starting PDF processing
2025-01-31 11:01:58,022 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 11:01:58,022 - PDFParser - INFO - Initializing PDFParser
2025-01-31 11:01:58,055 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 11:01:58,056 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 11:01:58,056 - PDFParser - INFO - Processing page 1/18
2025-01-31 11:01:58,099 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:01:58,103 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:01:58,114 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:01:58,115 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:02:15,274 - PDFParser - INFO - Starting PDF processing
2025-01-31 11:02:15,275 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 11:02:15,275 - PDFParser - INFO - Initializing PDFParser
2025-01-31 11:02:15,309 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Junior_Price_List_as_at_08_August.pdf
2025-01-31 11:02:15,309 - PDFParser - INFO - Opened PDF with 4 pages
2025-01-31 11:02:15,310 - PDFParser - INFO - Processing page 1/4
2025-01-31 11:02:15,351 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:02:15,355 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:02:15,366 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:02:15,366 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:02:19,447 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:02:19,448 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [],
    "terms": {}
} 


2025-01-31 11:02:19,448 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:02:19,448 - PDFParser - INFO - Successfully processed page 1
2025-01-31 11:02:19,448 - PDFParser - INFO - Processing page 2/4
2025-01-31 11:02:19,461 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:02:19,464 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:02:19,470 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:02:19,471 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:02:53,580 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:02:53,580 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "€1785", "currency": "EUR"},
                        {"duration": "3 weeks", "price": "€2677", "currency": "EUR"},
                        {"duration": "4 weeks", "price": "€3570", "currency": "EUR"},
                        {"duration": "Extra week", "price": "€892", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Super Intensive English Language and Activity Programme",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 20.5,
                    "description": "20.5 hours tuition per week in multinational classes with Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "€2025", "currency": "EUR"},
                        {"duration": "3 weeks", "price": "€2895", "currency": "EUR"},
                        {"duration": "4 weeks", "price": "€4055", "currency": "EUR"},
                        {"duration": "Extra week", "price": "€1015", "currency": "EUR"}
                    ]
                },
                {
                    "name": "English Language and Rugby Programme",
                    "duration": "2 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with 4 afternoons of Rugby. Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "€2247", "currency": "EUR"},
                        {"duration": "4 weeks", "price": "€4494", "currency": "EUR"}
                    ]
                },
                {
                    "name": "CAE FAST TRACK Exam Preparation + Activity Programme",
                    "duration": "4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board homestay accommodation (Min 6 students required). Includes course materials and CAE exam fee.",
                    "prices": [
                        {"duration": "4 weeks", "price": "€3906", "currency": "EUR"}
                    ]
                }
            ]
        },
        {
            "city": "Worthing",
            "country": "UK",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1553", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2326", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£3074", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme - Brighton University",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with Full board residential accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2317", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3472", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£4601", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£1145", "currency": "GBP"}
                    ]
                }
            ]
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1787", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2645", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£3483", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£865", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme - Pollock Halls",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with Full board residential accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2582", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3832", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£5073", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£1265", "currency": "GBP"}
                    ]
                }
            ]
        },
        {
            "city": "Oxford",
            "country": "UK",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1935", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2852", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£3779", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£940", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme - Ruskin Halls",
                    "duration": "2-4 weeks",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes with Full board residential accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2396", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3451", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£4230", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£1075", "currency": "GBP"}
                    ]
                }
            ]
        }
    ],
    "additional_fees": {
        "registration": {
            "Ireland": "€85",
            "UK": "£75",
            "Canada": "$195"
        },
        "terms": "All tuition/teaching hours are 45 minutes. Maximum class size: 15. Travel card or Metro Pass not included."
    }
}
2025-01-31 11:02:53,580 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:02:53,581 - PDFParser - INFO - Successfully processed page 2
2025-01-31 11:02:53,581 - PDFParser - INFO - Processing page 3/4
2025-01-31 11:02:53,586 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:02:53,589 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:02:53,595 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:02:53,596 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:03:34,595 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:03:34,595 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "English Language and Activity Programme (Homestay)",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes, full board homestay accommodation",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1463", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2189", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£2915", "currency": "GBP"},
                        {"duration": "extra week", "price": "£725", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme (Residential)",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes, full board residence accommodation at Leeds Trinity University",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2226", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3334", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£4442", "currency": "GBP"},
                        {"duration": "extra week", "price": "£1105", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": []
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "courses": [
                {
                    "name": "English Language and Activity Programme (Homestay)",
                    "lessons_per_week": 20,
                    "description": "20 lessons per week in multinational classes, single room, full board homestay accommodation, airport transfer, afternoon and evening activities (Mon-Fri) and 1 Saturday excursion per week",
                    "prices": [
                        {"duration": "2 weeks", "price": "$3480", "currency": "CAD"},
                        {"duration": "3 weeks", "price": "$4760", "currency": "CAD"},
                        {"duration": "4 weeks", "price": "$5860", "currency": "CAD"},
                        {"duration": "extra week", "price": "$1715", "currency": "CAD"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme (Residence)",
                    "lessons_per_week": 20,
                    "description": "20 lessons per week in multinational classes, shared room, full board residence accommodation, airport transfer, afternoon and evening activities (Mon-Fri) and 1 Saturday excursion per week",
                    "prices": [
                        {"duration": "2 weeks", "price": "$4980", "currency": "CAD"},
                        {"duration": "3 weeks", "price": "$7095", "currency": "CAD"},
                        {"duration": "4 weeks", "price": "$8985", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Leadership and Activity Programme (Homestay)",
                    "lessons_per_week": 20,
                    "description": "20 lessons per week in multinational classes, single room, full board homestay accommodation, airport transfer, afternoon and evening activities (Mon-Fri) and 1 Saturday excursion per week",
                    "prices": [
                        {"duration": "2 weeks", "price": "$3480", "currency": "CAD"},
                        {"duration": "3 weeks", "price": "$4760", "currency": "CAD"},
                        {"duration": "4 weeks", "price": "$5860", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Cambridge Fast Track & Activity Programme (Homestay)",
                    "lessons_per_week": 20,
                    "description": "20 lessons per week in multinational classes, single room, full board homestay accommodation, airport transfer, afternoon and evening activities (Mon-Fri) and 1 Saturday excursion per week",
                    "prices": [
                        {"duration": "2 weeks", "price": "$3480", "currency": "CAD"},
                        {"duration": "3 weeks", "price": "$4760", "currency": "CAD"},
                        {"duration": "4 weeks", "price": "$5860", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Parent and Child Programme (10+)",
                    "lessons_per_week": 20,
                    "description": "20 lessons per week in multinational classes, afternoon activities (Mon-Fri), Saturday excursions, shared room, full board homestay accommodation, airport transfers",
                    "prices": [
                        {"duration": "2 weeks", "price": "$5680", "currency": "CAD"},
                        {"duration": "3 weeks", "price": "$7750", "currency": "CAD"},
                        {"duration": "4 weeks", "price": "$9700", "currency": "CAD"},
                        {"duration": "extra week", "price": "$2435", "currency": "CAD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "description": "Includes accommodation in a homestay",
                    "supplements": {
                        "custodial_fee": "$175",
                        "special_dietary_supplement": "$50/week",
                        "unaccompanied_minor_return_fee": "$125",
                        "homestay_move_fee": "$150"
                    }
                }
            ]
        },
        {
            "city": "Vancouver",
            "country": "Canada",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 20,
                    "description": "20 lessons per week in multinational classes, single room, full board homestay accommodation, airport transfer, afternoon activities (Mon-Fri) and 1 Saturday excursion per week",
                    "prices": [
                        {"duration": "2 weeks", "price": "$3685", "currency": "CAD"},
                        {"duration": "3 weeks", "price": "$5165", "currency": "CAD"},
                        {"duration": "4 weeks", "price": "$6645", "currency": "CAD"},
                        {"duration": "extra week", "price": "$1660", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Leadership and Activity Programme",
                    "lessons_per_week": 20,
                    "description": "20 lessons per week in multinational classes, single room, full board homestay accommodation, airport transfer, afternoon activities (Mon-Fri) and 1 Saturday excursion per week",
                    "prices": [
                        {"duration": "2 weeks", "price": "$3685", "currency": "CAD"},
                        {"duration": "3 weeks", "price": "$5165", "currency": "CAD"},
                        {"duration": "4 weeks", "price": "$6645", "currency": "CAD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "description": "Includes accommodation in a homestay",
                    "prices": []
                }
            ]
        }
    ],
    "terms": {
        "cancellation_policy": "No information provided",
        "registration_fees": {
            "Ireland": "€85",
            "UK": "£75",
            "Canada": "$195"
        },
        "class_details": {
            "lesson_duration": "45 minutes",
            "maximum_class_size": 15,
            "notes": "Metro pass not included and must be purchased separately."
        }
    }
}
2025-01-31 11:03:34,595 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:03:34,595 - PDFParser - INFO - Successfully processed page 3
2025-01-31 11:03:34,595 - PDFParser - INFO - Processing page 4/4
2025-01-31 11:03:34,609 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:03:34,614 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:03:34,620 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:03:34,621 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:03:44,710 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:03:44,710 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "72 Dame Street, Dublin 2, Ireland",
            "courses": [
                {
                    "name": "Junior English Course",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {
                            "duration": "Weekly",
                            "price": "€125",
                            "currency": "EUR",
                            "note": "Supplement if flight departs Dublin earlier than 08:00hrs."
                        }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€35",
                    "description": "Supplement per week (Ireland).",
                    "supplements": {
                        "Summer": null
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85",
                "other_fees": "Up to €125 for specific services (early flight supplements etc.)."
            }
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "19 Bloor Street West, Toronto, Ontario, Canada M4W 1A3",
            "courses": [
                {
                    "name": "Junior English Course",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {
                            "duration": "Weekly",
                            "price": "$150",
                            "currency": "CAD",
                            "note": "Homestay cancellation fee."
                        }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Host family",
                    "price_per_week": null,
                    "description": "Shared rooms available.",
                    "supplements": {
                        "Summer": null
                    }
                }
            ],
            "additional_fees": {
                "registration": null
            }
        },
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "27 South Street, Worthing, West Sussex, BN11 3AR, UK",
            "courses": [
                {
                    "name": "Junior English Course",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {
                            "duration": "Weekly",
                            "price": "£125",
                            "currency": "GBP",
                            "note": "Supplement for assisted check-in for students under 12 years."
                        }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": null,
                    "supplements": {
                        "Summer": null
                    }
                }
            ],
            "additional_fees": {
                "registration": "£85",
                "other_fees": "£65 for early flights or cancellation related."
            }
        }
    ],
    "terms": {
        "cancellation": "All cancellations must be notified in writing. Notice of 14 days required for tuition fees refund minus a cancellation fee of €250 (Ireland) / GBP£250 (UK) / CAD$350 (Canada)."
    }
}
2025-01-31 11:03:44,710 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:03:44,710 - PDFParser - INFO - Successfully processed page 4
2025-01-31 11:03:44,711 - PDFParser - INFO - PDF processing completed
2025-01-31 11:03:44,711 - PDFParser - INFO - Merging results from all pages
2025-01-31 11:03:44,712 - PDFParser - INFO - Collected 10 locations for merging
2025-01-31 11:03:44,712 - PDFParser - INFO - Merged 16 locations
2025-01-31 11:03:44,712 - PDFParser - INFO - Successfully merged results
2025-01-31 11:03:44,712 - PDFParser - INFO - Writing results to data/output_files/2025_CES_Junior_Price_List_as_at_08_August_output.json
2025-01-31 11:03:44,712 - PDFParser - ERROR - Main process failed: [Errno 2] No such file or directory: 'data/output_files/2025_CES_Junior_Price_List_as_at_08_August_output.json'
2025-01-31 11:04:21,886 - PDFParser - INFO - Starting PDF processing
2025-01-31 11:04:21,886 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 11:04:21,887 - PDFParser - INFO - Initializing PDFParser
2025-01-31 11:04:21,919 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Junior_Price_List_as_at_08_August.pdf
2025-01-31 11:04:21,920 - PDFParser - INFO - Opened PDF with 4 pages
2025-01-31 11:04:21,920 - PDFParser - INFO - Processing page 1/4
2025-01-31 11:04:21,962 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:04:21,967 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:04:21,978 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:04:21,978 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:04:26,012 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:04:26,012 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": null,
            "country": null,
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {}
}
2025-01-31 11:04:26,012 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:04:26,013 - PDFParser - INFO - Successfully processed page 1
2025-01-31 11:04:26,013 - PDFParser - INFO - Processing page 2/4
2025-01-31 11:04:26,025 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:04:26,029 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:04:26,034 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:04:26,035 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:04:59,277 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:04:59,277 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "€1785", "currency": "EUR"},
                        {"duration": "3 weeks", "price": "€2677", "currency": "EUR"},
                        {"duration": "4 weeks", "price": "€3570", "currency": "EUR"},
                        {"duration": "extra week", "price": "€892", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Super Intensive English Language and Activity Programme",
                    "lessons_per_week": 20.5,
                    "description": "20.5 hours tuition per week in multinational classes. Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "€2025", "currency": "EUR"},
                        {"duration": "3 weeks", "price": "€2895", "currency": "EUR"},
                        {"duration": "4 weeks", "price": "€4055", "currency": "EUR"},
                        {"duration": "extra week", "price": "€1015", "currency": "EUR"}
                    ]
                },
                {
                    "name": "English Language and Rugby Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. 4 afternoons per week of rugby. Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "€2247", "currency": "EUR"},
                        {"duration": "4 weeks", "price": "€4494", "currency": "EUR"}
                    ]
                },
                {
                    "name": "CAE FAST TRACK Exam Preparation + Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board homestay accommodation. Minimum 6 students required.",
                    "prices": [
                        {"duration": "4 weeks", "price": "€3906", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Full board homestay accommodation included in course fees.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        },
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1553", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2326", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£3074", "currency": "GBP"},
                        {"duration": "extra week", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board residential accommodation (Brighton University).",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2317", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3472", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£4601", "currency": "GBP"},
                        {"duration": "extra week", "price": "£1145", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Full board homestay accommodation included in course fees.",
                    "supplements": {}
                },
                {
                    "type": "Residential",
                    "price_per_week": null,
                    "description": "Full board residential accommodation included in course fees.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "registration": "£75"
            }
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1787", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2645", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£3483", "currency": "GBP"},
                        {"duration": "extra week", "price": "£865", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board residential accommodation (Pollock Halls).",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2582", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3832", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£5073", "currency": "GBP"},
                        {"duration": "extra week", "price": "£1265", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Full board homestay accommodation included in course fees.",
                    "supplements": {}
                },
                {
                    "type": "Residential",
                    "price_per_week": null,
                    "description": "Full board residential accommodation included in course fees.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "registration": "£75"
            }
        },
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board homestay accommodation.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1935", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2852", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£3779", "currency": "GBP"},
                        {"duration": "extra week", "price": "£940", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "description": "15 hours tuition per week in multinational classes. Full board residential accommodation (Ruskin Halls).",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2396", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3451", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£4320", "currency": "GBP"},
                        {"duration": "extra week", "price": "£1075", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Full board homestay accommodation included in course fees.",
                    "supplements": {}
                },
                {
                    "type": "Residential",
                    "price_per_week": null,
                    "description": "Full board residential accommodation included in course fees.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": null,
        "teaching_hours": "45-minute teaching hours.",
        "max_class_size": 15,
        "additional_costs": "Travel card or Metro Pass not included and must be purchased separately."
    }
}
2025-01-31 11:04:59,278 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:04:59,278 - PDFParser - INFO - Successfully processed page 2
2025-01-31 11:04:59,278 - PDFParser - INFO - Processing page 3/4
2025-01-31 11:04:59,283 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:04:59,286 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:04:59,292 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:04:59,292 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:05:16,704 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:05:16,705 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "accommodation": "Homestay Accommodation",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1463", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£2189", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£2915", "currency": "GBP"},
                        {"extra_week": "£725", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme",
                    "lessons_per_week": 15,
                    "accommodation": "Residential Accommodation",
                    "prices": [
                        {"duration": "2 weeks", "price": "£2226", "currency": "GBP"},
                        {"duration": "3 weeks", "price": "£3334", "currency": "GBP"},
                        {"duration": "4 weeks", "price": "£4442", "currency": "GBP"},
                        {"extra_week": "£1105", "currency": "GBP"}
                    ]
                }
            ]
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "courses": [
                {
                    "name": "English Language and Activity Programme (Homestay)",
                    "lessons_per_week": 20,
                    "prices": [
                        {"duration": "2 weeks", "price": "$3480", "currency": "USD"},
                        {"duration": "3 weeks", "price": "$4760", "currency": "USD"},
                        {"duration": "4 weeks", "price": "$5860", "currency": "USD"},
                        {"extra_week": "$1715", "currency": "USD"}
                    ]
                },
                {
                    "name": "English Language and Activity Programme (Residence)",
                    "lessons_per_week": 20,
                    "prices": [
                        {"duration": "2 weeks", "price": "$4980", "currency": "USD"},
                        {"duration": "3 weeks", "price": "$7095", "currency": "USD"},
                        {"duration": "4 weeks", "price": "$8895", "currency": "USD"}
                    ]
                },
                {
                    "name": "Leadership and Activity Programme",
                    "lessons_per_week": 20,
                    "prices": [
                        {"duration": "2 weeks", "price": "$3480", "currency": "USD"},
                        {"duration": "3 weeks", "price": "$4760", "currency": "USD"},
                        {"duration": "4 weeks", "price": "$5860", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Fast Track & Activity Programme",
                    "lessons_per_week": 25,
                    "prices": [
                        {"duration": "2 weeks", "price": "$3480", "currency": "USD"},
                        {"duration": "3 weeks", "price": "$4760", "currency": "USD"},
                        {"duration": "4 weeks", "price": "$5860", "currency": "USD"}
                    ]
                },
                {
                    "name": "Parent and Child Programme",
                    "lessons_per_week": 20,
                    "prices": [
                        {"duration": "2 weeks", "price": "$5680", "currency": "USD"},
                        {"duration": "3 weeks", "price": "$7750", "currency": "USD"},
                        {"duration": "4 weeks", "price": "$9700", "currency": "USD"},
                        {"extra_week": "$2435", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Custodial Fee",
                    "price": "$175",
                    "currency": "USD"
                },
                {
                    "type": "Special Dietary Supplements",
                    "price_week": "$50",
                    "currency": "USD"
                }
            ]
        },
    {
      "city":"Lastly"}]}
2025-01-31 11:05:16,705 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:05:16,705 - PDFParser - INFO - Successfully processed page 3
2025-01-31 11:05:16,705 - PDFParser - INFO - Processing page 4/4
2025-01-31 11:05:16,718 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:05:16,720 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:05:16,726 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:05:16,727 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:05:24,827 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:05:24,827 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "7/12 Dame Street, Dublin 2, Ireland",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "registration": "€85"
            }
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "19 Bloor Street West, Toronto, Ontario, Canada M4W 1A3",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "registration": "CAD $150"
            }
        },
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "27 South Street, Worthing, West Sussex, BN11 3AR",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "registration": "GBP £85"
            }
        }
    ],
    "terms": {
        "cancellation": {
            "notice_period": "14 days",
            "cancellation_fees": {
                "Ireland": "€250",
                "United Kingdom": "£250",
                "Canada": "CAD $350"
            },
            "refunds_policy": "Bookings canceled less than 14 days before arrival will forfeit the accommodation deposit of €500 per week."
        },
        "general": [
            "Fees include tuition, full board accommodation, activities and excursions, assessment tests, certificate of attendance, and 24-hour emergency support.",
            "Supplements per week include: €35 (Ireland), GBP £35 (UK), CAD $50 (Canada) for special diets or age-specific additional fees.",
            "CES policies include a strict anti-bullying rule and discourage alcohol or drug use, violations may result in being sent home."
        ]
    }
}
2025-01-31 11:05:24,827 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:05:24,827 - PDFParser - INFO - Successfully processed page 4
2025-01-31 11:05:24,828 - PDFParser - INFO - PDF processing completed
2025-01-31 11:05:24,828 - PDFParser - INFO - Merging results from all pages
2025-01-31 11:05:24,828 - PDFParser - INFO - Collected 11 locations for merging
2025-01-31 11:05:24,829 - PDFParser - INFO - Merged 16 locations
2025-01-31 11:05:24,829 - PDFParser - INFO - Successfully merged results
2025-01-31 11:05:24,834 - PDFParser - INFO - Writing results to data/output_files/2025_CES_Junior_Price_List_as_at_08_August_output.json
2025-01-31 11:05:24,837 - PDFParser - INFO - Processing complete. Results saved to output.json
2025-01-31 11:17:23,641 - PDFParser - INFO - Starting PDF processing
2025-01-31 11:17:23,642 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 11:17:23,642 - PDFParser - INFO - Initializing PDFParser
2025-01-31 11:17:23,676 - PDFParser - INFO - Processing PDF: data/input_files/Kaplan adult 2025.pdf
2025-01-31 11:17:23,677 - PDFParser - INFO - Opened PDF with 77 pages
2025-01-31 11:17:23,677 - PDFParser - INFO - Processing page 1/77
2025-01-31 11:17:23,745 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:17:23,749 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:17:23,760 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:17:23,760 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:17:38,274 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:17:38,274 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Boston",
            "country": "United States",
            "address": "Not specified",
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "Not specified",
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Bath",
            "country": "United Kingdom",
            "address": "Not specified",
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Lyon",
            "country": "France",
            "address": "Not specified",
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Berlin",
            "country": "Germany",
            "address": "Not specified",
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Montreux",
            "country": "Switzerland",
            "address": "Not specified",
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {
        "pricing_terms": "Prices are correct at the time of publishing online (September 2023) and are valid for courses starting in 2023/2024.",
        "price_changes": "Kaplan has the right to change prices based on tax increases, governmental actions, or other events beyond Kaplan’s control.",
        "exam_fees": "Exam fees are not included in course prices but are available on request.",
        "supplements_details": "Further supplements (courier, change, materials, housing, etc.) are listed in the Terms and Conditions.",
        "full_terms_link": "https://www.kaplaninternational.com/privacy"
    }
}
2025-01-31 11:17:38,274 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:17:38,275 - PDFParser - INFO - Successfully processed page 1
2025-01-31 11:17:38,275 - PDFParser - INFO - Processing page 2/77
2025-01-31 11:17:38,330 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:17:38,334 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:17:38,339 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:17:38,340 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:17:42,212 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:17:42,212 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {}
} 


2025-01-31 11:17:42,212 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:17:42,212 - PDFParser - INFO - Successfully processed page 2
2025-01-31 11:17:42,212 - PDFParser - INFO - Processing page 3/77
2025-01-31 11:17:42,236 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:17:42,239 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:17:42,243 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:17:42,244 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:18:04,497 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:18:04,497 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Boston",
            "country": "USA",
            "address": "Not provided",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "Max. 12 weeks",
                    "description": "Available for flexible durations",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "420", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "395", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "395", "currency": "USD"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": "Not specified",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "495", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "470", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "445", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "545", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "520", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "495", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "465", "currency": "USD"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "lessons_per_week": "Max. 10 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "545", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "520", "currency": "USD"}
                    ]
                },
                {
                    "name": "TOEFL® and Academic English Intensive",
                    "lessons_per_week": "Max. 16 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "545", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "520", "currency": "USD"},
                        {"duration": "12+ weeks", "price": "495", "currency": "USD"}
                    ]
                },
                {
                    "name": "TOEFL® and Academic English (Part-Time)",
                    "lessons_per_week": "Max. 12 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "495", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "470", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "prices": [
                        {"duration": "20+ weeks", "price": "465", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "type": "Twin",
                            "meals": "14 Meals/wk",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "335 USD"
                        },
                        {
                            "type": "Single",
                            "meals": "14 Meals/wk",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "420 USD"
                        },
                        {
                            "type": "Single",
                            "meals": "7 Meals/wk",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "335 USD"
                        },
                        {
                            "type": "Single",
                            "meals": "No Meals",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "310 USD"
                        }
                    ]
                },
                {
                    "type": "Homestay (Under 18)",
                    "options": [
                        {
                            "type": "Twin",
                            "meals": "14 Meals/wk",
                            "bath": "Shared",
                            "min_age": "16",
                            "price_per_week": "370 USD"
                        },
                        {
                            "type": "Single",
                            "meals": "14 Meals/wk",
                            "bath": "Shared",
                            "min_age": "16",
                            "price_per_week": "455 USD"
                        },
                        {
                            "type": "Single",
                            "meals": "7 Meals/wk",
                            "bath": "Shared",
                            "min_age": "16",
                            "price_per_week": "370 USD"
                        }
                    ]
                },
                {
                    "type": "Boston Apartments - The Bon",
                    "options": [
                        {
                            "type": "Single",
                            "meals": "No Meals",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "725 USD"
                        },
                        {
                            "type": "Deluxe Single",
                            "meals": "No Meals",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "760 USD"
                        }
                    ]
                }
            ]
        }
    ],
    "terms": {
        "start_dates": "Courses start every Monday or Tuesday if Monday is a public holiday."
    }
}
2025-01-31 11:18:04,497 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:18:04,497 - PDFParser - INFO - Successfully processed page 3
2025-01-31 11:18:04,497 - PDFParser - INFO - Processing page 4/77
2025-01-31 11:18:04,526 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:18:04,528 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:18:04,533 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:18:04,533 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:18:13,828 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:18:13,828 - PDFParser - DEBUG - Raw API response content: {
  "school_name": "Kaplan International Languages",
  "locations": [
    {
      "city": "Not specified",
      "country": "Not specified",
      "address": "Not specified",
      "courses": [
        {
          "name": "Virtual Internship",
          "lessons_per_week": 8,
          "description": "Internship Upgrade",
          "prices": [
            {
              "duration": "Not specified",
              "price": "1095",
              "currency": "USD"
            }
          ]
        },
        {
          "name": "Intensive Upgrade",
          "lessons_per_week": 8,
          "description": "Enhance course intensity",
          "prices": [
            {
              "duration": "Not specified",
              "price": "120",
              "currency": "USD"
            }
          ]
        },
        {
          "name": "AM Guaranteed Classes",
          "lessons_per_week": "Not specified",
          "description": "Morning class guarantee",
          "prices": [
            {
              "duration": "2 weeks max",
              "price": "20",
              "currency": "USD"
            }
          ]
        },
        {
          "name": "General Upgrade",
          "lessons_per_week": "10x9am K+ Club pw",
          "description": "Additional learning sessions",
          "prices": [
            {
              "duration": "Not specified",
              "price": "60",
              "currency": "USD"
            }
          ]
        },
        {
          "name": "Elective Only Classes",
          "lessons_per_week": "Not specified",
          "description": "Custom course focusing on elective modules",
          "prices": [
            {
              "duration": "Not specified",
              "price": "260",
              "currency": "USD"
            }
          ]
        }
      ],
      "accommodations": [
        {
          "type": "Homestay Special Diet",
          "price_per_week": "75",
          "description": "Supplement for specific diet types per week",
          "supplements": {
            "Luggage Retainer": "80 USD per week"
          }
        }
      ],
      "additional_fees": {
        "application": "200",
        "accommodation_placement": "100",
        "university_placement_service": "250",
        "medical_insurance": "45 per week",
        "post_arrival_room_change": "100",
        "courier_fee": "100 (optional)",
        "change_fee_after_arrival": "105",
        "after-hours_arrival": "50",
        "admin_fee": "50",
        "confidence_plus_booking": "72"
      }
    }
  ],
  "terms": {
    "cancellation": "Not specified",
    "other_conditions": [
      "A two-way transfer booking gives 10% discount for the return transfer",
      "Two students booking travel together receive 25% discount"
    ]
  }
}
2025-01-31 11:18:13,828 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:18:13,828 - PDFParser - INFO - Successfully processed page 4
2025-01-31 11:18:13,828 - PDFParser - INFO - Processing page 5/77
2025-01-31 11:18:13,851 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:18:13,852 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:18:13,857 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:18:13,857 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:18:32,036 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:18:32,036 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Chicago",
            "country": "USA",
            "address": null,
            "courses": [
                {
                    "name": "General English (Max. 12 weeks)",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "385", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "370", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "350", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "350", "currency": "USD"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "420", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "395", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "375", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "485", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "465", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "440", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "410", "currency": "USD"}
                    ]
                },
                {
                    "name": "Business Supplementary (Max. 10 weeks)",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "485", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "465", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "Max. 10 weeks", "price": "375", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "410", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "310",
                    "description": "Twin, 14 Meals/wk, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "365",
                    "description": "Single, 14 Meals/wk, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "300",
                    "description": "Single, 7 Meals/wk, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "245",
                    "description": "Single, No Meals, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "345",
                    "description": "Twin, 14 Meals/wk, Shared bath, Min. age 16",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "400",
                    "description": "Single, 14 Meals/wk, Shared bath, Min. age 16",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "345",
                    "description": "Single, 7 Meals/wk, Shared bath, Min. age 16",
                    "supplements": null
                },
                {
                    "type": "Chicago Student Hostel",
                    "price_per_week": "375",
                    "description": "Twin, No Meals, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "Chicago Student Hostel",
                    "price_per_week": "595",
                    "description": "Single, No Meals, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "Chicago Student Hostel",
                    "price_per_week": "670",
                    "description": "Single, No Meals, Private bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "The Flats",
                    "price_per_week": "410",
                    "description": "Twin, No Meals, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "The Flats",
                    "price_per_week": "565",
                    "description": "Single, No Meals, Shared bath, Min. age 18",
                    "supplements": null
                },
                {
                    "type": "The Flats",
                    "price_per_week": "670",
                    "description": "Studio, No Meals, Private bath, Min. age 18",
                    "supplements": null
                }
            ],
            "additional_fees": null
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 11:18:32,036 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:18:32,036 - PDFParser - INFO - Successfully processed page 5
2025-01-31 11:18:32,037 - PDFParser - INFO - Processing page 6/77
2025-01-31 11:18:32,066 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:18:32,070 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:18:32,074 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:18:32,075 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:18:44,932 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:18:44,932 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "tuition_upgrades_and_addons": [
                {
                    "name": "Virtual Internship",
                    "price": "1,095",
                    "currency": "USD"
                },
                {
                    "name": "Intensive Upgrade (6 hours/8 lessons per week)",
                    "price": "120",
                    "currency": "USD"
                },
                {
                    "name": "AM Guaranteed Classes (Max charge 12 weeks)",
                    "price": "20",
                    "currency": "USD"
                },
                {
                    "name": "General Upgrade (1x90min K+ Club pw)",
                    "price": "260",
                    "currency": "USD"
                },
                {
                    "name": "Elective Only Classes",
                    "price": "260",
                    "currency": "USD"
                },
                {
                    "name": "TOEFL Add On",
                    "price": "175",
                    "currency": "USD",
                    "notes": "If more than 5wk purchased, cost becomes 150pw"
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access (12 months post departure)",
                    "price": "140",
                    "currency": "USD"
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access (3 months post departure)",
                    "price": "70",
                    "currency": "USD"
                },
                {
                    "name": "Additional UPS Application to Partner Institution",
                    "price": "125",
                    "currency": "USD"
                }
            ]
        }
    ],
    "accommodations": [
        {
            "type": "Homestay Special Diet",
            "price_weekly": "75",
            "currency": "USD",
            "notes": "Per diet type per week"
        },
        {
            "type": "Luggage Retainer",
            "price_weekly": "80",
            "currency": "USD"
        }
    ],
    "peak_season_supplement": [
        {
            "type": "Homestay",
            "price_weekly": "35",
            "currency": "USD",
            "time_frame": "31 May - 23 Aug"
        },
        {
            "type": "Residence",
            "price_weekly": "35",
            "currency": "USD",
            "time_frame": "31 May - 23 Aug"
        },
        {
            "type": "Homestay End of Year",
            "price_weekly": "80",
            "currency": "USD",
            "time_frame": "20 Dec - 27 Dec"
        }
    ],
    "fees": [
        {
            "name": "Application Fee",
            "price": "200",
            "currency": "USD",
            "notes": "Compulsory"
        },
        {
            "name": "Accommodation Placement Fee",
            "price": "100",
            "currency": "USD",
            "notes": "Compulsory if accommodation is purchased"
        },
        {
            "name": "Change Fee",
            "price": "105",
            "currency": "USD",
            "notes": "If changes are made after arrival"
        },
        {
            "name": "University Placement Service",
            "price": "250",
            "currency": "USD",
            "notes": "If used, or free if student books 16+ weeks"
        },
        {
            "name": "Accommodation After-hours Arrival Supplement",
            "price": "50",
            "currency": "USD"
        },
        {
            "name": "Administration Fee",
            "price": "50",
            "currency": "USD",
            "notes": "For Americas only, except Brazil"
        },
        {
            "name": "Booking with Confidence Plus",
            "price": "72",
            "currency": "USD"
        },
        {
            "name": "Medical & Travel Insurance",
            "price": "45",
            "currency": "USD",
            "notes": "Per week"
        },
        {
            "name": "Residence Room Move Fee",
            "price": "100",
            "currency": "USD",
            "notes": "Post Arrival Room Change Fee"
        }
    ],
    "transfer_service_fees": [
        {
            "destination": "Chicago O'Hare Airport",
            "price_one_way": "215",
            "currency": "USD",
            "notes": "Discounts available for two-way transfers or group bookings"
        }
    ]
}
2025-01-31 11:18:44,932 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:18:44,933 - PDFParser - INFO - Successfully processed page 6
2025-01-31 11:18:44,933 - PDFParser - INFO - Processing page 7/77
2025-01-31 11:18:44,956 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:18:44,961 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:18:44,965 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:18:44,966 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:18:58,411 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:18:58,411 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Los Angeles",
            "country": "United States",
            "courses": [
                {
                    "name": "General English",
                    "max_duration": "12 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "425", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "405", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "385", "currency": "USD"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "480", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "455", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "430", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "385", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "530", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "505", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "480", "currency": "USD"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "max_duration": "10 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "530", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "505", "currency": "USD"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "prices": [
                        {"duration": "20+ weeks", "price": "450", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "room_type": "Twin",
                            "meals": "14 Meals/week",
                            "bathroom": "Shared",
                            "minimum_age": 18,
                            "price_per_week": "350"
                        },
                        {
                            "room_type": "Single",
                            "meals": "14 Meals/week",
                            "bathroom": "Shared",
                            "minimum_age": 18,
                            "price_per_week": "435"
                        },
                        {
                            "room_type": "Single",
                            "meals": "7 Meals/week",
                            "bathroom": "Shared",
                            "minimum_age": 18,
                            "price_per_week": "350"
                        },
                        {
                            "room_type": "Under 18 Twin",
                            "meals": "14 Meals/week",
                            "bathroom": "Shared",
                            "minimum_age": 16,
                            "price_per_week": "385"
                        },
                        {
                            "room_type": "Under 18 Single",
                            "meals": "14 Meals/week",
                            "bathroom": "Shared",
                            "minimum_age": 16,
                            "price_per_week": "475"
                        },
                        {
                            "room_type": "Under 18 Single",
                            "meals": "7 Meals/week",
                            "bathroom": "Shared",
                            "minimum_age": 16,
                            "price_per_week": "385"
                        }
                    ]
                },
                {
                    "type": "Westwood Residences",
                    "options": [
                        {
                            "room_type": "Twin",
                            "meals": "No Meals",
                            "bathroom": "Shared",
                            "minimum_age": 17,
                            "price_per_week": "480"
                        },
                        {
                            "room_type": "Economy Single",
                            "meals": "No Meals",
                            "bathroom": "Private",
                            "minimum_age": 17,
                            "price_per_week": "575"
                        },
                        {
                            "room_type": "Deluxe Single",
                            "meals": "No Meals",
                            "bathroom": "Private",
                            "minimum_age": 17,
                            "price_per_week": "735"
                        }
                    ]
                }
            ]
        }
    ],
    "terms": {
        "notes": "* Twin rooms are only available to students who book and travel together. ** Twin rooms for minors are available only for students who book and travel together."
    }
}
2025-01-31 11:18:58,412 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:18:58,412 - PDFParser - INFO - Successfully processed page 7
2025-01-31 11:18:58,412 - PDFParser - INFO - Processing page 8/77
2025-01-31 11:18:58,442 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:18:58,444 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:18:58,449 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:18:58,449 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:19:13,090 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:19:13,090 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Virtual Internship",
            "price": "1,095",
            "currency": "USD",
            "details": "Remote internship program."
        },
        {
            "name": "Intensive Upgrade",
            "price": "120",
            "currency": "USD",
            "details": "6 hours/8 lessons per week."
        },
        {
            "name": "AM Guaranteed Classes",
            "price": "20",
            "currency": "USD",
            "details": "Maximum charge for 12 weeks."
        },
        {
            "name": "General Upgrade (15x90min K+ Club pw)",
            "price": "250",
            "currency": "USD",
            "details": "Includes additional General Upgrade lessons."
        },
        {
            "name": "Elective Only Classes",
            "price": "250",
            "currency": "USD",
            "details": "Cost per week."
        },
        {
            "name": "TOEFL Add-on",
            "price": "175",
            "currency": "USD",
            "details": "Only when taken with a minimum of 5 weeks of the main course."
        },
        {
            "name": "K+ Learning Space and Extras Access (12 months)",
            "price": "140",
            "currency": "USD",
            "details": "Post Departure."
        },
        {
            "name": "K+ Learning Space and Extras Access (3 months)",
            "price": "70",
            "currency": "USD",
            "details": "Post Departure."
        }
    ],
    "accommodations": [
        {
            "type": "Homestay",
            "price_weekly": "Varies",
            "supplements": {
                "Homestay Special Diet": {
                    "price_per_week": "75",
                    "currency": "USD"
                },
                "Luggage Retainer": {
                    "price_per_week": "80",
                    "currency": "USD"
                },
                "Peak Season Supplement (31 May - 23 Aug)": {
                    "price_per_week": "35",
                    "currency": "USD"
                },
                "Homestay End of Year Supplement (20 Dec - 27 Dec)": {
                    "price": "80",
                    "currency": "USD"
                }
            }
        }
    ],
    "additional_fees": {
        "application_fee": {
            "price": "200",
            "currency": "USD",
            "notes": "Compulsory"
        },
        "courier_fee": {
            "price": "100",
            "currency": "USD",
            "notes": "Optional if used"
        },
        "accommodation_placement_fee": {
            "price": "100",
            "currency": "USD",
            "notes": "Compulsory if accommodation is purchased"
        },
        "change_fee": {
            "price": "105",
            "currency": "USD",
            "notes": "If changes are made after arrival"
        },
        "university_placement_service": {
            "price": "250",
            "currency": "USD",
            "notes": "If used, or free if student books 16+ weeks"
        },
        "accommodation_after_hours_supplement": {
            "price": "50",
            "currency": "USD",
            "notes": "Applies after normal hours"
        },
        "booking_with_confidence_plus": {
            "price": "72",
            "currency": "USD"
        },
        "medical_and_travel_insurance": {
            "price": "45",
            "currency": "USD",
            "notes": "Per week"
        },
        "residence_room_move_fee": {
            "price": "100",
            "currency": "USD",
            "notes": "Post Arrival Room Change Fee"
        }
    },
    "terms": {
        "cancellation": "No specific cancellation terms are mentioned. Refer to school's general policy."
    }
}
2025-01-31 11:19:13,090 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:19:13,091 - PDFParser - INFO - Successfully processed page 8
2025-01-31 11:19:13,091 - PDFParser - INFO - Processing page 9/77
2025-01-31 11:19:13,123 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:19:13,126 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:19:13,131 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:19:13,131 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:19:40,501 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:19:40,501 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "New York",
            "country": "USA",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "max_weeks": 12,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": 470,
                        "5-11 weeks": 445,
                        "12-19 weeks": 425,
                        "20+ weeks": null
                    }
                },
                {
                    "name": "Semi-intensive English",
                    "max_weeks": null,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": 525,
                        "5-11 weeks": 500,
                        "12-19 weeks": 475,
                        "20+ weeks": 450
                    }
                },
                {
                    "name": "Intensive English",
                    "max_weeks": null,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": 585,
                        "5-11 weeks": 555,
                        "12-19 weeks": 525,
                        "20+ weeks": 500
                    }
                },
                {
                    "name": "Business Supplementary",
                    "max_weeks": 10,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": 585,
                        "5-11 weeks": 555,
                        "12-19 weeks": null,
                        "20+ weeks": null
                    }
                },
                {
                    "name": "Business Intensive",
                    "max_weeks": null,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": 585,
                        "5-11 weeks": 555,
                        "12-19 weeks": 525,
                        "20+ weeks": 500
                    }
                },
                {
                    "name": "TOEFL® and Academic English Part-time",
                    "max_weeks": 12,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": 525,
                        "5-11 weeks": 500,
                        "12-19 weeks": 475,
                        "20+ weeks": null
                    }
                },
                {
                    "name": "TOEFL® and Academic English Intensive",
                    "max_weeks": 16,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": 585,
                        "5-11 weeks": 555,
                        "12-19 weeks": 525,
                        "20+ weeks": 500
                    }
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "max_weeks": null,
                    "lessons_per_week": null,
                    "prices_per_week": {
                        "1-4 weeks": null,
                        "5-11 weeks": null,
                        "12-19 weeks": null,
                        "20+ weeks": 450
                    }
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "available_to": "General",
                    "price_per_week": {
                        "Twin (14 meals)": 445,
                        "Twin (7 meals)": 335,
                        "Single (14 meals)": 525,
                        "Single (7 meals)": 420
                    },
                    "bathroom": "Shared",
                    "minimum_age": 18
                },
                {
                    "type": "Homestay",
                    "available_to": "Under 18",
                    "price_per_week": {
                        "Twin (14 meals)": 475,
                        "Twin (7 meals)": 370,
                        "Single (14 meals)": 560,
                        "Single (7 meals)": 455
                    },
                    "bathroom": "Shared",
                    "minimum_age": 16
                },
                {
                    "type": "Homestay in Manhattan",
                    "available_to": "General",
                    "price_per_week": {
                        "Twin (7 meals)": 525,
                        "Single (7 meals)": 645
                    },
                    "bathroom": "Shared",
                    "minimum_age": 18
                },
                {
                    "type": "Homestay in Manhattan",
                    "available_to": "Under 18",
                    "price_per_week": {
                        "Twin (7 meals)": 560,
                        "Single (7 meals)": 680
                    },
                    "bathroom": "Shared",
                    "minimum_age": 16
                },
                {
                    "type": "Midtown East",
                    "price_per_week": {
                        "Single (No meals, private bath)": 875
                    },
                    "bathroom": "Private",
                    "minimum_age": 17
                },
                {
                    "type": "West Side Residence",
                    "price_per_week": {
                        "Twin (No meals)": 605,
                        "Single (No meals, private bath)": 785,
                        "Triple": 435
                    },
                    "bathroom": "Shared/Private",
                    "minimum_age": 16
                }
            ],
            "additional_fees": null
        }
    ],
    "terms": null
}
2025-01-31 11:19:40,501 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:19:40,501 - PDFParser - INFO - Successfully processed page 9
2025-01-31 11:19:40,501 - PDFParser - INFO - Processing page 10/77
2025-01-31 11:19:40,533 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:19:40,537 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:19:40,542 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:19:40,542 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:20:01,941 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:20:01,942 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": null,
            "country": null,
            "address": null,
            "courses": [
                {
                    "name": "Intensive Upgrade",
                    "lessons_per_week": 6,
                    "description": "6 hours/8 lessons per week",
                    "prices": [
                        {
                            "duration": "Upgrades",
                            "price": "120",
                            "currency": "USD"
                        }
                    ]
                },
                {
                    "name": "AM Guaranteed Classes",
                    "lessons_per_week": null,
                    "description": "Max charge 12 weeks",
                    "prices": [
                        {
                            "duration": "Upgrades",
                            "price": "20",
                            "currency": "USD"
                        }
                    ]
                },
                {
                    "name": "General Upgrade",
                    "lessons_per_week": "(1x90min K+ Club pw)",
                    "description": null,
                    "prices": [
                        {
                            "duration": "Upgrades",
                            "price": "60",
                            "currency": "USD"
                        }
                    ]
                },
                {
                    "name": "Elective Only Classes",
                    "lessons_per_week": null,
                    "description": "Cost per week",
                    "prices": [
                        {
                            "duration": "Upgrades",
                            "price": "260",
                            "currency": "USD"
                        }
                    ]
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access",
                    "lessons_per_week": null,
                    "description": "12 months access (Post Departure)",
                    "prices": [
                        {
                            "duration": "12 months",
                            "price": "140",
                            "currency": "USD"
                        }
                    ]
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access",
                    "lessons_per_week": null,
                    "description": "3 months access (Post Departure)",
                    "prices": [
                        {
                            "duration": "3 months",
                            "price": "70",
                            "currency": "USD"
                        }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Special diet, per diet type (per week)",
                    "supplements": {
                        "price": "75 USD per week"
                    }
                },
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "End of year supplement (Dec 20-27)",
                    "supplements": {
                        "price": "80 USD"
                    }
                },
                {
                    "type": "Homestay/Residence",
                    "price_per_week": null,
                    "description": "Peak season supplement (May 31-Aug 23)",
                    "supplements": {
                        "price": "35 USD per week"
                    }
                },
                {
                    "type": "Luggage Retainer",
                    "price_per_week": "80",
                    "description": null,
                    "supplements": null
                }
            ],
            "additional_fees": {
                "transfer_service": [
                    {
                        "route": "John F Kennedy Airport - One way",
                        "price": "225",
                        "currency": "USD"
                    },
                    {
                        "route": "LaGuardia Airport - One way",
                        "price": "225",
                        "currency": "USD"
                    },
                    {
                        "route": "Newark Airport - One way",
                        "price": "225",
                        "currency": "USD"
                    }
                ],
                "general_fees": [
                    {
                        "item": "Application Fee",
                        "price": "200",
                        "currency": "USD",
                        "notes": "Compulsory"
                    },
                    {
                        "item": "Courier Fee",
                        "price": "100",
                        "currency": "USD",
                        "notes": "Optional if used"
                    },
                    {
                        "item": "Accommodation Placement Fee",
                        "price": "100",
                        "currency": "USD",
                        "notes": "Compulsory if accommodation is purchased"
                    },
                    {
                        "item": "Change Fee",
                        "price": "105",
                        "currency": "USD",
                        "notes": "For changes made after arrival"
                    },
                    {
                        "item": "University Placement Service",
                        "price": "250",
                        "currency": "USD",
                        "notes": "If used or free if student books 16+ weeks"
                    },
                    {
                        "item": "Accommodation After-hours Arrival Supplement",
                        "price": "50",
                        "currency": "USD",
                        "notes": ""
                    },
                    {
                        "item": "Administration Fee",
                        "price": "50",
                        "currency": "USD",
                        "notes": "Required in Americas only (except Brazil)"
                    },
                    {
                        "item": "Booking with Confidence Plus",
                        "price": "72",
                        "currency": "USD",
                        "notes": ""
                    },
                    {
                        "item": "Medical & Travel Insurance",
                        "price": "45",
                        "currency": "USD",
                        "notes": "Per week"
                    },
                    {
                        "item": "Residence Room Move Fee",
                        "price": "100",
                        "currency": "USD",
                        "notes": "Post-arrival room change fee"
                    }
                ]
            }
        }
    ],
    "terms": null
}
2025-01-31 11:20:01,942 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:20:01,942 - PDFParser - INFO - Successfully processed page 10
2025-01-31 11:20:01,942 - PDFParser - INFO - Processing page 11/77
2025-01-31 11:20:01,963 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:20:01,966 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:20:01,971 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:20:01,971 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:20:19,078 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:20:19,078 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "New York",
            "country": "United States",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "duration_max": "12 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "470", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "445", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "425", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "425", "currency": "USD"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "525", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "500", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "475", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "450", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "585", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "555", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "525", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "500", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "prices": [
                        {"duration": "20+ weeks", "price": "500", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "room_type": "Twin *",
                            "meals_per_week": "14",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "445"
                        },
                        {
                            "room_type": "Twin *",
                            "meals_per_week": "7",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "335"
                        },
                        {
                            "room_type": "Single",
                            "meals_per_week": "14",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "525"
                        },
                        {
                            "room_type": "Single",
                            "meals_per_week": "7",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "420"
                        }
                    ]
                },
                {
                    "type": "Homestay in Manhattan",
                    "options": [
                        {
                            "room_type": "Twin *",
                            "meals_per_week": "7",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "525"
                        },
                        {
                            "room_type": "Single",
                            "meals_per_week": "7",
                            "bath": "Shared",
                            "min_age": "18",
                            "price_per_week": "645"
                        }
                    ]
                },
                {
                    "type": "Midtown East",
                    "options": [
                        {
                            "room_type": "Single",
                            "meals_per_week": "No Meals",
                            "bath": "Shared",
                            "min_age": "17",
                            "price_per_week": "875"
                        },
                        {
                            "room_type": "Twin",
                            "meals_per_week": "No Meals",
                            "bath": "Shared",
                            "min_age": "17",
                            "price_per_week": "585"
                        },
                        {
                            "room_type": "Triple *",
                            "meals_per_week": "No Meals",
                            "bath": "Shared",
                            "min_age": "17",
                            "price_per_week": "435"
                        }
                    ]
                },
                {
                    "type": "West Side Residence",
                    "options": [
                        {
                            "room_type": "Twin *",
                            "meals_per_week": "No Meals",
                            "bath": "Shared",
                            "min_age": "16",
                            "price_per_week": "605"
                        },
                        {
                            "room_type": "Single",
                            "meals_per_week": "No Meals",
                            "bath": "Private",
                            "min_age": "16",
                            "price_per_week": "785"
                        }
                    ]
                }
            ]
        }
    ],
    "terms": {
        "start_date": "Every Monday (or Tuesday if Monday is a public holiday)",
        "note": "Flexible length courses available"
    }
}
2025-01-31 11:20:19,078 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:20:19,078 - PDFParser - INFO - Successfully processed page 11
2025-01-31 11:20:19,078 - PDFParser - INFO - Processing page 12/77
2025-01-31 11:20:19,108 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:20:19,109 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:20:19,114 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:20:19,114 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:20:31,244 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:20:31,245 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Intensive Upgrade",
            "description": "6 hours/8 lessons per week",
            "price": {
                "amount": 1095,
                "currency": "USD"
            }
        },
        {
            "name": "AM Guaranteed Classes",
            "description": "Max charge: 12 weeks",
            "price": {
                "amount": 120,
                "currency": "USD"
            }
        },
        {
            "name": "General Upgrade",
            "description": "10x90min K+ Club pw",
            "price": {
                "amount": 60,
                "currency": "USD"
            }
        },
        {
            "name": "Elective Only Classes",
            "description": "",
            "price": {
                "amount": 260,
                "currency": "USD"
            }
        },
        {
            "name": "K+ Learning Space and K+ Extra Access (12 months)",
            "description": "Post departure",
            "price": {
                "amount": 140,
                "currency": "USD"
            }
        },
        {
            "name": "K+ Learning Space and K+ Extra Access (3 months)",
            "description": "Post departure",
            "price": {
                "amount": 70,
                "currency": "USD"
            }
        },
        {
            "name": "Additional UPS Application to Partner Institution",
            "price": {
                "amount": 125,
                "currency": "USD"
            }
        }
    ],
    "accommodations": [
        {
            "type": "Homestay",
            "supplements": {
                "Special Diet": {
                    "price_per_week": 75,
                    "currency": "USD"
                },
                "Peak Season Supplement": {
                    "price_per_week": 35,
                    "currency": "USD",
                    "applicable_dates": "31 May - 23 Aug"
                },
                "End of Year Supplement": {
                    "price_per_week": 80,
                    "currency": "USD",
                    "applicable_dates": "20 Dec - 27 Dec"
                }
            }
        },
        {
            "type": "Residence",
            "supplements": {
                "Peak Season Supplement": {
                    "price_per_week": 35,
                    "currency": "USD",
                    "applicable_dates": "31 May - 23 Aug"
                }
            }
        }
    ],
    "pricing": {
        "application_fee": {
            "amount": 200,
            "currency": "USD"
        },
        "accommodation_placement_fee": {
            "amount": 100,
            "currency": "USD"
        },
        "change_fee": {
            "amount": 105,
            "currency": "USD"
        },
        "university_placement_service": {
            "amount": 250,
            "currency": "USD"
        },
        "accommodation_after_hours_arrival_fee": {
            "amount": 50,
            "currency": "USD"
        },
        "administration_fee": {
            "amount": 50,
            "currency": "USD",
            "note": "Applicable in Americas only, except Brazil"
        },
        "medical_and_travel_insurance": {
            "amount": 45,
            "currency": "USD"
        },
        "residence_room_move_fee": {
            "amount": 100,
            "currency": "USD"
        }
    },
    "terms": {
        "additional_notes": "Two-way airport transfer discounts: 10% for the return trip, and a 25% discount if booked with another student."
    }
}
2025-01-31 11:20:31,245 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:20:31,245 - PDFParser - INFO - Successfully processed page 12
2025-01-31 11:20:31,245 - PDFParser - INFO - Processing page 13/77
2025-01-31 11:20:31,272 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:20:31,274 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:20:31,281 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:20:31,282 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:20:50,670 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:20:50,670 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "San Francisco - Berkeley",
            "country": "USA",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "description": "Flexible length, general English courses",
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "410", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "395", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "370", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "350", "currency": "USD"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "description": null,
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "460", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "440", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "420", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "390", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "description": null,
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "510", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "485", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "460", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "430", "currency": "USD"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "description": "Max 10 weeks",
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "510", "currency": "USD"},
                        {"duration": "5-10 weeks", "price": "485", "currency": "USD"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "description": "Long-term study programs",
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": null, "price": "390-430/week", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "335-420",
                    "description": "Twin or single room, shared bath, includes meals.",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "370-455",
                    "description": "Twin or single room, shared bath, includes meals.",
                    "supplements": null
                },
                {
                    "type": "Berkeley City Apartments",
                    "price_per_week": "670",
                    "description": "Single room, no meals.",
                    "supplements": null
                },
                {
                    "type": "Berkeley City Dorms",
                    "price_per_week": "400-445",
                    "description": "Twin or single room, shared bath, no meals.",
                    "supplements": null
                }
            ],
            "additional_fees": null
        }
    ],
    "terms": {
        "cancellation": "Start dates depend on selected course. Flexible start options are provided."
    }
}
2025-01-31 11:20:50,670 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:20:50,670 - PDFParser - INFO - Successfully processed page 13
2025-01-31 11:20:50,671 - PDFParser - INFO - Processing page 14/77
2025-01-31 11:20:50,704 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:20:50,705 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:20:50,710 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:20:50,710 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:21:04,768 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:21:04,768 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "AM Guaranteed Classes",
            "description": "Max charge for 12 weeks",
            "prices": [
                {
                    "price": "20",
                    "currency": "USD"
                }
            ]
        },
        {
            "name": "General Upgrade",
            "description": "1x90min K+ Club per week",
            "prices": [
                {
                    "price": "60",
                    "currency": "USD"
                }
            ]
        },
        {
            "name": "Elective Only Classes",
            "description": "Cost per week",
            "prices": [
                {
                    "price": "250",
                    "currency": "USD"
                }
            ]
        },
        {
            "name": "TOEFL Add On",
            "description": "If more than 5 weeks purchase; cost becomes $150/week",
            "prices": [
                {
                    "price": "175",
                    "currency": "USD"
                }
            ]
        },
        {
            "name": "K+ Learning Space and K+ Extra Access",
            "description": "12 months (post departure)",
            "prices": [
                {
                    "price": "140",
                    "currency": "USD"
                }
            ]
        },
        {
            "name": "K+ Learning Space and K+ Extra Access",
            "description": "3 months (post departure)",
            "prices": [
                {
                    "price": "70",
                    "currency": "USD"
                }
            ]
        },
        {
            "name": "Additional UPS Application to Partner Institution",
            "description": "",
            "prices": [
                {
                    "price": "125",
                    "currency": "USD"
                }
            ]
        }
    ],
    "accommodations": [
        {
            "type": "Homestay Special Diet",
            "price_per_week": "75",
            "currency": "USD",
            "description": "Per diet type"
        },
        {
            "type": "Luggage Retainer",
            "price_per_week": "80",
            "currency": "USD",
            "description": ""
        }
    ],
    "additional_fees": {
        "transfer_service_fees": {
            "Oakland International Airport": {
                "price": "220",
                "currency": "USD",
                "notes": "One way"
            },
            "San Francisco International Airport": {
                "price": "220",
                "currency": "USD",
                "notes": "One way"
            }
        },
        "general_fees": {
            "Application Fee": {
                "price": "200",
                "currency": "USD",
                "compulsory": true
            },
            "Courier Fee": {
                "price": "100",
                "currency": "USD",
                "optional": true
            },
            "Accommodation Placement Fee": {
                "price": "100",
                "currency": "USD",
                "compulsory": true
            },
            "Change Fee": {
                "price": "105",
                "currency": "USD",
                "notes": "If changes are made after arrival"
            },
            "University Placement Service": {
                "price": "250",
                "currency": "USD",
                "notes": "Free if student books 16+ weeks"
            },
            "Accommodation After-Hours Arrival Supplement": {
                "price": "50",
                "currency": "USD"
            },
            "Administration Fee": {
                "price": "50",
                "currency": "USD",
                "notes": "Applies to Americas only (except Brazil)"
            },
            "Booking with Confidence Plus": {
                "price": "72",
                "currency": "USD"
            },
            "Medical & Travel Insurance": {
                "price_per_week": "45",
                "currency": "USD"
            },
            "Residence Room Move Fee": {
                "price": "100",
                "currency": "USD",
                "notes": "Post-arrival room change fee"
            }
        },
        "peak_season_supplement": {
            "Homestay Peak Season Supplement (31 May - 23 Aug)": {
                "price_per_week": "35",
                "currency": "USD"
            },
            "Residence Peak Season Supplement (31 May - 23 Aug)": {
                "price_per_week": "35",
                "currency": "USD"
            },
            "Homestay End of Year Supplement (20 Dec - 27 Dec)": {
                "price": "80",
                "currency": "USD"
            }
        }
    }
}
2025-01-31 11:21:04,768 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:21:04,769 - PDFParser - INFO - Successfully processed page 14
2025-01-31 11:21:04,769 - PDFParser - INFO - Processing page 15/77
2025-01-31 11:21:04,789 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:21:04,791 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:21:04,796 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:21:04,796 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:21:20,590 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:21:20,590 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Santa Barbara",
            "country": "USA",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "Max. 12 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "410", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "395", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "370", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "370", "currency": "USD"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "460", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "440", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "420", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "390", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "510", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "485", "currency": "USD"},
                        {"duration": "12-19 weeks", "price": "460", "currency": "USD"},
                        {"duration": "20+ weeks", "price": "430", "currency": "USD"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "lessons_per_week": "Max. 10 weeks",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "510", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "485", "currency": "USD"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "20+ weeks", "price": "390", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "lessons_per_week": null,
                    "prices": [
                        {"duration": "20+ weeks", "price": "430", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "360",
                    "description": "Twin room, 14 Meals/week, Shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay",
                    "price_per_week": "390",
                    "description": "Single room, 14 Meals/week, Shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay",
                    "price_per_week": "360",
                    "description": "Single room, 7 Meals/week, Shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "395",
                    "description": "Twin room, 14 Meals/week, Shared bathroom",
                    "min_age": 16
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "425",
                    "description": "Single room, 14 Meals/week, Shared bathroom",
                    "min_age": 16
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "395",
                    "description": "Single room, 7 Meals/week, Shared bathroom",
                    "min_age": 16
                },
                {
                    "type": "La Brezza Apartments",
                    "price_per_week": "515",
                    "description": "Deluxe Twin room, No meals, Shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "La Brezza Apartments",
                    "price_per_week": "775",
                    "description": "Deluxe Single room, No meals, Shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "La Brezza Apartments",
                    "price_per_week": "410",
                    "description": "Twin room, No meals, Shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "La Brezza Apartments",
                    "price_per_week": "720",
                    "description": "Single room, No meals, Shared bathroom",
                    "min_age": 18
                }
            ],
            "additional_fees": null
        }
    ],
    "terms": {
        "cancellation": "Only available to students who book and travel together"
    }
}
2025-01-31 11:21:20,591 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:21:20,591 - PDFParser - INFO - Successfully processed page 15
2025-01-31 11:21:20,591 - PDFParser - INFO - Processing page 16/77
2025-01-31 11:21:20,622 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:21:20,625 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:21:20,630 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:21:20,630 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:21:43,063 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:21:43,063 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "tuition_upgrades_and_add_ons": [
                {
                    "name": "Virtual Internship",
                    "price": "$1,095",
                    "currency": "USD"
                },
                {
                    "name": "Intensive Upgrade (6 hours/8 lessons per week)",
                    "price": "$120",
                    "currency": "USD"
                },
                {
                    "name": "AM Guaranteed Classes (Max charge 12 weeks)",
                    "price": "$20",
                    "currency": "USD"
                },
                {
                    "name": "General Upgrade (1x90min K+ Club pw)",
                    "price": "$60",
                    "currency": "USD"
                },
                {
                    "name": "Elective Only Classes",
                    "price": "$250",
                    "currency": "USD"
                },
                {
                    "name": "TOEFL Add On (if more than 5 wks purchased, cost becomes 150pw)",
                    "price": "$175",
                    "currency": "USD"
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access (12 months, Post Departure)",
                    "price": "$140",
                    "currency": "USD"
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access 3 months (Post Departure)",
                    "price": "$70",
                    "currency": "USD"
                },
                {
                    "name": "Additional UPS Application to Partner Institution",
                    "price": "$125",
                    "currency": "USD"
                }
            ],
            "private_lessons": [
                {
                    "lessons_range": "1-4",
                    "prices": {
                        "One-to-One": "$90",
                        "Two-to-One": "$60",
                        "Three-to-One": "$50",
                        "Four-to-One": "$45",
                        "currency": "USD"
                    }
                },
                {
                    "lessons_range": "5-9",
                    "prices": {
                        "One-to-One": "$85",
                        "Two-to-One": "$55",
                        "Three-to-One": "$45",
                        "Four-to-One": "$40",
                        "currency": "USD"
                    }
                },
                {
                    "lessons_range": "10-19",
                    "prices": {
                        "One-to-One": "$80",
                        "Two-to-One": "$50",
                        "Three-to-One": "$40",
                        "Four-to-One": "$35",
                        "currency": "USD"
                    }
                },
                {
                    "lessons_range": "20+",
                    "prices": {
                        "One-to-One": "$75",
                        "Two-to-One": "$45",
                        "Three-to-One": "$35",
                        "Four-to-One": "$30",
                        "currency": "USD"
                    }
                }
            ]
        }
    ],
    "accommodations": [
        {
            "supplements": [
                {
                    "type": "Homestay Special Diet",
                    "price": "$75 per week",
                    "currency": "USD"
                },
                {
                    "type": "Luggage Retainer",
                    "price": "$80 per week",
                    "currency": "USD"
                }
            ],
            "peak_season_supplements": [
                {
                    "type": "Homestay Peak Season Supplement",
                    "season": "31 May - 23 August",
                    "price": "$35 per week",
                    "currency": "USD"
                },
                {
                    "type": "Residence Peak Season Supplement",
                    "season": "31 May - 23 August",
                    "price": "$35 per week",
                    "currency": "USD"
                },
                {
                    "type": "Homestay End of Year Supplement",
                    "season": "20 December - 27 December",
                    "price": "$80",
                    "currency": "USD"
                }
            ]
        }
    ],
    "additional_fees": [
        {
            "type": "Application Fee",
            "price": "$200",
            "currency": "USD",
            "notes": "Compulsory"
        },
        {
            "type": "Courier Fee",
            "price": "$100",
            "currency": "USD",
            "notes": "Optional (if used)"
        },
        {
            "type": "Accommodation Placement Fee",
            "price": "$100",
            "currency": "USD",
            "notes": "Compulsory if accommodation is purchased"
        },
        {
            "type": "Change Fee",
            "price": "$105",
            "currency": "USD",
            "notes": "If charges are made after arrival"
        },
        {
            "type": "University Placement Service",
            "price": "$250",
            "currency": "USD",
            "notes": "If used, or free if student books 16+ weeks"
        },
        {
            "type": "Accommodation After-hours Arrival Supplement",
            "price": "$50",
            "currency": "USD"
        },
        {
            "type": "Administration Fee (Americas only except Brazil)",
            "price": "$50",
            "currency": "USD"
        },
        {
            "type": "Booking with Confidence Plus",
            "price": "$72",
            "currency": "USD"
        },
        {
            "type": "Medical & Travel Insurance",
            "price": "$45 per week",
            "currency": "USD"
        },
        {
            "type": "Residence Room Move Fee",
            "price": "$100",
            "currency": "USD",
            "notes": "Post Arrival Room Change fee"
        }
    ],
    "terms": []
}
2025-01-31 11:21:43,063 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:21:43,063 - PDFParser - INFO - Successfully processed page 16
2025-01-31 11:21:43,063 - PDFParser - INFO - Processing page 17/77
2025-01-31 11:21:43,090 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:21:43,092 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:21:43,097 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:21:43,097 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:22:01,098 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:22:01,098 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "395", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "380", "currency": "CAD"},
                        {"duration": "12-19 weeks", "price": "360", "currency": "CAD"},
                        {"duration": "20+ weeks", "price": "325", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "450", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "425", "currency": "CAD"},
                        {"duration": "12-19 weeks", "price": "405", "currency": "CAD"},
                        {"duration": "20+ weeks", "price": "360", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "495", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "475", "currency": "CAD"},
                        {"duration": "12-19 weeks", "price": "450", "currency": "CAD"},
                        {"duration": "20+ weeks", "price": "395", "currency": "CAD"}
                    ]
                },
                {
                    "name": "IELTS Part-time",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "450", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "425", "currency": "CAD"},
                        {"duration": "12-19 weeks", "price": "405", "currency": "CAD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "335",
                    "description": "Twin room, shared bath, 14 meals per week, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "365",
                    "description": "Single room, shared bath, 14 meals per week, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Parkside Student Residence",
                    "price_per_week": "765",
                    "description": "Single room, shared bath, 21 meals per week, minimum age 16",
                    "supplements": null
                },
                {
                    "type": "The Parker Residence",
                    "price_per_week": "465",
                    "description": "Twin room, no meals, shared bath, minimum age 18",
                    "supplements": null
                }
            ],
            "additional_fees": null
        }
    ],
    "terms": null
}
2025-01-31 11:22:01,098 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:22:01,098 - PDFParser - INFO - Successfully processed page 17
2025-01-31 11:22:01,098 - PDFParser - INFO - Processing page 18/77
2025-01-31 11:22:01,128 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:22:01,131 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:22:01,135 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:22:01,136 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:22:13,233 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:22:13,234 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Multiple Locations",
            "country": "Canada",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Virtual Internship",
                    "lessons_per_week": "Not specified",
                    "description": "A program offering internship experience.",
                    "prices": [
                        {"cost": "1,550", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Intensive Upgrade",
                    "lessons_per_week": "6 hours/8 lessons per week",
                    "description": "Additional intensive lessons.",
                    "prices": [
                        {"cost": "105", "currency": "CAD"}
                    ]
                },
                {
                    "name": "AM Guaranteed Classes",
                    "lessons_per_week": "Not specified",
                    "description": "Morning guaranteed classes for a maximum duration of 12 weeks.",
                    "prices": [
                        {"cost": "20", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Elective Only Classes",
                    "lessons_per_week": "Not specified",
                    "description": "Elective classes in the afternoon.",
                    "prices": [
                        {"cost": "255", "currency": "CAD"}
                    ]
                },
                {
                    "name": "General Upgrade (1x90min K+ Club per Week)",
                    "lessons_per_week": "Not specified",
                    "description": "K+ Club sessions once a week.",
                    "prices": [
                        {"cost": "60", "currency": "CAD"}
                    ]
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access (12 months - Post Departure)",
                    "lessons_per_week": "Not specified",
                    "description": "Access to learning materials for 12 months.",
                    "prices": [
                        {"cost": "160", "currency": "CAD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay Special Diet",
                    "price_per_week": "60",
                    "description": "Diet type specific accommodations.",
                    "supplements": {}
                },
                {
                    "type": "Luggage Retainer",
                    "price_per_week": "80",
                    "description": "Storage for luggage on a weekly basis.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "application_fee": "200 CAD",
                "accommodation_placement_fee": "270 CAD",
                "materials_fee": "10 CAD per week",
                "medical_insurance": "25 CAD per week",
                "custodianship_fee": "105 CAD",
                "residence_room_move_fee": "100 CAD",
                "administration_fee": "75 CAD"
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified"
    }
}
2025-01-31 11:22:13,234 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:22:13,234 - PDFParser - INFO - Successfully processed page 18
2025-01-31 11:22:13,234 - PDFParser - INFO - Processing page 19/77
2025-01-31 11:22:13,278 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:22:13,282 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:22:13,287 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:22:13,287 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:22:31,412 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:22:31,412 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "Not specified",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "Not specified",
                    "description": "Available for flexible lengths and every Monday start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "395", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "380", "currency": "CAD"},
                        {"duration": "12-19 weeks", "price": "360", "currency": "CAD"},
                        {"duration": "20+ weeks", "price": "325", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "lessons_per_week": "Not specified",
                    "description": "Available for flexible lengths and every Monday start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "450", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "425", "currency": "CAD"},
                        {"duration": "12-19 weeks", "price": "405", "currency": "CAD"},
                        {"duration": "20+ weeks", "price": "380", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": "Not specified",
                    "description": "Available for flexible lengths and every Monday start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "495", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "475", "currency": "CAD"},
                        {"duration": "12-19 weeks", "price": "450", "currency": "CAD"},
                        {"duration": "20+ weeks", "price": "395", "currency": "CAD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "335",
                    "description": "Twin, shared bath, includes 14 meals per week. Minimum age 18.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                },
                {
                    "type": "Homestay",
                    "price_per_week": "365",
                    "description": "Single, shared bath, includes 14 meals per week. Minimum age 18.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                },
                {
                    "type": "Homestay",
                    "price_per_week": "490",
                    "description": "Single, private bath, includes 14 meals per week. Minimum age 18.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                },
                {
                    "type": "Parkside Student Residence",
                    "price_per_week": "765",
                    "description": "Single, shared bath, includes 21 meals per week. Minimum age 16.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                },
                {
                    "type": "The Parker Residence",
                    "price_per_week": "465",
                    "description": "Twin, shared bath, no meals. Minimum age 18.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                },
                {
                    "type": "The Parker Residence",
                    "price_per_week": "515",
                    "description": "Economy Single, shared bath, no meals. Minimum age 18.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                },
                {
                    "type": "The Parker Residence",
                    "price_per_week": "550",
                    "description": "Single, shared bath, no meals. Minimum age 18.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                },
                {
                    "type": "The Parker Residence",
                    "price_per_week": "770",
                    "description": "Single, private bath, no meals. Minimum age 18.",
                    "supplements": {
                        "peak_season": "35 per week (May 31 - Aug 23)"
                    }
                }
            ],
            "additional_fees": {
                "registration": "200 CAD",
                "accommodation_placement": "270 CAD",
                "courier": "90 CAD (optional)",
                "material_fee": "10 CAD per week",
                "medical_insurance": "25 CAD per week"
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified. Refer to school policy."
    }
}
2025-01-31 11:22:31,412 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:22:31,412 - PDFParser - INFO - Successfully processed page 19
2025-01-31 11:22:31,413 - PDFParser - INFO - Processing page 20/77
2025-01-31 11:22:31,436 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:22:31,438 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:22:31,443 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:22:31,443 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:23:00,038 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:23:00,038 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": "Not provided in the document",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": null,
                    "description": "English language improvement",
                    "prices": [
                        { "duration": "1-4 weeks", "price": "CAD 395", "currency": "CAD" },
                        { "duration": "5-11 weeks", "price": "CAD 380", "currency": "CAD" },
                        { "duration": "12-19 weeks", "price": "CAD 355", "currency": "CAD" },
                        { "duration": "20+ weeks", "price": "CAD 320", "currency": "CAD" }
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": null,
                    "description": "Focused language practice",
                    "prices": [
                        { "duration": "1-4 weeks", "price": "CAD 450", "currency": "CAD" },
                        { "duration": "5-11 weeks", "price": "CAD 425", "currency": "CAD" },
                        { "duration": "12-19 weeks", "price": "CAD 405", "currency": "CAD" },
                        { "duration": "20+ weeks", "price": "CAD 355", "currency": "CAD" }
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": "In-depth language training",
                    "prices": [
                        { "duration": "1-4 weeks", "price": "CAD 495", "currency": "CAD" },
                        { "duration": "5-11 weeks", "price": "CAD 475", "currency": "CAD" },
                        { "duration": "12-19 weeks", "price": "CAD 450", "currency": "CAD" },
                        { "duration": "20+ weeks", "price": "CAD 395", "currency": "CAD" }
                    ]
                },
                {
                    "name": "Cambridge General English (B2, C1) - 12 weeks",
                    "lessons_per_week": null,
                    "description": "Cambridge-preparation courses",
                    "prices": [
                        { "duration": "12 weeks", "price": "CAD 450", "currency": "CAD" }
                    ]
                },
                {
                    "name": "IELTS Pathways",
                    "lessons_per_week": null,
                    "description": "IELTS preparation program",
                    "prices": [
                        { "duration": "1-4 weeks", "price": "CAD 495", "currency": "CAD" },
                        { "duration": "5-11 weeks", "price": "CAD 475", "currency": "CAD" },
                        { "duration": "12-19 weeks", "price": "CAD 450", "currency": "CAD" },
                        { "duration": "20+ weeks", "price": "CAD 395", "currency": "CAD" }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "description": "Stay with a local family",
                    "options": [
                        {
                            "room_type": "Twin",
                            "meals": "14 meals per week",
                            "bathroom_type": "Shared",
                            "min_age": "18",
                            "price_per_week": "CAD 335"
                        },
                        {
                            "room_type": "Single",
                            "meals": "14 meals per week",
                            "bathroom_type": "Shared",
                            "min_age": "18",
                            "price_per_week": "CAD 365"
                        },
                        {
                            "room_type": "Under 18 Twin",
                            "meals": "14 meals per week",
                            "bathroom_type": "Shared",
                            "min_age": "16",
                            "price_per_week": "CAD 370"
                        },
                        {
                            "room_type": "Under 18 Single",
                            "meals": "14 meals per week",
                            "bathroom_type": "Shared",
                            "min_age": "16",
                            "price_per_week": "CAD 400"
                        }
                    ]
                },
                {
                    "type": "King Edward Townhouse",
                    "description": "Shared townhouse accommodation",
                    "options": [
                        {
                            "room_type": "Twin",
                            "meals": "No meals",
                            "bathroom_type": "Shared",
                            "min_age": "18",
                            "price_per_week": "CAD 515"
                        },
                        {
                            "room_type": "Single",
                            "meals": "No meals",
                            "bathroom_type": "Shared",
                            "min_age": "18",
                            "price_per_week": "CAD 615"
                        }
                    ]
                },
                {
                    "type": "Viva Tower Apartments",
                    "description": "Shared apartment accommodation",
                    "options": [
                        {
                            "room_type": "Twin",
                            "meals": "No meals",
                            "bathroom_type": "Shared",
                            "min_age": "18",
                            "price_per_week": "CAD 515"
                        },
                        {
                            "room_type": "Single",
                            "meals": "No meals",
                            "bathroom_type": "Shared",
                            "min_age": "18",
                            "price_per_week": "CAD 615"
                        }
                    ]
                }
            ],
            "additional_fees": {
                "registration_fee": "Not provided in the document"
            }
        }
    ],
    "terms": {
        "cancellation_policy": "Not provided in the document"
    }
}
2025-01-31 11:23:00,038 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:23:00,038 - PDFParser - INFO - Successfully processed page 20
2025-01-31 11:23:00,038 - PDFParser - INFO - Processing page 21/77
2025-01-31 11:23:00,073 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:23:00,075 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:23:00,080 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:23:00,080 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:23:52,402 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:23:52,402 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Virtual Internship",
            "price": {
                "amount": 1550,
                "currency": "CAD"
            }
        },
        {
            "name": "Intensive Upgrade",
            "lessons_per_week": 6,
            "price": {
                "amount": 105,
                "currency": "CAD"
            }
        },
        {
            "name": "AM Guaranteed Classes",
            "max_duration": "12 weeks",
            "price": {
                "amount": 20,
                "currency": "CAD"
            }
        },
       {
           "name": "Option lec",
		   
		   
			"Interactive s"
   			   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
			   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
		   
       
   	:           
  
  
 

   

   


  


 


  
  
 


 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
  
	 
 
	 
	  "boostable," 
	  	  	  	  	," amounts9lists- l10 designed.. clubs==},,updatesERNEL,made--->items;;;type venture---fund>>K.engagem,.stream.unlink."	
	
	
	:
	[0 ] 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 

          
		 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
	 
	
 
 
 
 
 
 
 


 
 
 



 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 


 
 
 




 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 



 
 


 









 
}


	  





	





	



	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

	 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	












			
			
	]}


	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

2025-01-31 11:23:52,403 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:23:52,403 - PDFParser - INFO - Successfully processed page 21
2025-01-31 11:23:52,403 - PDFParser - INFO - Processing page 22/77
2025-01-31 11:23:52,446 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:23:52,448 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:23:52,453 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:23:52,454 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:24:28,084 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:24:28,084 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Bath",
            "country": "United Kingdom",
            "address": "Not specified",
            "courses": [
                {
                    "name": "General English",
                    "duration_options": [
                        {"weeks": "1-4", "price_per_week": 315, "currency": "GBP"},
                        {"weeks": "5-11", "price_per_week": 310, "currency": "GBP"},
                        {"weeks": "12-19", "price_per_week": 280, "currency": "GBP"},
                        {"weeks": "20+", "price_per_week": 235, "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "duration_options": [
                        {"weeks": "1-4", "price_per_week": 340, "currency": "GBP"},
                        {"weeks": "5-11", "price_per_week": 335, "currency": "GBP"},
                        {"weeks": "12-19", "price_per_week": 300, "currency": "GBP"},
                        {"weeks": "20+", "price_per_week": 260, "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "duration_options": [
                        {"weeks": "1-4", "price_per_week": 400, "currency": "GBP"},
                        {"weeks": "5-11", "price_per_week": 390, "currency": "GBP"},
                        {"weeks": "12-19", "price_per_week": 350, "currency": "GBP"},
                        {"weeks": "20+", "price_per_week": 300, "currency": "GBP"}
                    ]
                },
                {
                    "name": "Business Supplementary (subject to availability)",
                    "duration_options": [
                        {"weeks": "1-4", "price_per_week": 400, "currency": "GBP"},
                        {"weeks": "5-11", "price_per_week": 390, "currency": "GBP"},
                        {"weeks": "12-19", "price_per_week": 350, "currency": "GBP"},
                        {"weeks": "20+", "price_per_week": 300, "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Supplementary",
                    "duration_options": [
                        {"weeks": "1-4", "price_per_week": 400, "currency": "GBP"},
                        {"weeks": "5-11", "price_per_week": 390, "currency": "GBP"},
                        {"weeks": "12-19", "price_per_week": 350, "currency": "GBP"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "duration_options": [
                        {"weeks": "20+", "price_per_week": 260, "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "duration_options": [
                        {"weeks": "20+", "price_per_week": 300, "currency": "GBP"}
                    ]
                },
                {
                    "name": "50+ Languages Abroad",
                    "duration_options": [
                        {"weeks": "1-4", "price_per_week": 400, "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "room_type": "Twin",
                            "meals_per_week": "14 Meals/wk",
                            "bath": "Shared",
                            "minimum_age": 18,
                            "price_per_week": 205,
                            "currency": "GBP"
                        },
                        {
                            "room_type": "Single",
                            "meals_per_week": "14 Meals/wk",
                            "bath": "Shared",
                            "minimum_age": 18,
                            "price_per_week": 225,
                            "currency": "GBP"
                        },
                        {
                            "room_type": "Single",
                            "meals_per_week": "14 Meals/wk",
                            "bath": "Private",
                            "minimum_age": 18,
                            "price_per_week": 285,
                            "currency": "GBP"
                        }
                    ]
                },
                {
                    "type": "Homestay (Under 18)",
                    "options": [
                        {
                            "room_type": "Under 18 Twin",
                            "meals_per_week": "14 Meals/wk",
                            "bath": "Shared",
                            "minimum_age": 16,
                            "price_per_week": 225,
                            "currency": "GBP"
                        },
                        {
                            "room_type": "Under 18 Single",
                            "meals_per_week": "14 Meals/wk",
                            "bath": "Shared",
                            "minimum_age": 16,
                            "price_per_week": 245,
                            "currency": "GBP"
                        },
                        {
                            "room_type": "Under 18 Single",
                            "meals_per_week": "14 Meals/wk",
                            "bath": "Private",
                            "minimum_age": 16,
                            "price_per_week": 305,
                            "currency": "GBP"
                        }
                    ]
                },
                {
                    "type": "Student Castle Studio",
                    "options": [
                        {
                            "room_type": "Studio",
                            "meals_per_week": "No Meals",
                            "bath": "Private",
                            "minimum_age": 18,
                            "price_per_week": 490,
                            "currency": "GBP"
                        }
                    ]
                }
            ],
            "additional_fees": {
                "application_fee": {"amount": 135, "currency": "GBP", "description": "Compulsory"},
                "courier_fee": {"amount": 40, "currency": "GBP", "description": "Optional if used"},
                "accommodation_placement_fee": {"amount": 35, "currency": "GBP", "description": "Compulsory if accommodation is purchased"},
                "change_fee": {"amount": 70, "currency": "GBP", "description": "If changes are made after arrival"},
                "medical_and_travel_insurance": {"amount": 10, "currency": "GBP", "description": "Per week"},
                "administration_fee": {"amount": 40, "currency": "GBP", "description": "For Americans only - except Brazil"},
                "booking_with_confidence_plus": {"amount": 60, "currency": "GBP"},
                "residence_room_move_fee": {"amount": 100, "currency": "GBP", "description": "Post Arrival Room Change Fee"}
            }
        }
    ],
    "terms": null
}
2025-01-31 11:24:28,084 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:24:28,084 - PDFParser - INFO - Successfully processed page 22
2025-01-31 11:24:28,084 - PDFParser - INFO - Processing page 23/77
2025-01-31 11:24:28,107 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:24:28,111 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:24:28,116 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:24:28,116 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:24:40,737 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:24:40,738 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Bournemouth",
            "country": "United Kingdom",
            "address": "Not provided in the image",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "Not specified",
                    "description": "Flexible length courses starting every Monday or Tuesday (if Monday is a public holiday)",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "280", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "275", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "245", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "215", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": "Not specified",
                    "description": "Flexible length courses starting every Monday or Tuesday (if Monday is a public holiday)",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "305", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "300", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "270", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "235", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge General (B2, C1) - 12 weeks",
                    "lessons_per_week": "Not specified",
                    "description": "Starts on set dates for preparation for Cambridge First and Advanced exams.",
                    "prices": [
                        {"duration": "12 weeks", "price": "245", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS (Supplementary, Intensive)",
                    "lessons_per_week": "Not specified",
                    "description": "Flexible start dates and intensive preparation for IELTS exams.",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "360", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "350", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "315", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "270", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "180-275",
                    "description": "Includes twin and single rooms with 14 meals per week. Shared or private baths and different minimum age requirements.",
                    "supplements": null
                },
                {
                    "type": "Host Residence",
                    "price_per_week": "315",
                    "description": "Single room with no meals and a private bath. Minimum age is 18.",
                    "supplements": null
                },
                {
                    "type": "Lansdowne Point",
                    "price_per_week": "305",
                    "description": "Single room with no meals and a private bath. Minimum age is 18.",
                    "supplements": null
                },
                {
                    "type": "Oxford Point Residence",
                    "price_per_week": "315",
                    "description": "Single room with no meals and a private bath. Minimum age is 18.",
                    "supplements": null
                }
            ],
            "additional_fees": null
        }
    ],
    "terms": {
        "cancellation": "Not specified in the image"
    }
}
2025-01-31 11:24:40,738 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:24:40,738 - PDFParser - INFO - Successfully processed page 23
2025-01-31 11:24:40,738 - PDFParser - INFO - Processing page 24/77
2025-01-31 11:24:40,768 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:24:40,772 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:24:40,777 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:24:40,777 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:25:09,754 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:25:09,754 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": null,
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "Tuition Upgrades & Add-Ons",
                    "details": [
                        {"name": "Virtual Internship", "price": 910, "currency": "GBP"},
                        {"name": "Super Intensive Upgrade (9 hours/12 lessons per week)", "price": 140, "currency": "GBP"},
                        {"name": "AM Guaranteed Classes (Max charge 12 weeks)", "price": 100, "currency": "GBP"},
                        {"name": "K+ Learning Space and K+ Extra Access 12 months (Post Departure)", "price": 50, "currency": "GBP"},
                        {"name": "K+ Learning Space and K+ Extra Access 3 months (Post Departure)", "price": 50, "currency": "GBP"}
                    ]
                },
                {
                    "name": "Private Lessons",
                    "details": [
                        {"lessons": "1-4", "prices": {"One-to-One": 110, "Two-to-One": 90, "Three-to-One": 80, "Four-to-One": 75}, "currency": "GBP"},
                        {"lessons": "5-9", "prices": {"One-to-One": 105, "Two-to-One": 85, "Three-to-One": 70, "Four-to-One": 70}, "currency": "GBP"},
                        {"lessons": "10-19", "prices": {"One-to-One": 100, "Two-to-One": 80, "Three-to-One": 70, "Four-to-One": 65}, "currency": "GBP"},
                        {"lessons": "20+", "prices": {"One-to-One": 95, "Two-to-One": 75, "Three-to-One": 65, "Four-to-One": 60}, "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "supplements": [
                        {"type": "Special Diet (per week)", "price": 35, "currency": "GBP"},
                        {"type": "Luggage Retainer (per week)", "price": 60, "currency": "GBP"},
                        {"type": "Close To School (up to 45 mins, subject to availability, per week)", "price": 55, "currency": "GBP"}
                    ]
                }
            ],
            "additional_fees": {
                "transfer_service_fees": [
                    {"destination": "Heathrow Airport", "price": 275, "currency": "GBP", "notes": "Taxi (one way)"},
                    {"destination": "Gatwick Airport", "price": 310, "currency": "GBP", "notes": "Taxi (one way)"},
                    {"destination": "Southampton Airport", "price": 180, "currency": "GBP", "notes": "Taxi (one way)"},
                    {"destination": "Luton Airport", "price": 385, "currency": "GBP", "notes": "Taxi (one way)"},
                    {"destination": "Bournemouth Airport", "price": 125, "currency": "GBP", "notes": "Taxi (one way)"},
                    {"destination": "Central London Transfer", "price": 420, "currency": "GBP", "notes": "Taxi (one way)"}
                ],
                "general_fees": [
                    {"item": "Application Fee", "price": 135, "currency": "GBP", "notes": "Compulsory"},
                    {"item": "Courier Fee", "price": 40, "currency": "GBP", "notes": "Optional (if used)"},
                    {"item": "Accommodation Placement Fee", "price": 35, "currency": "GBP", "notes": "Compulsory if accommodation is purchased"},
                    {"item": "Change Fee", "price": 70, "currency": "GBP", "notes": "If changes are made after arrival"},
                    {"item": "Medical & Travel Insurance", "price": 10, "currency": "GBP", "notes": "Per week"},
                    {"item": "Administration Fee (Americas only - except Brazil)", "price": 40, "currency": "GBP"},
                    {"item": "Booking with Confidence Plus", "price": 60, "currency": "GBP"},
                    {"item": "Residence Room Move Fee", "price": 100, "currency": "GBP", "notes": "Post Arrival Room Change fee"}
                ],
                "peak_season_supplements": [
                    {"type": "Tuition (per week, 16 Jun - 22 Aug)", "price": 20, "currency": "GBP"},
                    {"type": "Homestay (per week, 31 May - 23 Aug)", "price": 30, "currency": "GBP"},
                    {"type": "Residence (per week, 31 May - 23 Aug)", "price": 35, "currency": "GBP"},
                    {"type": "Homestay End of Year (20 Dec - 27 Dec)", "price": 65, "currency": "GBP"}
                ]
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 11:25:09,755 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:25:09,755 - PDFParser - INFO - Successfully processed page 24
2025-01-31 11:25:09,755 - PDFParser - INFO - Processing page 25/77
2025-01-31 11:25:09,801 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:25:09,805 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:25:09,810 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:25:09,810 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:25:34,402 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:25:34,403 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Cambridge",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "General English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "330", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "325", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "295", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "245", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "360", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "355", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "315", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "270", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "415", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "405", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "415", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "405", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS (Intensive)",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "415", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "405", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "prices": [
                        {"duration": "Academic Semester", "price": "-", "currency": "GBP"},
                        {"duration": "Academic Year", "price": "315", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "room_type": "Twin",
                            "meals_per_week": 14,
                            "bath": "Shared",
                            "min_age": 18,
                            "price_per_week": 220
                        },
                        {
                            "room_type": "Single (Shared Bath)",
                            "meals_per_week": 14,
                            "bath": "Shared",
                            "min_age": 18,
                            "price_per_week": 245
                        },
                        {
                            "room_type": "Single (Private Bath)",
                            "meals_per_week": 14,
                            "bath": "Private",
                            "min_age": 18,
                            "price_per_week": 285
                        },
                        {
                            "room_type": "Under 18 Twin",
                            "meals_per_week": 14,
                            "bath": "Shared",
                            "min_age": 16,
                            "price_per_week": 240
                        },
                        {
                            "room_type": "Under 18 Single (Shared Bath)",
                            "meals_per_week": 14,
                            "bath": "Shared",
                            "min_age": 16,
                            "price_per_week": 265
                        },
                        {
                            "room_type": "Under 18 Single (Private Bath)",
                            "meals_per_week": 14,
                            "bath": "Private",
                            "min_age": 16,
                            "price_per_week": 305
                        }
                    ]
                },
                {
                    "type": "Collegiate Studio",
                    "options": [
                        {
                            "room_type": "Studio",
                            "meals_per_week": 0,
                            "bath": "Private",
                            "min_age": 18,
                            "price_per_week": 425
                        }
                    ]
                },
                {
                    "type": "Student Castle Cambridge",
                    "options": [
                        {
                            "room_type": "Studio",
                            "meals_per_week": 0,
                            "bath": "Private",
                            "min_age": 18,
                            "price_per_week": 365
                        }
                    ]
                }
            ],
            "additional_fees": {
                "application_fee": "135 GBP",
                "courier_fee": "40 GBP",
                "accommodation_placement_fee": "35 GBP",
                "change_fee": "70 GBP",
                "medical_travel_insurance": "10 GBP/week",
                "administration_fee": "100 GBP",
                "booking_confidence_plus": "60 GBP",
                "residence_room_move_fee": "100 GBP"
            },
            "transfer_service_fees": [
                {"destination": "Heathrow Airport", "price": 310, "currency": "GBP"},
                {"destination": "Gatwick Airport", "price": 365, "currency": "GBP"},
                {"destination": "Luton Airport", "price": 280, "currency": "GBP"},
                {"destination": "Stansted Airport", "price": 180, "currency": "GBP"},
                {"destination": "London City Airport", "price": 355, "currency": "GBP"},
                {"destination": "St Pancras International Station", "price": 355, "currency": "GBP"},
                {"destination": "Central London Transfer", "price": 355, "currency": "GBP"}
            ],
            "tuition_upgrades": [
                {"name": "Virtual Internship", "price": 910, "currency": "GBP"},
                {"name": "Super Intensive Upgrade (9 additional hours)", "price": 150, "currency": "GBP"},
                {"name": "AM Guaranteed Classes (Max charge 12 weeks)", "price": 20, "currency": "GBP"},
                {"name": "K+ Learning Space Access (12 months)", "price": 100, "currency": "GBP"},
                {"name": "K+ Extra Access (3 months post departure)", "price": 50, "currency": "GBP"}
            ]
        }
    ],
    "terms": {
        "cancellation": "14-day notice required for cancellation without penalty.",
        "peak_season_supplement": {
            "tuition": "20 GBP per week",
            "homestay": "35 GBP per week",
            "residence": "35 GBP per week",
            "end_of_year_homestay": "20 GBP per week"
        }
    }
}
2025-01-31 11:25:34,403 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:25:34,403 - PDFParser - INFO - Successfully processed page 25
2025-01-31 11:25:34,403 - PDFParser - INFO - Processing page 26/77
2025-01-31 11:25:34,430 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:25:34,433 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:25:34,442 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:25:34,442 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:25:52,863 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:25:52,863 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "General English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£310", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£235", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£340", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£300", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£255", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£400", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£300", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£400", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£300", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Edinburgh Festival Course",
                    "prices": [
                        {"duration": "1-3 weeks", "price": "£400 per week", "currency": "GBP"}
                    ],
                    "start_dates": [
                        {"month": "August", "dates": ["4th", "11th", "18th"]}
                    ]
                },
                {
                    "name": "IELTS (Supplementary, Intensive)",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£400", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£300", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£200",
                    "description": "Twin room, 14 meals per week, shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£230",
                    "description": "Single room, 14 meals per week, shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£280",
                    "description": "Single room, 14 meals per week, private bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£185",
                    "description": "Single room, no meals, shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£220",
                    "description": "Twin room, 14 meals per week, shared bathroom",
                    "min_age": 16
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£260",
                    "description": "Single room, 14 meals per week, shared bathroom",
                    "min_age": 16
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£285",
                    "description": "Single room, 14 meals per week, private bathroom",
                    "min_age": 16
                },
                {
                    "type": "Arran House",
                    "price_per_week": "£340",
                    "description": "Single room, no meals, private bathroom",
                    "min_age": 18
                },
                {
                    "type": "Fountainbridge",
                    "price_per_week": "£365",
                    "description": "Single room, no meals, private bathroom",
                    "min_age": 18,
                    "notes": "Minimum booking of two weeks"
                },
                {
                    "type": "Haymarket",
                    "price_per_week": "£400",
                    "description": "Studio, no meals, private bathroom",
                    "min_age": 18
                }
            ]
        }
    ],
    "terms": {
        "general_notes": "Twin rooms only available to students who book and travel together. Minimum booking of two weeks for Fountainbridge."
    }
}
2025-01-31 11:25:52,863 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:25:52,863 - PDFParser - INFO - Successfully processed page 26
2025-01-31 11:25:52,863 - PDFParser - INFO - Processing page 27/77
2025-01-31 11:25:52,890 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:25:52,892 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:25:52,896 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:25:52,896 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:26:03,026 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:26:03,027 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Private Lessons",
            "details": [
                {"number_of_lessons": "1-4", "price": "110 GBP"},
                {"number_of_lessons": "5-9", "price": "105 GBP"},
                {"number_of_lessons": "10-19", "price": "100 GBP"},
                {"number_of_lessons": "20+", "price": "95 GBP"}
            ]
        },
        {
            "name": "Tuition Upgrades & Add-ons",
            "details": [
                {"name": "Virtual Internship", "price": "910 GBP"},
                {"name": "AM Guaranteed Classes (max charge 12 weeks)", "price": "20 GBP"},
                {"name": "K+ Learning Space and K+ Extra Access 12 months (post departure)", "price": "100 GBP"},
                {"name": "K+ Learning Space and K+ Extra Access 3 months (post departure)", "price": "50 GBP"}
            ]
        }
    ],
    "accommodations": [
        {
            "type": "Homestay",
            "addon": {
                "special_diet_per_week": "35 GBP",
                "close_to_school_per_week": "55 GBP"
            },
            "peak_season_supplements": [
                {"type": "Peak tuition (per week, 16 Jun - 22 Aug)", "price": "20 GBP"},
                {"type": "Homestay (per week, 31 May - 23 Aug)", "price": "30 GBP"},
                {"type": "Homestay (20 Dec - 27 Dec)", "price": "65 GBP"}
            ]
        }
    ],
    "service_fees": [
        {
            "type": "Transfer Service Fees",
            "details": [
                {"destination": "Edinburgh Airport", "price_one_way": "145 GBP", "notes": "Taxi"},
                {"destination": "Glasgow Airport", "price_one_way": "400 GBP", "notes": "Taxi"}
            ]
        },
        {
            "type": "General Fees",
            "details": [
                {"name": "Application Fee", "price": "135 GBP", "notes": "Compulsory"},
                {"name": "Courier Fee", "price": "40 GBP", "notes": "Optional"},
                {"name": "Accommodation Placement Fee", "price": "35 GBP", "notes": "Charged if accommodation is purchased"},
                {"name": "Change Fee", "price": "70 GBP"},
                {"name": "Medical & Travel Insurance", "price_per_week": "10 GBP"},
                {"name": "Administration Fee (Americas only, except Brazil)", "price": "40 GBP"},
                {"name": "Booking with Confidence Plus", "price": "60 GBP"},
                {"name": "Residence Room Move Fee", "price": "100 GBP", "notes": "Post-arrival room change fee"}
            ]
        }
    ],
    "terms": {
        "two_way_transfer_discount_notes": "10% discount for two-way transfer. Two students who book and travel together receive a 25% discount each."
    }
}
2025-01-31 11:26:03,027 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:26:03,027 - PDFParser - INFO - Successfully processed page 27
2025-01-31 11:26:03,027 - PDFParser - INFO - Processing page 28/77
2025-01-31 11:26:03,054 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:26:03,056 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:26:03,061 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:26:03,061 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:26:20,154 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:26:20,154 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Liverpool",
            "country": "United Kingdom",
            "address": "",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        { "duration": "1-4 weeks", "price": "GBP 290", "currency": "GBP" },
                        { "duration": "5-11 weeks", "price": "GBP 285", "currency": "GBP" },
                        { "duration": "12-19 weeks", "price": "GBP 250", "currency": "GBP" },
                        { "duration": "20+ weeks", "price": "GBP 220", "currency": "GBP" }
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        { "duration": "1-4 weeks", "price": "GBP 315", "currency": "GBP" },
                        { "duration": "5-11 weeks", "price": "GBP 310", "currency": "GBP" },
                        { "duration": "12-19 weeks", "price": "GBP 280", "currency": "GBP" },
                        { "duration": "20+ weeks", "price": "GBP 240", "currency": "GBP" }
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        { "duration": "1-4 weeks", "price": "GBP 365", "currency": "GBP" },
                        { "duration": "5-11 weeks", "price": "GBP 355", "currency": "GBP" },
                        { "duration": "12-19 weeks", "price": "GBP 325", "currency": "GBP" },
                        { "duration": "20+ weeks", "price": "GBP 280", "currency": "GBP" }
                    ]
                },
                {
                    "name": "Business (Supplementary, Intensive)",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        { "duration": "1-4 weeks", "price": "GBP 365", "currency": "GBP" },
                        { "duration": "5-11 weeks", "price": "GBP 355", "currency": "GBP" },
                        { "duration": "12-19 weeks", "price": "GBP 325", "currency": "GBP" },
                        { "duration": "20+ weeks", "price": "GBP 280", "currency": "GBP" }
                    ]
                },
                {
                    "name": "Cambridge General (B2, C1 ) - 4 OR 12 weeks",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        { "duration": "4 weeks", "price": "GBP 290", "currency": "GBP" },
                        { "duration": "12 weeks", "price": "GBP 250", "currency": "GBP" }
                    ]
                },
                {
                    "name": "Cambridge Intensive (B2, C1 ) - 4 OR 12 weeks",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        { "duration": "4 weeks", "price": "GBP 365", "currency": "GBP" },
                        { "duration": "12 weeks", "price": "GBP 325", "currency": "GBP" }
                    ]
                },
                {
                    "name": "IELTS (Supplementary, Intensive)",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        { "duration": "1-4 weeks", "price": "GBP 365", "currency": "GBP" },
                        { "duration": "5-11 weeks", "price": "GBP 355", "currency": "GBP" },
                        { "duration": "12-19 weeks", "price": "GBP 325", "currency": "GBP" },
                        { "duration": "20+ weeks", "price": "GBP 280", "currency": "GBP" }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": [
                        { "type": "Twin (shared bath)", "price": "GBP 175" },
                        { "type": "Single (shared bath)", "price": "GBP 200" },
                        { "type": "Under 18 Single",  "price" :"220"}
                        ]}
],  
            "additional_fees": {
                "start": "240.<! возника>>>>>>>>>>>>>>"

 

}} , 
  
    "start_dates."

 
 









]}
2025-01-31 11:26:20,155 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:26:20,155 - PDFParser - INFO - Successfully processed page 28
2025-01-31 11:26:20,155 - PDFParser - INFO - Processing page 29/77
2025-01-31 11:26:20,184 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:26:20,186 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:26:20,190 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:26:20,191 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:26:31,603 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:26:31,603 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Virtual Internship",
            "price": 910,
            "currency": "GBP"
        },
        {
            "name": "Intensive Upgrade",
            "description": "6 hours/8 lessons per week",
            "price": 90,
            "currency": "GBP"
        },
        {
            "name": "Super Intensive Upgrade",
            "description": "9 hours/12 lessons per week",
            "price": 140,
            "currency": "GBP"
        },
        {
            "name": "AM Guaranteed Classes",
            "description": "Max charge 12 weeks",
            "price": 20,
            "currency": "GBP"
        },
        {
            "name": "K+ Learning Space and K+ Extra Access (12 months Post Departure)",
            "price": 100,
            "currency": "GBP"
        },
        {
            "name": "K+ Learning Space and K+ Extra Access (3 months Post Departure)",
            "price": 50,
            "currency": "GBP"
        }
    ],
    "accommodations": [
        {
            "type": "Homestay Special Diet",
            "price_per_week": 35,
            "currency": "GBP",
            "notes": "Per diet type, per week"
        },
        {
            "type": "Luggage Retainer",
            "price_per_week": 60,
            "currency": "GBP"
        }
    ],
    "transfer_services": [
        {
            "destination": "Heathrow Airport",
            "price": 160,
            "currency": "GBP",
            "type": "Taxi",
            "notes": "One way"
        },
        {
            "destination": "Liverpool Airport",
            "price": 165,
            "currency": "GBP",
            "type": "Taxi",
            "notes": "One way"
        },
        {
            "destination": "Manchester Airport",
            "price": 165,
            "currency": "GBP",
            "type": "Taxi",
            "notes": "One way"
        },
        {
            "destination": "Liverpool Lime Street Station",
            "price": 165,
            "currency": "GBP",
            "type": "Taxi",
            "notes": "One way"
        }
    ],
    "additional_fees": {
        "application_fee": 135,
        "currency": "GBP",
        "description": "Compulsory"
    }
}

   

2025-01-31 11:26:31,603 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:26:31,604 - PDFParser - INFO - Successfully processed page 29
2025-01-31 11:26:31,604 - PDFParser - INFO - Processing page 30/77
2025-01-31 11:26:31,675 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:26:31,678 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:26:31,685 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:26:31,686 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:26:49,455 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:26:49,455 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Liverpool",
            "country": "England",
            "address": "Not specified",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "GBP 290", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "GBP 285", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "GBP 250", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "GBP 220", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "GBP 315", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "GBP 310", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "GBP 280", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "GBP 240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "GBP 365", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "GBP 355", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "GBP 325", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "GBP 280", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "36 weeks", "price": "GBP 240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "36 weeks", "price": "GBP 280", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay Twin",
                    "price_per_week": "GBP 175",
                    "description": "14 Meals/week, shared bathroom",
                    "min_age": 18
                },
                {
                    "type": "Homestay Single",
                    "price_per_week": "GBP 200 (shared bathroom), GBP 220 (private bathroom)",
                    "description": "14 Meals/week",
                    "min_age": 18
                },
                {
                    "type": "Glassworks Liverpool",
                    "price_per_week": "GBP 260",
                    "description": "Single, No Meals, private bathroom",
                    "min_age": 18
                },
                {
                    "type": "Great Newton House",
                    "price_per_week": "GBP 225",
                    "description": "Single, No Meals, private bathroom",
                    "min_age": 18,
                    "notes": "Minimum booking of two weeks."
                },
                {
                    "type": "Vita Liverpool (Gold Single, Silver Single, Bronze Single)",
                    "price_per_week": "GBP 330 (gold), GBP 295 (silver), GBP 265 (bronze)",
                    "description": "No Meals, private bathroom",
                    "min_age": 18
                }
            ],
            "additional_fees": {
                "general": [
                    {"item": "Application Fee", "price": "GBP 135", "notes": "Compulsory"},
                    {"item": "Courier Fee", "price": "GBP 40", "notes": "Optional if used"},
                    {"item": "Accommodation Placement Fee", "price": "GBP 35", "notes": "Compulsory if accommodation is purchased"},
                    {"item": "Change Fee", "price": "GBP 70", "notes": "If changes are made after arrival"},
                    {"item": "Medical & Travel Insurance", "price": "Per week", "notes": null},
                    {"item": "Administration Fee", "price": "GBP 40", "notes": "For Americas only - except Brazil"},
                    {"item": "Booking with Confidence Plus", "price": "GBP 60", "notes": null},
                    {"item": "Residence Room Move Fee", "price": "GBP 100", "notes": "Post Arrival Room Change fee"}
                ],
                "transfer": [
                    {"destination": "Heathrow Airport", "price": "GBP 660", "notes": "Taxi one way"},
                    {"destination": "Liverpool Airport", "price": "GBP 165", "notes": "Taxi one way"},
                    {"destination": "Manchester Airport", "price": "GBP 165", "notes": "Taxi one way"},
                    {"destination": "Liverpool Lime Street Station", "price": "GBP 165", "notes": "Taxi one way"}
                ]
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified",
        "notes": "Peak season supplement fees apply for varying periods and services. Discounts available for two-way transfer booking or if two students travel together."
    }
}
2025-01-31 11:26:49,455 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:26:49,456 - PDFParser - INFO - Successfully processed page 30
2025-01-31 11:26:49,456 - PDFParser - INFO - Processing page 31/77
2025-01-31 11:26:49,487 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:26:49,489 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:26:49,494 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:26:49,494 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:27:07,174 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:27:07,175 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£280", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£405", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£395", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£470", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£460", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£415", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£350", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS (Supplementary) Intensive",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£470", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£460", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£415", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£350", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Intensive (C2)",
                    "description": "Flexible start date: To be confirmed.",
                    "prices": []
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": [
                        {"type": "Twin, shared bathroom", "price": "£220"},
                        {"type": "Single, shared bathroom", "price": "£255"},
                        {"type": "Single, private bathroom", "price": "£320"}
                    ],
                    "description": "14 meals per week.",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": [
                        {"type": "Twin, shared bathroom", "price": "£240"},
                        {"type": "Single, shared bathroom", "price": "£275"},
                        {"type": "Single, private bathroom", "price": "£340"}
                    ],
                    "description": "14 meals per week.",
                    "supplements": null
                },
                {
                    "type": "IQ Shoreditch",
                    "price_per_week": "£595",
                    "description": "Studio, private bathroom, no meals.",
                    "supplements": {"minimum_booking": "Two weeks required."}
                },
                {
                    "type": "Scape Canada Water",
                    "price_per_week": "£500",
                    "description": "Single, private bathroom, no meals.",
                    "supplements": null
                },
                {
                    "type": "Scape Wembley",
                    "price_per_week": "£420",
                    "description": "Studio, private bathroom, no meals.",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": null
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 11:27:07,175 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:27:07,175 - PDFParser - INFO - Successfully processed page 31
2025-01-31 11:27:07,175 - PDFParser - INFO - Processing page 32/77
2025-01-31 11:27:07,205 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:27:07,206 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:27:07,211 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:27:07,212 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:27:34,019 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:27:34,019 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Tuition Upgrades & Add-ons",
            "details": [
                {
                    "name": "Virtual Internship",
                    "price": 910,
                    "currency": "GBP"
                },
                {
                    "name": "Super Intensive Upgrade (9 hours/12 lessons per week)",
                    "price": 145,
                    "currency": "GBP"
                },
                {
                    "name": "AM Guaranteed Classes (Max charge 12 weeks)",
                    "price": 20,
                    "currency": "GBP"
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access (Post Departure)",
                    "price": 25,
                    "currency": "GBP"
                },
                {
                    "name": "K+ Learning Space and K+ Extra Access (3 months - Post Departure)",
                    "price": 50,
                    "currency": "GBP"
                }
            ]
        },
        {
            "name": "Private Lessons",
            "details": [
                {
                    "number_of_lessons": "1-4",
                    "prices": {
                        "one-to-one": 110,
                        "two-to-one": 90,
                        "three-to-one": 85,
                        "four-to-one": 70,
                        "currency": "GBP"
                    }
                },
                {
                    "number_of_lessons": "5-9",
                    "prices": {
                        "one-to-one": 105,
                        "two-to-one": 85,
                        "three-to-one": 70,
                        "four-to-one": 65,
                        "currency": "GBP"
                    }
                },
                {
                    "number_of_lessons": "10-19",
                    "prices": {
                        "one-to-one": 100,
                        "two-to-one": 80,
                        "three-to-one": 70,
                        "four-to-one": 65,
                        "currency": "GBP"
                    }
                },
                {
                    "number_of_lessons": "20+",
                    "prices": {
                        "one-to-one": 95,
                        "two-to-one": 75,
                        "three-to-one": 65,
                        "four-to-one": 60,
                        "currency": "GBP"
                    }
                }
            ]
        }
    ],
    "accommodations": [
        {
            "type": "Homestay",
            "supplements": [
                {
                    "name": "Homestay Special Diet (per Diet Type, per week)",
                    "price": 35,
                    "currency": "GBP"
                },
                {
                    "name": "Luggage Retainer (per week)",
                    "price": 60,
                    "currency": "GBP"
                },
                {
                    "name": "Close To School (up to 45 mins, subject to availability, per week)",
                    "price": 55,
                    "currency": "GBP"
                }
            ],
            "peak_season_supplements": [
                {
                    "name": "Tuition peak season supplement (per week, 16 Jun - 22 Aug)",
                    "price": 20,
                    "currency": "GBP"
                },
                {
                    "name": "Homestay peak season supplement (per week, 31 May - 23 Aug)",
                    "price": 30,
                    "currency": "GBP"
                },
                {
                    "name": "Residence peak season supplement (per week, 31 May - 23 Aug)",
                    "price": 35,
                    "currency": "GBP"
                },
                {
                    "name": "Homestay End of Year supplement (20 Dec - 27 Dec)",
                    "price": 65,
                    "currency": "GBP"
                }
            ]
        }
    ],
    "additional_fees": [
        {
            "name": "Application Fee",
            "price": 135,
            "currency": "GBP",
            "notes": "Compulsory"
        },
        {
            "name": "Courier Fee",
            "price": 40,
            "currency": "GBP",
            "notes": "Optional"
        },
        {
            "name": "Accommodation Placement Fee",
            "price": 35,
            "currency": "GBP",
            "notes": "Compulsory if accommodation is purchased"
        },
        {
            "name": "Booking with Confidence Plus",
            "price": 60,
            "currency": "GBP"
        },
        {
            "name": "Change Fee",
            "price": 70,
            "currency": "GBP"
        },
        {
            "name": "Medical & Travel Insurance",
            "price": 10,
            "currency": "GBP",
            "notes": "Per week"
        },
        {
            "name": "Administration Fee (Americas only, except Brazil)",
            "price": 40,
            "currency": "GBP"
        },
        {
            "name": "Residence Room Move Fee",
            "price": 100,
            "currency": "GBP",
            "notes": "Post Arrival Room Change fee"
        }
    ],
    "transfer_service_fees": [
        {
            "destination": "Heathrow Airport",
            "price": 210,
            "currency": "GBP",
            "notes": "Taxi (one way)"
        },
        {
            "destination": "Gatwick Airport",
            "price": 225,
            "currency": "GBP",
            "notes": "Taxi (one way)"
        },
        {
            "destination": "Luton Airport",
            "price": 230,
            "currency": "GBP",
            "notes": "Taxi (one way)"
        },
        {
            "destination": "Stansted Airport",
            "price": 245,
            "currency": "GBP",
            "notes": "Taxi (one way)"
        },
        {
            "destination": "London City Airport",
            "price": 190,
            "currency": "GBP",
            "notes": "Taxi (one way)"
        },
        {
            "destination": "St Pancras International Station",
            "price": 180,
            "currency": "GBP",
            "notes": "Taxi (one way)"
        }
    ],
    "terms": {
        "discount": "If a two-way transfer is booked, the transfer back to the airport receives a 10% discount. Two students who book and travel together receive a 25% discount each."
    }
}
2025-01-31 11:27:34,019 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:27:34,020 - PDFParser - INFO - Successfully processed page 32
2025-01-31 11:27:34,020 - PDFParser - INFO - Processing page 33/77
2025-01-31 11:27:34,044 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:27:34,047 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:27:34,051 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:27:34,052 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:27:49,179 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:27:49,179 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "address": "Not provided",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "Not specified",
                    "description": "Not specified",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£385", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£340", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£295", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "lessons_per_week": "Not specified",
                    "description": "Not specified",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£425", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£410", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£320", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": "Not specified",
                    "description": "Not specified",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£490", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£480", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£435", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£370", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Business (Supplementary, Intensive)",
                    "lessons_per_week": "Not specified",
                    "description": "Not specified",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£490", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£480", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£435", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£370", "currency": "GBP"}
                    ]
                },
                {
                    "name": "TOEIC Exam Preparation",
                    "lessons_per_week": "Not specified",
                    "description": "Not specified",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£490", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£480", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£435", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£370", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "lessons_per_week": "Not specified",
                    "description": "Not specified",
                    "prices": [
                        {"duration": "20+ weeks", "price": "£320", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "lessons_per_week": "Not specified",
                    "description": "Not specified",
                    "prices": [
                        {"duration": "20+ weeks", "price": "£370", "currency": "GBP"}
                    ]
                },
                {
                    "name": "50+ Languages Abroad",
                    "lessons_per_week": "Not specified",
                    "description": "9 June, 13 Oct start dates",
                    "prices": [
                        {"duration": "2 weeks", "price": "£490", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£220-£255",
                    "description": "Twin or single, shared/private bathroom, 14 meals per week",
                    "supplements": {}
                },
                {
                    "type": "IQ Shoreditch",
                    "price_per_week": "£595",
                    "description": "Studio, private bathroom, no meals",
                    "supplements": {
                        "Minimum booking": "2 weeks"
                    }
                },
                {
                    "type": "Scape Canada Water",
                    "price_per_week": "£500",
                    "description": "Studio, private bathroom, no meals",
                    "supplements": {}
                },
                {
                    "type": "Scape Wembley",
                    "price_per_week": "£420",
                    "description": "Studio, private bathroom, no meals",
                    "supplements": {}
                },
                {
                    "type": "Aldgate Residence",
                    "price_per_week": "£560",
                    "description": "Studio, private bathroom, no meals",
                    "supplements": {}
                },
                {
                    "type": "Battersea Residence",
                    "price_per_week": "£525",
                    "description": "Single, private bathroom, no meals",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "notes": "Only available to students who book and travel together for twin rooms."
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified"
    }
}
2025-01-31 11:27:49,179 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:27:49,179 - PDFParser - INFO - Successfully processed page 33
2025-01-31 11:27:49,180 - PDFParser - INFO - Processing page 34/77
2025-01-31 11:27:49,222 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:27:49,229 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:27:49,235 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:27:49,236 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:28:30,561 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:28:30,562 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Private Lessons",
            "details": [
                {
                    "group_size": "One-to-One",
                    "price_per_lesson": [110, 105, 100, 95],
                    "notes": "Price varies based on number of lessons (1-4, 5-9, 10-19, 20+)."
                },
                {
                    "group_size": "Two-to-One",
                    "price_per_lesson": [90, 85, 80, 75]
                },
                {
                    "name":  -50,
    "tuition": [
    

    
 


 
  


 



 
 
  
  
   90    



  
  
 



 
 
  
  
  
  
  
  
  
  

 
  
  
 


  
  
  	
	
	
	
	
  
  
 



 
  
  

  
  
 


  
  
 
 
 
 
 
 
 
  
 


        







  
  
  
  
  
  
  
  
	

	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
	

		
 



  
  
  


 




    
    
    	
	
 
	
	
	
	
	
	
	
	
  	
	
	
	
	
	
	
	
 	  
		  



 
 
  
  





	
	
	
	
	
	
	
	
 	  
	  
  
	
	
	
	
	
	
	
	
	
	
	
	
	


	
	
	
	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
 	  
	


	

	

  

	
   
		
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		


 
 
 
  
  

	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
	
	
	
	
	
	
	
 	  	
	
	
	
	
	
	
	
 	  
		
		
		
		
		
		
		
		
		
		
		
		
		  







		
 		










 	  










 
 
 
 
  
  
 

    
  
	
	
	
 	
 
  
 
 
 
 
 
 
 
 
 
 
 
 
 
  
  


		
		
		
		
		
		
	
  
 	  
  
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	
	
	
  

	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		 










    


				  


	
	
	
	
	
	
	
	
	


 
 
 
 
 
  
  










  





	
   
  
  
	
	
	
	
 	  
  
	
	
	
	
 


  
  
		
 

 
  
 
 
		
 
 
		
		
		
		
		
		
	 
 
 
		
		
		
		
		
 
 
		
  




 
 
 
 
 
 	
	
	
	
	
	
	
	
 	 
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
	













  

  	
  

 
 
		
  

		





  
  
 
 
  
  
  
  
  



  
  
    
    				    
    				 

    		    
		
	 		
	 	














 
  

	
    
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
	
	
	
 	
  

 
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
 	  
	
	
	
	
 	
	


 
 
  

  
 

		
	
	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
	
	
	
	
	
	
	
	
	
	
	
   	      
  
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	  
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	 
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 		 
		
		
	 	 
	 
	 
	 
	
 
 
 
  
   












 
 
 




 
 
  
 
 
 
 
 
		
 
 	  
	
	
	
	
	
	
	
	
 	  
	
	
	
	
	
	
	
    
	
	
	
 



  




 	  
  	
  
    
	
	
	
	
 	  
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

 	  












 
 
 
 
 
 
		
  
 
		
		
		
		
		
		
		
		
		
		
		
		
	 	 	
 

     


 

 
  
 
 
	
	
	
	
 	  
 
 
 
  
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	





	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  


	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
												







	
	
	
	
	
	
	







		
		 
 
		
		
	
	  




	
 
 
		
 
 
 
		
		
		
 
		
		
		
		
		
		
		
		
    
    	 


 



		
		












	
	
	
	
	
	
 		


		
	




         







			
		
			
			
 

		
	




 



		
		
		
		
		
		
		
		
				
			    
    
    
 
  
 
 
 
 
 
 
 
 
 
  
 
 
 

		
		
		
 


	





 
 
 
 
 
		
 
 
		
 
		 





		
   		
		
		
 



    


 
 
  
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
 

		
	



		
	



		
		
		
		
		
		
 
	 	
		 
 
		





		


		
 
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
	
	
	
 	  
  
    
    
    
    
    
    
	 
 
 



	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	 


 
 


 
 
		
		
		
		
		
		
		
		
		
		
		
 
	
 
 
 
 
 

		
 



 
 
 
 
 


 
 
  
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
    
		
		
		


 
 
 
 
	 
 
		
		
		
		






		
		
		
		 
 
		
		
		
		
		
		
		
 

		
		
		
		
		
		
		
		
		
		
		

	

 


	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

		

		 
 
		  
 
		
 



 

		
 
	



	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		
	


	
	
	
	 	
 
 
 



 
	 	 	
 

  
 
 
	
	
	
	
	
	
	
	
		
 
 
  




	
	
	
	
	
	
	
	
	
	
	
	
	
		
 

 	  
  

 
  
    
    
	



	



 
		
		
  	
 

 
  



    
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

	  	
	
	
	
	
	
	
	
 	  
	  




 




	










    
  	
	  












	
	
	
 



    
	
	  	 
 
	

	
	
	
	
	
	
	
	
	
	
	
	
	



	
	
	
	
	
	
	
	
	
	
	
	
  





 









  

  
   	  	









 

 




	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		
  
  
	


	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		
	
	
	
	
	



	 
		
		 
 
		
 




 
 
  
  
 
 
  
  
  

  











 
 
 
 
  	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  











	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
		
		
		
  
  
		
 
 
	
	
	
 



 



 




	
	
	
	
	
	
	
	
 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

 
 
 
 
 
 
 
 
  
		
 
 
	
	





 
  
 
 
 
 
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
    
	
		 
 
		
		
		
 
 
		
 

		
 
 
 
 
  	
	
	
	
 	  



		
		


 
 
 
 
 
 
		
		
		
		
		


	 
 
		
 


		
		
		
		
		
		
		
	










		























 	  	
  	  	        
  	 
 
		
		
		
		
		
		
	


 
 
 
 
 

		
	
		 
 
 
 
 
 
		
		
 

	



 
 
  
  
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	  
	
	
	
	
	
	
	
	
	
 	 
 
  
	
	
	
 	  
 	 
	
	
	
	
	
	
	
	
	
	
	
	
	

		
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 	 	
	
	
	
	
	
	
	
 	 	
	
	
	
	 
	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
 















		
		
		
		
		
		
		
		
		
		
		
		
			
	

	
		





 
 
 
  	
		
		
		
		
		
		
		
		
		
		
		
		
		
		

		
		 
 
 
 
 
 
 
 
		
		
			
		
		
		
 			

	
	







 	  

		
		



		
		
  		
		
		
		
    
		


 



		 
	 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	 	
	
	
	
	
	
	
	
 	 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	


		
	
		]}]}]}
2025-01-31 11:28:30,562 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:28:30,562 - PDFParser - INFO - Successfully processed page 34
2025-01-31 11:28:30,562 - PDFParser - INFO - Processing page 35/77
2025-01-31 11:28:30,585 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:28:30,588 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:28:30,593 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:28:30,593 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:29:06,528 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:29:06,528 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Manchester",
            "country": "United Kingdom",
            "address": "Not specified",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "Not specified",
                    "description": "Improve all areas of English language skills.",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£330", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£290", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£250", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": "Not specified",
                    "description": "Focused on improving your English quickly.",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£345", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£270", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": "Not specified",
                    "description": "Delve deeper into English through intensive courses.",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£420", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£410", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS (Supplementary, Intensive)",
                    "lessons_per_week": "Not specified",
                    "description": "Specialized IELTS preparation for exam success.",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£420", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£410", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "lessons_per_week": "Not specified",
                    "description": "Long-term English learning for academic purposes.",
                    "prices": [
                        {"duration": "20+ weeks", "price": "£270", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£200-£265",
                    "description": "Options for twin and single rooms with meals provided.",
                    "details": [
                        {"type": "Twin", "meals": "14 Meals/Wk", "bath": "Shared", "min_age": 18, "price": "£200"},
                        {"type": "Single", "meals": "14 Meals/Wk", "bath": "Shared", "min_age": 18, "price": "£220"},
                        {"type": "Single", "meals": "14 Meals/Wk", "bath": "Private", "min_age": 18, "price": "£265"},
                        {"type": "Single", "meals": "No Meals", "bath": "Shared", "min_age": 18, "price": "£175"},
                        {"type": "Single", "meals": "No Meals", "bath": "Private", "min_age": 18, "price": "£220"}
                    ]
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£220-£285",
                    "description": "Available for students under 18 with meals included.",
                    "details": [
                        {"type": "Twin", "meals": "14 Meals/Wk", "bath": "Shared", "min_age": 16, "price": "£220"},
                        {"type": "Single", "meals": "14 Meals/Wk", "bath": "Shared", "min_age": 16, "price": "£240"},
                        {"type": "Single", "meals": "14 Meals/Wk", "bath": "Private", "min_age": 16, "price": "£285"}
                    ]
                },
                {
                    "type": "Lambert & Fairfield",
                    "price_per_week": "£330-£380",
                    "description": "Premium student accommodation.",
                    "details": [
                        {"type": "Premium Single", "meals": "No Meals", "bath": "Private", "min_age": 18, "price": "£330"},
                        {"type": "Standard Single", "meals": "No Meals", "bath": "Private", "min_age": 18, "price": "£300"}
                    ]
                },
                {
                    "type": "Vita Manchester",
                    "price_per_week": "£390",
                    "description": "Studio accommodation with private facilities.",
                    "details": [
                        {"type": "Studio", "meals": "No Meals", "bath": "Private", "min_age": 18, "price": "£390"}
                    ]
                },
                {
                    "type": "Wilmslow Park",
                    "price_per_week": "£290",
                    "description": "Student accommodation close to the school.",
                    "details": [
                        {"type": "Single", "meals": "No Meals", "bath": "Private", "min_age": 18, "price": "£290"}
                    ]
                }
            ],
            "additional_fees": {
                "notes": "Minimum booking of 2 weeks may apply for certain accommodations."
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified"
    }
}
2025-01-31 11:29:06,529 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:29:06,529 - PDFParser - INFO - Successfully processed page 35
2025-01-31 11:29:06,529 - PDFParser - INFO - Processing page 36/77
2025-01-31 11:29:06,556 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:29:06,561 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:29:06,566 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:29:06,566 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:29:27,293 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:29:27,293 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "course_information": [],
    "pricing": {
        "general_fees": [
            {
                "item": "Application Fee",
                "price": 135,
                "currency": "GBP",
                "notes": "Compulsory"
            },
            {
                "item": "Courier Fee",
                "price": 40,
                "currency": "GBP",
                "notes": "Optional if used"
            },
            {
                "item": "Accommodation Placement Fee",
                "price": 35,
                "currency": "GBP",
                "notes": "Compulsory if accommodation is purchased"
            },
            {
                "item": "Change Fee",
                "price": 70,
                "currency": "GBP",
                "notes": "If changes are made after arrival"
            },
            {
                "item": "Medical & Travel Insurance",
                "price": 10,
                "currency": "GBP",
                "notes": "Per week"
            },
            {
                "item": "Administration Fee",
                "price": 40,
                "currency": "GBP",
                "notes": "Americas only, except Brazil"
            },
            {
                "item": "Booking with Confidence Plus",
                "price": 60,
                "currency": "GBP",
                "notes": ""
            },
            {
                "item": "Residence Room Move Fee",
                "price": 100,
                "currency": "GBP",
                "notes": "Post Arrival Room Change fee"
            }
        ],
        "private_lessons": [
            {
                "number_of_lessons": "1-4",
                "prices": [
                    {"one_to_one": 110},
                    {"two_to_one": 80},
                    {"three_to_one": 75},
                    {"four_to_one": 70}
                ],
                "currency": "GBP"
            },
            {
                "number_of_lessons": "5-9",
                "prices": [
                    {"one_to_one": 105},
                    {"two_to_one": 85},
                    {"three_to_one": 75},
                    {"four_to_one": 70}
                ],
                "currency": "GBP"
            },
            {
                "number_of_lessons": "10-19",
                "prices": [
                    {"one_to_one": 100},
                    {"two_to_one": 80},
                    {"three_to_one": 70},
                    {"four_to_one": 65}
                ],
                "currency": "GBP"
            },
            {
                "number_of_lessons": "20+",
                "prices": [
                    {"one_to_one": 95},
                    {"two_to_one": 75},
                    {"three_to_one": 65},
                    {"four_to_one": 60}
                ],
                "currency": "GBP"
            }
        ],
        "additional_options": {
            "tuition_upgrades": [
                {"item": "Virtual Internship", "price": 910, "currency": "GBP"},
                {"item": "Intensive Upgrade", "price": 90, "currency": "GBP", "notes": "6 hours/8 lessons per week"},
                {"item": "Super Intensive Upgrade", "price": 135, "currency": "GBP", "notes": "9 hours/12 lessons per week"},
                {"item": "AM Guaranteed Classes", "price": 20, "currency": "GBP", "notes": "Max charge 12 weeks"},
                {"item": "K+ Learning Space and K+ Extra Access 12 months (Post Departure)", "price": 100, "currency": "GBP"},
                {"item": "K+ Learning Space and K+ Extra Access 3 months (Post Departure)", "price": 50, "currency": "GBP"}
            ],
            "accommodation_supplement": [
                {"item": "Homestay Special Diet", "price": 35, "currency": "GBP", "notes": "Per Diet Type, per week"},
                {"item": "Luggage Retainer", "price": 60, "currency": "GBP", "notes": "Per week"}
            ],
            "peak_season_supplement": [
                {"item": "Tuition peak season supplement", "price": 20, "currency": "GBP", "notes": "Per week, 16 Jun - 22 Aug"},
                {"item": "Homestay peak season supplement", "price": 30, "currency": "GBP", "notes": "Per week, 31 May-23 Aug"},
                {"item": "Residence peak season supplement", "price": 35, "currency": "GBP", "notes": "Per week, 31 May-23 Aug"},
                {"item": "Homestay End of Year supplement", "price": 65, "currency": "GBP", "notes": "20 Dec - 27 Dec"}
            ]
        },
        "transfer_service_fees": [
            {"destination": "Manchester Airport", "price": 120, "currency": "GBP", "notes": "Tax (one way)"}
        ]
    },
    "accommodation_options": [],
    "terms": [
        {"condition": "If a two-way transfer is booked, the transfer back to the airport receives a 10% discount."},
        {"condition": "Two students who book and travel together receive a 25% discount each."}
    ]
}
2025-01-31 11:29:27,293 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:29:27,294 - PDFParser - INFO - Successfully processed page 36
2025-01-31 11:29:27,294 - PDFParser - INFO - Processing page 37/77
2025-01-31 11:29:27,316 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:29:27,319 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:29:27,324 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:29:27,324 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:29:57,526 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:29:57,526 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": "N/A",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "N/A",
                    "description": "Flexible start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£330", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£290", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£250", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": "N/A",
                    "description": "Flexible start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£270", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": "N/A",
                    "description": "Flexible start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£425", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£415", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "lessons_per_week": "N/A",
                    "description": "Flexible start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£425", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£415", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Supplementary",
                    "lessons_per_week": "N/A",
                    "description": "Flexible start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£425", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£415", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS (Supplementary, Intensive)",
                    "lessons_per_week": "N/A",
                    "description": "Flexible start dates",
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£425", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£415", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£315", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£210",
                    "description": "Twin room, 14 meals per week, shared bath, minimum age 18"
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£245",
                    "description": "Single room, 14 meals per week, shared bath, minimum age 18"
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£295",
                    "description": "Single room, 14 meals per week, private bath, minimum age 18"
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£230",
                    "description": "Single room, no meals, shared bath, minimum age 18"
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£210",
                    "description": "Twin room, 14 meals per week, shared bath, minimum age 16"
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£265",
                    "description": "Single room, 14 meals per week, shared bath, minimum age 16"
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£295",
                    "description": "Single room, 14 meals per week, private bath, minimum age 16"
                },
                {
                    "type": "Student Castle",
                    "price_per_week": "£370",
                    "description": "Single room, no meals, private bath, minimum age 18"
                },
                {
                    "type": "The Mews",
                    "price_per_week": "£350",
                    "description": "Single room, no meals, private bath, minimum age 18"
                }
            ]
        }
    ],
    "terms": {
        "cancellation": "N/A"
    }
}
2025-01-31 11:29:57,526 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:29:57,526 - PDFParser - INFO - Successfully processed page 37
2025-01-31 11:29:57,526 - PDFParser - INFO - Processing page 38/77
2025-01-31 11:29:57,557 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:29:57,562 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:29:57,566 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:29:57,567 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:30:10,343 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:30:10,344 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": null,
            "country": null,
            "address": null,
            "courses": [
                {
                    "name": "Private Lessons",
                    "lessons_per_week": null,
                    "description": "Pricing for one-to-one, two-to-one, three-to-one, and four-to-one lessons available.",
                    "prices": [
                        {"number_of_lessons": "1-4", "price": "£110 (one-to-one)", "currency": "GBP"},
                        {"number_of_lessons": "5-9", "price": "£105 (one-to-one)", "currency": "GBP"},
                        {"number_of_lessons": "10-19", "price": "£100 (one-to-one)", "currency": "GBP"},
                        {"number_of_lessons": "20+", "price": "£95 (one-to-one)", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price": "£35 per week (special diet supplement)",
                    "description": "Special diet, luggage retainer, or residences close to school options.",
                    "supplements": {
                        "Close To School": "£55 per week"
                    }
                }
            ],
            "additional_fees": {
                "transfer_service": {
                    "Heathrow": "£290 (one way)",
                    "Gatwick": "£230 (one way)",
                    "Luton": "£365 (one way)",
                    "Stansted": "£365 (one way)",
                    "St Pancras Station": "£365 (one way)",
                    "Central London": "£365 (one way)"
                },
                "general_fees": {
                    "application_fee": "£135 (compulsory)",
                    "courier_fee": "£40 (optional if used)",
                    "accommodation_fee": "£35 (compulsory if accommodation is purchased)",
                    "change_fee": "£70",
                    "medical_insurance": "£10 (per week)",
                    "administration_fee": "£40 (for Americas only, except Brazil)",
                    "booking_plus_fee": "£60",
                    "residence_room_move_fee": "£100 (post-arrival room change)"
                },
                "peak_season_supplements": {
                    "tuition": "£20 per week (16 Jun - 22 Aug)",
                    "homestay": "£30 per week (31 May - 23 Aug)",
                    "residence": "£35 per week (31 May - 23 Aug)",
                    "homestay_end_of_year": "£65 (20 Dec - 27 Dec)"
                }
            }
        }
    ],
    "terms": {
        "cancellation": null,
        "additional_notes": "Two students who book and travel together receive a 25% discount each for two-way transfers."
    }
}
2025-01-31 11:30:10,344 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:30:10,344 - PDFParser - INFO - Successfully processed page 38
2025-01-31 11:30:10,344 - PDFParser - INFO - Processing page 39/77
2025-01-31 11:30:10,388 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:30:10,391 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:30:10,396 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:30:10,397 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:30:33,858 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:30:33,859 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Torquay",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£285", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£280", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£245", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£215", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Semi-intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£310", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£305", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£235", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£320", "currency": "GBP"},
                        {"duration": "20+ weeks", "price": "£275", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Business Supplementary (subject to availability)",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£320", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Supplementary",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£350", "currency": "GBP"},
                        {"duration": "12-19 weeks", "price": "£320", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Academic Semester/Year",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "20+ weeks", "price": "£235", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "20+ weeks", "price": "£275", "currency": "GBP"}
                    ]
                },
                {
                    "name": "50+ Languages Abroad",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "£360", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£165",
                    "description": "Twin room, 14 meals/week, shared bathroom, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£185",
                    "description": "Single room, 14 meals/week, shared bathroom, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£235",
                    "description": "Single room, 14 meals/week, private bathroom, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£185",
                    "description": "Twin room, 14 meals/week, shared bathroom, minimum age 16",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "£235",
                    "description": "Single room, 14 meals/week, private bathroom, minimum age 16",
                    "supplements": null
                },
                {
                    "type": "St Michael's",
                    "price_per_week": "£240",
                    "description": "Single room, no meals, minimum age 18",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "application": "£135",
                "courier_fee": "£40",
                "accommodation_placement_fee": "£35",
                "change_fee": "£70",
                "medical_and_travel_insurance": "£10/week",
                "administration_fee": "£40",
                "residence_room_move_fee": "£100"
            }
        }
    ],
    "terms": {
        "peak_season_supplements": {
            "tuition": "£20/week (16 Jun - 22 Aug)",
            "homestay": "£30/week (31 May - 23 Aug)",
            "residence": "£30/week (31 May - 23 Aug)",
            "homestay_end_of_year": "£65/week (20 Dec - 27 Dec)"
        },
        "transfer_service_fees": {
            "heathrow_airport": "£370 (one way)",
            "gatwick_airport": "£465 (one way)",
            "exeter_airport": "£105 (one way)",
            "bristol_airport": "£205 (one way)"
        },
        "discounts": {
            "two_way_transfer": "10% discount",
            "two_students_together": "25% discount"
        }
    }
}
2025-01-31 11:30:33,859 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:30:33,859 - PDFParser - INFO - Successfully processed page 39
2025-01-31 11:30:33,859 - PDFParser - INFO - Processing page 40/77
2025-01-31 11:30:33,886 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:30:33,891 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:30:33,896 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:30:33,896 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:30:51,916 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:30:51,916 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "€330", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-19 weeks", "price": "€300", "currency": "EUR"},
                        {"duration": "20+ weeks", "price": "€265", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Semi-Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "€370", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "12-19 weeks", "price": "€335", "currency": "EUR"},
                        {"duration": "20+ weeks", "price": "€300", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive English",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "€405", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "12-19 weeks", "price": "€370", "currency": "EUR"},
                        {"duration": "20+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Business Supplementary",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "€405", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "12-19 weeks", "price": "€370", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge General (B2, C1) - 4 or 12 weeks",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "€330", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€300", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Intensive (B2, C1) - 4 or 12 weeks",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "€405", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€370", "currency": "EUR"}
                    ]
                },
                {
                    "name": "CELTA Teacher Training - 4 weeks",
                    "lessons_per_week": null,
                    "description": "Price per course (exam fee included)",
                    "prices": [
                        {"duration": "4 weeks", "price": "€435", "currency": "EUR"}
                    ]
                },
                {
                    "name": "IELTS (Supplementary, Intensive)",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "1-4 weeks", "price": "€405", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€370", "currency": "EUR"},
                        {"duration": "12-19 weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive Academic Semester/Year",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {"duration": "20+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€225",
                    "description": "Twin room, 14 meals/week, shared bath, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "€255",
                    "description": "Single room, 14 meals/week, shared bath, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay",
                    "price_per_week": "€340",
                    "description": "Single room, 14 meals/week, private bath, minimum age 18",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "€250",
                    "description": "Twin room, 14 meals/week, shared bath, minimum age 16",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "€280",
                    "description": "Single room, 14 meals/week, shared bath, minimum age 16",
                    "supplements": null
                },
                {
                    "type": "Homestay (Under 18)",
                    "price_per_week": "€360",
                    "description": "Single room, 14 meals/week, private bath, minimum age 16",
                    "supplements": null
                },
                {
                    "type": "Ardcarim House",
                    "price_per_week": "€400",
                    "description": "Single room, no meals, private bath, minimum age 18",
                    "supplements": null
                }
            ],
            "additional_fees": null
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 11:30:51,917 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:30:51,917 - PDFParser - INFO - Successfully processed page 40
2025-01-31 11:30:51,917 - PDFParser - INFO - Processing page 41/77
2025-01-31 11:30:51,948 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:30:51,950 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:30:51,955 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:30:51,955 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:31:12,905 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:31:12,905 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [],
    "pricing": {
        "transfer_service_fees": [
            {
                "destination": "Dublin Airport",
                "price": 180,
                "notes": "Tax included. Discounts available for round trips and shared bookings."
            }
        ],
        "general_fees": [
            {
                "item": "Application Fee",
                "price": 155,
                "notes": "Compulsory"
            },
            {
                "item": "Courier Fee",
                "price": 40,
                "notes": "Optional (if used)"
            },
            {
                "item": "Accommodation Placement Fee",
                "price": 40,
                "notes": "Compulsory if accommodation is purchased"
            },
            {
                "item": "Change Fee",
                "price": 60,
                "notes": "If changes are made after arrival"
            },
            {
                "item": "Medical & Travel Insurance",
                "price": 15,
                "notes": "Per week"
            },
            {
                "item": "MEDIPEL Medical Insurance & Protection for Enrolled Learners",
                "price": 155,
                "notes": "Recommended for 25-week bookings (includes Medical insurance, for non-EU students)"
            },
            {
                "item": "IELTS Exam Fee",
                "price": 240,
                "notes": "Compulsory for 25-week bookings for non-EU students"
            },
            {
                "item": "Administration Fee",
                "price": 50,
                "notes": "Only applicable for Americans (excluding Brazil)"
            },
            {
                "item": "Booking with Confidence Plus",
                "price": 69,
                "notes": ""
            },
            {
                "item": "PEL Protection for Enrolled Learners",
                "price": 45,
                "notes": "To be used if medical insurance is arranged privately"
            },
            {
                "item": "Residence Room Move Fee",
                "price": 100,
                "notes": "Post-arrival room change fee"
            }
        ],
        "tuition_upgrades_and_addons": [
            {
                "item": "Virtual Internship",
                "price": 1065,
                "notes": ""
            },
            {
                "item": "Super Intensive Upgrade (9 hours/12 lessons per week)",
                "price": 140,
                "notes": ""
            },
            {
                "item": "AM Guaranteed Classes (Max 12 weeks)",
                "price": 20,
                "notes": ""
            },
            {
                "item": "K+ Learning Space and K+ Extra Access (12 months, post-departure)",
                "price": 20,
                "notes": ""
            },
            {
                "item": "K+ Learning Space and K+ Extra Access (3 months, post-departure)",
                "price": 60,
                "notes": ""
            }
        ],
        "private_lessons": [
            {
                "number_of_lessons": "1-4",
                "price_one_to_one": 95,
                "price_two_to_one": 45,
                "price_three_to_one": 35,
                "price_four_to_one": 30
            },
            {
                "number_of_lessons": "5-9",
                "price_one_to_one": 85,
                "price_two_to_one": 40,
                "price_three_to_one": 30,
                "price_four_to_one": 25
            },
            {
                "number_of_lessons": "10-19",
                "price_one_to_one": 80,
                "price_two_to_one": 35,
                "price_three_to_one": 25,
                "price_four_to_one": 20
            },
            {
                "number_of_lessons": "20+",
                "price_one_to_one": 75,
                "price_two_to_one": 35,
                "price_three_to_one": 25,
                "price_four_to_one": 20
            }
        ],
        "accommodation_supplement": [
            {
                "item": "Homestay Special Diet (per diet type, per week)",
                "price": 55
            },
            {
                "item": "Luggage Retainer (per week)",
                "price": 60
            }
        ],
        "peak_season_supplement": [
            {
                "item": "Tuition Peak Season Supplement (per week, 16 Jun - 22 Aug)",
                "price": 25
            },
            {
                "item": "Homestay Peak Season Supplement (per week, 31 May - 23 Aug)",
                "price": 30
            },
            {
                "item": "Residence Peak Season Supplement (per week, 31 May - 23 Aug)",
                "price": 40
            },
            {
                "item": "Homestay End of Year Supplement (20 Dec - 27 Dec)",
                "price": 65
            }
        ]
    },
    "terms": {}
}
2025-01-31 11:31:12,905 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:31:12,905 - PDFParser - INFO - Successfully processed page 41
2025-01-31 11:31:12,905 - PDFParser - INFO - Processing page 42/77
2025-01-31 11:31:12,961 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:31:12,965 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:31:12,972 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:31:12,973 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:31:34,471 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:31:34,471 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Lyon",
            "country": "France",
            "courses": [
                {
                    "name": "Standard - 20 lpw (lessons per week)",
                    "lessons_per_week": 20,
                    "prices": [
                        {"duration": "1 week", "price": "240", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "230/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "210/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "200/week", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "195/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "4,680", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "195/week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "6,840", "currency": "EUR"},
                        {"duration": "37+ weeks", "price": "190/week", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive - 25 lpw",
                    "lessons_per_week": 25,
                    "prices": [
                        {"duration": "1 week", "price": "310", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "295/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "275/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "260/week", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "255/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "6,120", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "245/week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "8,820", "currency": "EUR"},
                        {"duration": "37+ weeks", "price": "240/week", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Premium - 30 lpw",
                    "lessons_per_week": 30,
                    "prices": [
                        {"duration": "1 week", "price": "370", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "360/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "340/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "325/week", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "320/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "7,800", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "310/week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "11,520", "currency": "EUR"},
                        {"duration": "37+ weeks", "price": "300/week", "currency": "EUR"}
                    ]
                },
                {
                    "name": "COMBI 5 (20+5 lpw)",
                    "lessons_per_week": 25,
                    "prices": [
                        {"duration": "1 week", "price": "690", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "665/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "635/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "620/week", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "620/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "14,880", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "620/week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "22,140", "currency": "EUR"},
                        {"duration": "37+ weeks", "price": "615/week", "currency": "EUR"}
                    ]
                },
                {
                    "name": "COMBI 10 (20+10 lpw)",
                    "lessons_per_week": 30,
                    "prices": [
                        {"duration": "1 week", "price": "1,085", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "1,085/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "1,055/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "1,045/week", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "1,045/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "24,960", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "1,040/week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "37,260", "currency": "EUR"},
                        {"duration": "37+ weeks", "price": "1,035/week", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "pre-evaluation (process)": "-",
                "application process": "865",
                "university placement": "525"
            }
        }
    ],
    "terms": {
        "cancellation": "School closed dates: lessons are not substituted.",
        "absolute beginners": "Minimum 2-week start dates.",
        "start dates": "Course starts every Monday unless noted."
    }
}
2025-01-31 11:31:34,471 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:31:34,471 - PDFParser - INFO - Successfully processed page 42
2025-01-31 11:31:34,471 - PDFParser - INFO - Processing page 43/77
2025-01-31 11:31:34,521 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:31:34,524 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:31:34,529 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:31:34,529 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:31:52,824 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:31:52,824 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Lyon",
            "country": "France",
            "address": "Not provided",
            "courses": [
                {
                    "name": "Private Courses",
                    "description": "1-on-1 lessons, 45 minutes per lesson",
                    "prices": [
                        {"duration": "1-4 lessons", "price": "€95/lesson", "currency": "EUR"},
                        {"duration": "5-9 lessons", "price": "€90/lesson", "currency": "EUR"},
                        {"duration": "10+ lessons", "price": "€85/lesson", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Study Language + Work Experience/Internship",
                    "description": "For students with Level B2 and above, aged 18+, requiring 200 teaching hours",
                    "prices": [
                        {"duration": "As listed in course pricing", "additional_fees": "€630 placement fee", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Study Language + Volunteering",
                    "description": "For students with Level B1 and above, aged 18+, duration 1-6 weeks",
                    "prices": [
                        {"duration": "As listed in course pricing", "additional_fees": "€90 placement fee", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "prices_by_durations": [
                        {"duration": "1 week", "price_per_week": "€235-€295 depending on options", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price_per_week": "€225-€285 depending on options", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price_per_week": "€215-€275 depending on options", "currency": "EUR"},
                        {"duration": "8+ weeks", "price_per_week": "€205-€255 depending on options", "currency": "EUR"}
                    ],
                    "description": "Available in single or double rooms, with B&B or half board options",
                    "high_season_supplement": "€35/week"
                },
                {
                    "type": "Studio Residences",
                    "prices_by_durations": [
                        {"duration": "1 week", "price_per_week": "€350 depending on location", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price_per_week": "€300 depending on location", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price_per_week": "€280 depending on location", "currency": "EUR"},
                        {"duration": "8+ weeks", "price_per_week": "€260 depending on location", "currency": "EUR"}
                    ],
                    "description": "Self-catering studio apartments in various residences in Lyon"
                }
            ],
            "additional_fees": {
                "application": "€90",
                "weekly_accident/health_insurance_fee": "€15",
                "student_apartment_cleaning_fee": "€50",
                "residence_cleaning_fee": "€95",
                "residence_deposit": "€450",
                "late_registration": "€40",
                "document_translation": "€35 per copy",
                "key_handover_fee": "€30 (for early/late arrivals)",
                "residence_room_move_fee": "€100"
            }
        }
    ],
    "terms": {
        "cancellation": "Cancellation terms not explicitly listed. Additional terms and conditions may apply."
    }
}
2025-01-31 11:31:52,824 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:31:52,824 - PDFParser - INFO - Successfully processed page 43
2025-01-31 11:31:52,825 - PDFParser - INFO - Processing page 44/77
2025-01-31 11:31:52,838 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:31:52,843 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:31:52,847 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:31:52,847 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:32:01,434 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:32:01,434 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "cancellation": "Refundable within 21 business days after student departure under specific conditions.",
        "key_handover_fee": "Applied if arrival is outside standard check-in/out schedule.",
        "high_season_supplement": {
            "course_fee": "€35 per week",
            "accommodation_fee": "€35 per week",
            "applicable_dates": "June 15th to August 16th, 2025",
            "notes": "Valid on all courses except University Pathway."
        },
        "class_upgrade_fee": {
            "morning_classes": "€20 per week",
            "applicable_courses": [
                "COMBI",
                "Standard",
                "Intensive",
                "Premium",
                "University 20",
                "University 25"
            ]
        }
    }
}
2025-01-31 11:32:01,434 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:32:01,434 - PDFParser - INFO - Successfully processed page 44
2025-01-31 11:32:01,434 - PDFParser - INFO - Processing page 45/77
2025-01-31 11:32:01,471 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:32:01,474 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:32:01,479 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:32:01,480 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:32:20,811 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:32:20,811 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Nice",
            "country": "France",
            "address": null,
            "courses": [
                {
                    "name": "Standard 20",
                    "lessons_per_week": 20,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "€325", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€305/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€275/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€255/week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€3,060", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€255/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6,120", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive 25",
                    "lessons_per_week": 25,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "€355", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€335/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€305/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€285/week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€3,360", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€285/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6,720", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Premium 30",
                    "lessons_per_week": 30,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "€425", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€405/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€375/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€355/week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€4,080", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€355/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€8,160", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": null
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 11:32:20,811 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:32:20,812 - PDFParser - INFO - Successfully processed page 45
2025-01-31 11:32:20,812 - PDFParser - INFO - Processing page 46/77
2025-01-31 11:32:20,851 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:32:20,855 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:32:20,860 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:32:20,860 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:32:36,683 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:32:36,683 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "Private Courses & Online Lessons",
            "details": [
                {
                    "description": "1-4 lessons (45 mins per lesson)",
                    "price": "€55 per lesson",
                    "currency": "EUR"
                },
                {
                    "description": "5-9 lessons (45 mins per lesson)",
                    "price": "€55 per lesson",
                    "currency": "EUR"
                },
                {
                    "description": "10+ lessons (45 mins per lesson)",
                    "price": "€55 per lesson",
                    "currency": "EUR"
                }
            ]
        }
    ],
    "accommodations": [
        {
            "type": "Homestay",
            "options": [
                {
                    "name": "B&B Single",
                    "price_per_week": [
                        {
                            "duration": "1 week",
                            "price": "€270",
                            "currency": "EUR"
                        },
                        {
                            "duration": "2-3 weeks",
                            "price": "€270",
                            "currency": "EUR"
                        },
                        {
                            "duration": "4-7 weeks",
                            "price": "€270",
                            "currency": "EUR"
                        },
                        {
                            "duration": "8+ weeks",
                            "price": "€270",
                            "currency": "EUR"
                        }
                    ],
                    "weekly_supplement": "€130"
                },
                {
                    "name": "HB Single",
                    "price_per_week": [
                        {
                            "duration": "1 week",
                            "price": "€310",
                            "currency": "EUR"
                        },
                        {
                            "duration": "2-3 weeks",
                            "price": "€310",
                            "currency": "EUR"
                        },
                        {
                            "duration": "4-7 weeks",
                            "price": "€310",
                            "currency": "EUR"
                        },
                        {
                            "duration": "8+ weeks",
                            "price": "€310",
                            "currency": "EUR"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Campus Central",
            "options": [
                {
                    "name": "Double",
                    "price_per_week": [
                        {
                            "duration": "1 week",
                            "price": "€225",
                            "currency": "EUR"
                        },
                        {
                            "duration": "2-3 weeks",
                            "price": "€225",
                            "currency": "EUR"
                        },
                        {
                            "duration": "4-7 weeks",
                            "price": "€225",
                            "currency": "EUR"
                        },
                        {
                            "duration": "8+ weeks",
                            "price": "€225",
                            "currency": "EUR"
                        }
                    ]
                }
            ]
        }
    ],
    "additional_fees": {
        "transfer_service_fees": {
            "Nice Airport Collective Transfer": "€55 per person",
            "Nice Train Station": "€55 per person"
        },
        "other_fees": [
            {
                "description": "Application Fee",
                "price": "€90",
                "currency": "EUR"
            },
            {
                "description": "Late Registration",
                "price": "€40",
                "currency": "EUR"
            },
            {
                "description": "Residence Room Move Fee",
                "price": "€100",
                "currency": "EUR"
            }
        ]
    },
    "terms": {
        "high_season_supplement": "Applies during specific dates: Sunday 15th June until Saturday 16th August 2025",
        "additional_cleaning_fee": "Cleaning fee invoiced at the time of booking, non-refundable"
    }
}
2025-01-31 11:32:36,683 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:32:36,683 - PDFParser - INFO - Successfully processed page 46
2025-01-31 11:32:36,684 - PDFParser - INFO - Processing page 47/77
2025-01-31 11:32:36,731 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:32:36,734 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:32:36,740 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:32:36,740 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:33:00,518 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:33:00,518 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Berlin",
            "country": "Germany",
            "address": "Not provided",
            "courses": [
                {
                    "name": "Standard",
                    "lessons_per_week": 20,
                    "description": "General English lessons",
                    "prices": [
                        {"duration": "1 week", "price": "€200", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€195 per week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€190 per week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€185 per week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€2,040 total", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€170 per week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€3,600 total", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "€145 per week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "€4,860 total", "currency": "EUR"},
                        {"duration": "37+ weeks", "price": "€135 per week", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive",
                    "lessons_per_week": 25,
                    "description": "Extended English lessons",
                    "prices": [
                        {"duration": "1 week", "price": "€250", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€245 per week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€225 per week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€220 per week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€2,520 total", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€210 per week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€4,680 total", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "€195 per week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "€6,840 total", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Premium",
                    "lessons_per_week": 30,
                    "description": "Comprehensive and full-time English lessons",
                    "prices": [
                        {"duration": "1 week", "price": "€300", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€295 per week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€280 per week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€270 per week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€3,420 total", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€255 per week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€5,760 total", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "€240 per week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "€8,280 total", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "high_season_supplement": "Applies to all fees (exact amount not provided)"
            }
        }
    ],
    "terms": {
        "start_dates": "Courses start every Monday; start dates for exam preparation: 06/01, 03/02, 03/03, 31/03, etc.",
        "school_closed_dates": "23/12/2024 - 05/01/2025, including additional specified holidays",
        "additional_notes": "Lessons missed during school closures are not substituted."
    }
}
2025-01-31 11:33:00,518 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:33:00,518 - PDFParser - INFO - Successfully processed page 47
2025-01-31 11:33:00,518 - PDFParser - INFO - Processing page 48/77
2025-01-31 11:33:00,569 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:33:00,574 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:33:00,579 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:33:00,579 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:33:24,801 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:33:24,801 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Berlin",
            "country": "Germany",
            "address": "",
            "courses": [
                {
                    "name": "Private Courses & Online Lessons",
                    "lessons_per_week": null,
                    "description": "1-14 lessons (45 mins per lesson)",
                    "prices": [
                        {
                            "duration": "Per lesson",
                            "price": "€70",
                            "currency": "EUR"
                        }
                    ]
                },
                {
                    "name": "Study Language + Work Experience/Internship",
                    "lessons_per_week": null,
                    "description": "Requirements: Level B1 / From 18 years old / Duration: from 1 to 6 weeks",
                    "prices": [
                        {
                            "duration": "Per course",
                            "price": "Listed course price + €630 placement fee",
                            "currency": "EUR"
                        }
                    ]
                },
                {
                    "name": "Study Language + Volunteering",
                    "lessons_per_week": null,
                    "description": "Requirements: Level B1 / From 18 years old / Duration: from 1 week to 6",
                    "prices": [
                        {
                            "duration": "Per course",
                            "price": "Listed course price + €90 placement fee",
                            "currency": "EUR"
                        }
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€295",
                    "description": "B&B Single: breakfast included",
                    "supplements": {
                        "High season": "Applicable, details not provided"
                    }
                },
                {
                    "type": "Pankstrasse Apartment",
                    "price_per_week": "€450",
                    "description": "Single room",
                    "supplements": {}
                },
                {
                    "type": "Staytoo Residence",
                    "price_per_week": "€500",
                    "description": "Studio room",
                    "supplements": {}
                },
                {
                    "type": "David Friedlander Haus Residence",
                    "price_per_week": "€490",
                    "description": "Studio room",
                    "supplements": {}
                },
                {
                    "type": "CREON Co-living Apartment",
                    "price_per_week": "€475",
                    "description": "Single room",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "Application Fee": "€90",
                "Courier Fee": "€15",
                "Weekly Accident/Health Insurance Fee": "€15",
                "Student Apartment Cleaning Fee": "€70",
                "Residence Cleaning Fee": "€70",
                "Homestay Deposit": "€50",
                "Student Apartment Deposit": "€150",
                "Residence Deposit": "€150",
                "Documents Notarisation": "€35",
                "Late Registration": "€40",
                "Key Handover Fee": "€30 (for early/late arrivals)",
                "Residence Room Move Fee": "€100"
            }
        }
    ],
    "terms": {
        "cancellation": "Cleaning Fee: Invoiced at the time of booking and non-refundable. Homestay Deposit is refundable within 21 business days after student departure if no damages occurred.",
        "additional_notes": "A Key Handover Fee will be applied if arriving outside standard accommodation check-in/out schedule."
    }
}
2025-01-31 11:33:24,801 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:33:24,801 - PDFParser - INFO - Successfully processed page 48
2025-01-31 11:33:24,801 - PDFParser - INFO - Processing page 49/77
2025-01-31 11:33:24,812 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:33:24,814 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:33:24,818 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:33:24,819 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:33:31,919 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:33:31,919 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "AM Guaranteed Classes",
            "max_duration": "12 weeks",
            "types": [
                "COMBI",
                "Standard",
                "Intensive",
                "Premium",
                "University 20",
                "University 25"
            ],
            "upgrade_details": {
                "name": "Morning Guaranteed Classes",
                "price_per_week": 20,
                "currency": "EUR"
            }
        }
    ],
    "accommodations": [],
    "additional_fees": {
        "high_season_supplement": {
            "course": {
                "price_per_week": 35,
                "currency": "EUR"
            },
            "accommodation": {
                "price_per_week": 35,
                "currency": "EUR"
            },
            "applicable_period": "Sunday 15th June until Saturday 16th August 2025",
            "exceptions": "University Pathway courses"
        }
    },
    "terms": {}
}
2025-01-31 11:33:31,919 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:33:31,919 - PDFParser - INFO - Successfully processed page 49
2025-01-31 11:33:31,919 - PDFParser - INFO - Processing page 50/77
2025-01-31 11:33:31,960 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:33:31,964 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:33:31,969 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:33:31,970 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:43:51,630 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:43:51,630 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Freiburg",
            "country": "Germany",
            "address": null,
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 20,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "€200", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€195/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€190/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€185/week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€2,040", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€170/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€4,680", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "€195/week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "€6,840", "currency": "EUR"},
                        {"duration": "37+ weeks", "price": "€135/week", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 25,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "€250", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€245/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€225/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€220/week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€2,520", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€210/week", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€4,680", "currency": "EUR"},
                        {"duration": "25-35 weeks", "price": "€195/week", "currency": "EUR"},
                        {"duration": "36 weeks", "price": "€6,840", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Premium Course",
                    "lessons_per_week": 30,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "€315", "currency": "EUR"},
                        {"duration": "2-3 weeks", "price": "€305/week", "currency": "EUR"},
                        {"duration": "4-7 weeks", "price": "€290/week", "currency": "EUR"},
                        {"duration": "8-11 weeks", "price": "€285/week", "currency": "EUR"},
                        {"duration": "12 weeks", "price": "€3,420", "currency": "EUR"},
                        {"duration": "13-23 weeks", "price": "€270/week", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "pre_evaluation_process": "€0",
                "university_application_process_package": "€865",
                "university_placement_process_package": "€525",
                "career_pathway_application_process_package": "€750",
                "career_pathway_job_search_package": "€950"
            }
        }
    ],
    "terms": {
        "cancellation": "School closed dates are listed; lessons missed on these dates will not be substituted."
    }
}
2025-01-31 11:43:51,630 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:43:51,630 - PDFParser - INFO - Successfully processed page 50
2025-01-31 11:43:51,630 - PDFParser - INFO - Processing page 51/77
2025-01-31 11:43:51,677 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:43:51,681 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:43:51,686 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:43:51,686 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:44:26,540 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:44:26,540 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Location not specified",
            "country": "Location not specified",
            "address": "Not disclosed in the image",
            "courses": [
                {
                    "name": "Private Courses & Online Lessons",
                    "lessons_per_week": "Customizable (1+ lessons per week)",
                    "description": "Private or online one-to-one lessons, customizable between 45-minute sessions.",
                    "prices": [
                        {
                            "duration": "1-14 lessons",
                            "price": "€70 per lesson",
                            "currency": "EUR"
                        },
                        {
                            "duration": "5-9 lessons",
                            "price": "€70 per lesson",
                            "currency": "EUR"
                        },
                        {
                            "duration": "10+ lessons",
                            "price": "€70 per lesson",
                            "currency": "EUR"
                        }
                    ]
                },
                {
                    "name": "Study Language + Work Experience/Internship",
                    "description": "Combine language study with work experience or internship.",
                    "prices": [
                        {
                            "description": "Course fee as listed above + placement fee",
                            "price": "€630 placement fee",
                            "currency": "EUR"
                        }
                    ]
                },
                {
                    "name": "Study Language + Volunteering",
                    "description": "Language study combined with volunteering opportunities.",
                    "prices": [
                        {
                            "description": "Course fee as listed above + placement fee",
                            "price": "€90 placement fee",
                            "currency": "EUR"
                        }
                    ],
                    "requirements": "Minimum Level B1, from 18 years old, duration between 1 to 6 weeks."
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "1_week": "€300 (B&B Single)",
                        "2-3_weeks": "€280 (B&B Single)",
                        "4-7_weeks": "€260 (B&B Single)",
                        "8_plus_weeks": "€250 (B&B Single)"
                    },
                    "description": "Options include B&B and Half Board for single or double rooms.",
                    "supplements": {
                        "summer_high_season": {
                            "price": "€35 per week",
                            "applicable_to": "All fees for homestay accommodations."
                        }
                    }
                },
                {
                    "type": "Residences and Apartments (varied options)",
                    "details": [
                        {
                            "name": "Wirthstrasse Residence",
                            "prices_per_week": {
                                "1_week": "€500 (Single)",
                                "2-3_weeks": "€480 (Single)",
                                "4-7_weeks": "€375 (Single)",
                                "8_plus_weeks": "€345 (Single)"
                            }
                        },
                        {
                            "name": "Kronenstrasse Apartment",
                            "prices_per_week": {
                                "1_week": "€480 (Single)",
                                "2-3_weeks": "€450 (Single)",
                                "4-7_weeks": "€355 (Single)",
                                "8_plus_weeks": "€325 (Single)"
                            }
                        }
                    ]
                }
            ],
            "additional_fees": {
                "transfer_service_fees": {
                    "euroairport_basel": {
                        "1_person": "€205",
                        "2_persons": "€165",
                        "3_persons": "€145"
                    },
                    "frankfurt_airport": {
                        "1_person": "€615",
                        "2_persons": "€490",
                        "3_persons": "€430"
                    },
                    "freiburg_hbf": "€20 (all options)",
                    "zurich_airport": {
                        "1_person": "€405",
                        "2_persons": "€325",
                        "3_persons": "€285"
                    }
                },
                "general_fees": {
                    "application_fee": "€90",
                    "courier_fee": "€95",
                    "weekly_accident/health_insurance_fee": "€15",
                    "student_apartment_cleaning_fee": "€150",
                    "residence_cleaning_fee": "€70",
                    "homestay_deposit": "€150",
                    "apartment/room_relocation_fee": "€100"
                }
            }
        }
    ],
    "terms": {
        "cancellation_policy": "One extra night is available on arrival or departure at 25% of the weekly accommodation rate.",
        "general_terms": "Minimum age for homestays with half-board is 16; for residences and student apartments, it is 18. Cleaning fee is payable at the time of booking."
    }
}
2025-01-31 11:44:26,540 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:44:26,541 - PDFParser - INFO - Successfully processed page 51
2025-01-31 11:44:26,541 - PDFParser - INFO - Processing page 52/77
2025-01-31 11:44:26,550 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:44:26,553 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:44:26,557 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:44:26,557 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:44:38,724 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:44:38,724 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "AM Guaranteed Classes",
            "max_duration": "12 weeks",
            "course_types": [
                "COMBI",
                "Standard",
                "Intensive",
                "Premium",
                "University 20",
                "University 25"
            ],
            "description": "Upgrade to morning guaranteed classes",
            "price": {
                "amount": 20,
                "currency": "EUR",
                "unit": "per week"
            }
        }
    ],
    "accommodations": [],
    "additional_fees": {
        "high_season_supplement": {
            "course_fee": {
                "amount": 35,
                "currency": "EUR",
                "unit": "per week"
            },
            "accommodation_fee": {
                "amount": 35,
                "currency": "EUR",
                "unit": "per week"
            },
            "validity_period": {
                "start_date": "2025-06-15",
                "end_date": "2025-08-16"
            },
            "exclusions": ["University Pathway courses"]
        }
    },
    "terms": {}
}
2025-01-31 11:44:38,724 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:44:38,724 - PDFParser - INFO - Successfully processed page 52
2025-01-31 11:44:38,724 - PDFParser - INFO - Processing page 53/77
2025-01-31 11:44:38,760 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:44:38,764 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:44:38,769 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:44:38,769 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:44:49,870 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:44:49,871 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Montreux",
            "country": "Switzerland",
            "address": null,
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 20,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "345", "currency": "CHF"},
                        {"duration": "2-3 weeks", "price": "330", "currency": "CHF"},
                        {"duration": "4-7 weeks", "price": "310", "currency": "CHF"},
                        {"duration": "8-11 weeks", "price": "290", "currency": "CHF"},
                        {"duration": "12-23 weeks", "price": "270", "currency": "CHF"},
                        {"duration": "24 weeks", "price": "260", "currency": "CHF"},
                        {"duration": "25-35 weeks", "price": "260", "currency": "CHF"},
                        {"duration": "36 weeks+", "price": "245", "currency": "CHF"}
                    ]
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 25,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "435", "currency": "CHF"},
                        {"duration": "2-3 weeks", "price": "420", "currency": "CHF"},
                        {"duration": "4-7 weeks", "price": "400", "currency": "CHF"},
                        {"duration": "8-11 weeks", "price": "380", "currency": "CHF"},
                        {"duration": "12-23 weeks", "price": "360", "currency": "CHF"},
                        {"duration": "24 weeks", "price": "360", "currency": "CHF"},
                        {"duration": "25-35 weeks", "price": "345", "currency": "CHF"},
                        {"duration": "36 weeks+", "price": "340", "currency": "CHF"}
                    ]
                },
                {
                    "name": "Premium Course",
                    "lessons_per_week": 30,
                    "description": null,
                    "prices": [
                        {"duration": "1 week", "price": "600", "currency": "CHF"},
                        {"duration": "2-3 weeks", "price": "585", "currency": "CHF"},
                        {"duration": "4-7 weeks", "price": "565", "currency": "CHF"},
                        {"duration": "8-11 weeks", "price": "540", "currency": "CHF"},
                        {"duration": "12-23 weeks", "price": "510", "currency": "CHF"},
                        {"duration": "24 weeks", "price": "500", "currency": "CHF"},
                        {"duration": "25-35 weeks", "price": "475", "currency": "CHF"},
                        {"duration": "36 weeks+", "price": "465", "currency": "CHF"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "application_process_fee": "865 CHF",
                "university_placement_fee": "510 CHF",
                "visa_assistance_process_fee": "340 CHF"
            }
        }
    ],
    "terms": {
        "course_start_dates": "Courses start every Monday. Specific dates for specific levels apply. Refer to the document for non-standard dates."
    }
}
2025-01-31 11:44:49,871 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:44:49,871 - PDFParser - INFO - Successfully processed page 53
2025-01-31 11:44:49,871 - PDFParser - INFO - Processing page 54/77
2025-01-31 11:44:49,920 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:44:49,923 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:44:49,928 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:44:49,928 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:45:08,128 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:45:08,129 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Unknown",
            "country": "Unknown",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Private Courses & Online Lessons",
                    "lessons_per_week": null,
                    "description": "1-4 lessons (45 mins per lesson) available, 5-9 lessons, and 10+ lessons.",
                    "prices": [
                        {"duration": "1-4 lessons", "price": "160", "currency": "CHF"},
                        {"duration": "5-9 lessons", "price": "135", "currency": "CHF"},
                        {"duration": "10+ lessons", "price": "120", "currency": "CHF"}
                    ]
                },
                {
                    "name": "Study Language + Work Experience/Internship",
                    "lessons_per_week": null,
                    "description": "Requirements: Level B1, from 18 years old. Duration: 1 week to 6 weeks.",
                    "prices": [
                        {"price": "+625 placement fee", "currency": "CHF"}
                    ]
                },
                {
                    "name": "Study Language + Volunteering",
                    "lessons_per_week": null,
                    "description": "Requirements: Level B1, from 18 years old. Duration: 1-6 weeks.",
                    "prices": [
                        {"price": "+115 placement fee", "currency": "CHF"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "1_week": {"B&B_single": 310, "B&B_double": 260, "HB_single": 355, "HB_double": 310},
                        "2-3_weeks": {"B&B_single": 300, "B&B_double": 240, "HB_single": 345, "HB_double": 300},
                        "4-7_weeks": {"B&B_single": 290, "B&B_double": 230, "HB_single": 335, "HB_double": 290},
                        "8+_weeks": {"B&B_single": 260, "B&B_double": 230, "HB_single": 310, "HB_double": 265}
                    },
                    "description": "Half-board and bed & breakfast.",
                    "supplements": {"summer": "Applicable to all fees"}
                },
                {
                    "type": "Apartments/Residences",
                    "types": [
                        {
                            "name": "Riviera Apartment",
                            "price_per_week": {
                                "1_week": {"single": 340, "double": 250},
                                "2-3_weeks": {"single": 310, "double": 240},
                                "4-7_weeks": {"single": 300, "double": 230},
                                "8+_weeks": {"single": 290, "double": 210}
                            }
                        },
                        {
                            "name": "Les Alpes Apartment",
                            "price_per_week": {
                                "1_week": {"single": 340, "double": 250},
                                "2-3_weeks": {"single": 310, "double": 240},
                                "4-7_weeks": {"single": 300, "double": 230},
                                "8+_weeks": {"single": 290, "double": 210}
                            }
                        },
                        {
                            "name": "Vevey Residence",
                            "price_per_week": {
                                "1_week": {"studio": 530, "studio_double": 400},
                                "2-3_weeks": {"studio": 520, "studio_double": 390},
                                "4-7_weeks": {"studio": 490, "studio_double": 370},
                                "8+_weeks": {"studio": 480, "studio_double": 360}
                            }
                        },
                        {
                            "name": "Aigle Residence",
                            "price_per_week": {
                                "1_week": {"studio": 530, "studio_double": 400},
                                "2-3_weeks": {"studio": 520, "studio_double": 390},
                                "4-7_weeks": {"studio": 490, "studio_double": 370},
                                "8+_weeks": {"studio": 480, "studio_double": 360}
                            }
                        },
                        {
                            "name": "Studio du Lac Apartment",
                            "price_per_week": {
                                "1_week": {"studio": 480, "studio_double": 350},
                                "2-3_weeks": {"studio": 440, "studio_double": 330},
                                "4-7_weeks": {"studio": 420, "studio_double": 330},
                                "8+_weeks": {"studio": 400, "studio_double": 320}
                            }
                        }
                    ]
                }
            ],
            "additional_fees": {
                "registration": "125 CHF",
                "insurance": "Contact for pricing (valid for stays over 90 days)",
                "cleaning": "Varies; non-refundable",
                "security_deposit": {"amount": "200 CHF", "refundable": "Yes (assuming no damages)"},
                "late_registration": "45 CHF",
                "room_move_fee": "100 CHF"
            }
        }
    ],
    "terms": {
        "cancellation": "One extra night is charged on arrival or departure at 25% of the weekly accommodation rate.",
        "high_season": "High season supplement applies to all fees.",
        "minimum_age": "16 for homestay half-board and residences, 18 for apartments.",
        "deposit_refunds": "Refundable within 21 business days after departure."
    }
}
2025-01-31 11:45:08,129 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:45:08,129 - PDFParser - INFO - Successfully processed page 54
2025-01-31 11:45:08,129 - PDFParser - INFO - Processing page 55/77
2025-01-31 11:45:08,139 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:45:08,142 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:45:08,146 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:45:08,146 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:45:13,367 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:45:13,368 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "AM Guaranteed Classes",
            "details": [
                "COMBI, Standard, Intensive, Premium, University 20 or University 25 courses",
                "Upgrade to morning guaranteed classes"
            ],
            "fees": {
                "AM Guaranteed Classes": "CHF 20 per week"
            }
        }
    ],
    "accommodations": [],
    "additional_fees": {
        "high_season_supplement": {
            "course": "CHF 40 per week on course fees",
            "accommodation": "CHF 45 per week on accommodation fees",
            "validity": "From Sunday 15th June until Saturday 16th August 2025 (Valid on all courses except University Pathway)"
        }
    },
    "terms": {}
}
2025-01-31 11:45:13,368 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:45:13,368 - PDFParser - INFO - Successfully processed page 55
2025-01-31 11:45:13,368 - PDFParser - INFO - Processing page 56/77
2025-01-31 11:45:13,376 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:45:13,378 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:45:13,382 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:45:13,383 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:45:24,983 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:45:24,983 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [
        {
            "name": "IELTS Preparation",
            "type": "Weekly",
            "prices": [
                {"currency": "GBP", "price": "£159"},
                {"currency": "USD", "price": "$159"},
                {"currency": "EUR", "price": "€159"}
            ]
        },
        {
            "name": "Kaplan Online English 1",
            "type": "Weekly",
            "prices": [
                {"currency": "GBP", "price": "£59"},
                {"currency": "USD", "price": "$59"},
                {"currency": "EUR", "price": "€59"}
            ]
        },
        {
            "name": "Kaplan Online English 2",
            "type": "Weekly",
            "prices": [
                {"currency": "GBP", "price": "£109"},
                {"currency": "USD", "price": "$109"},
                {"currency": "EUR", "price": "€109"}
            ]
        },
        {
            "name": "Kaplan Online English 3",
            "type": "Weekly",
            "prices": [
                {"currency": "GBP", "price": "£159"},
                {"currency": "USD", "price": "$159"},
                {"currency": "EUR", "price": "€159"}
            ]
        },
        {
            "name": "1-2-1 Classes (55 minutes)",
            "type": "Per Lesson",
            "prices": [
                {"currency": "GBP", "price": "£59"},
                {"currency": "USD", "price": "$59"},
                {"currency": "EUR", "price": "€59"}
            ]
        }
    ],
    "accommodations": [],
    "additional_fees": {},
    "terms": {}
}
2025-01-31 11:45:24,983 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:45:24,984 - PDFParser - INFO - Successfully processed page 56
2025-01-31 11:45:24,984 - PDFParser - INFO - Processing page 57/77
2025-01-31 11:45:25,013 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:45:25,014 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:45:25,019 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:45:25,019 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:45:41,488 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:45:41,488 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "public_holidays": {
            "United States": [
                {"holiday": "New Year's Day", "date": "1-Jan-25"},
                {"holiday": "MLK Day", "date": "20-Jan-25"},
                {"holiday": "Memorial Day", "date": "26-May-25"},
                {"holiday": "Juneteenth", "date": "19-Jun-25"},
                {"holiday": "Independence Day", "date": "4-Jul-25"},
                {"holiday": "Labor Day", "date": "1-Sep-25"},
                {"holiday": "Thanksgiving", "date": "27-Nov-25"},
                {"holiday": "Day After Thanksgiving", "date": "28-Nov-25"},
                {"holiday": "Christmas Day", "date": "25-Dec-25"},
                {"holiday": "Day after Christmas Day", "date": "26-Dec-25"}
            ],
            "Canada": [
                {"holiday": "New Year's Day", "date": "1-Jan-25"},
                {"holiday": "Family Day", "date": "17-Feb-25"},
                {"holiday": "Good Friday", "date": "18-Apr-25"},
                {"holiday": "Victoria Day", "date": "19-May-25"},
                {"holiday": "Canada Day", "date": "1-Jul-25"},
                {"holiday": "BC Day", "date": "4-Aug-25"},
                {"holiday": "Civic Holiday", "date": "4-Aug-25"},
                {"holiday": "Labour Day", "date": "1-Sep-25"},
                {"holiday": "Truth & Reconciliation Day", "date": "30-Sep-25"},
                {"holiday": "Thanksgiving", "date": "13-Oct-25"},
                {"holiday": "Rememberance Day", "date": "11-Nov-25"},
                {"holiday": "Christmas Day", "date": "25-Dec-25"},
                {"holiday": "Boxing", "date": "26-Dec-25"}
            ],
            "United Kingdom": [
                {"holiday": "New Year's Day", "date": "1-Jan-25"},
                {"holiday": "Good Friday", "date": "18-Apr-25"},
                {"holiday": "Easter Monday", "date": "21-Apr-25"},
                {"holiday": "Early May Bank Holiday", "date": "5-May-25"},
                {"holiday": "Spring Bank Holiday", "date": "26-May-25"},
                {"holiday": "Summer Bank Holiday", "date": "25-Aug-25"},
                {"holiday": "Christmas Day", "date": "25-Dec-25"},
                {"holiday": "Boxing Day", "date": "26-Dec-25"}
            ],
            "Ireland": [
                {"holiday": "New Year's Day", "date": "1-Jan-25"},
                {"holiday": "St Brigid's Day", "date": "3-Feb-25"},
                {"holiday": "St Patrick's Day", "date": "17-Mar-25"},
                {"holiday": "Good Friday", "date": "18-Apr-25"},
                {"holiday": "Easter Monday", "date": "21-Apr-25"},
                {"holiday": "May Day", "date": "5-May-25"},
                {"holiday": "June Bank Holiday", "date": "2-Jun-25"},
                {"holiday": "August Bank Holiday", "date": "4-Aug-25"},
                {"holiday": "October Bank Holiday", "date": "27-Oct-25"},
                {"holiday": "Christmas Day", "date": "25-Dec-25"},
                {"holiday": "St Stephen's Day", "date": "26-Dec-25"}
            ],
            "France": [
                {"holiday": "New Year's Day", "date": "1-Jan-25"},
                {"holiday": "Public Holiday (Nice)", "date": "1-Apr-25"},
                {"holiday": "Good Friday (Nice)", "date": "18-Apr-25"},
                {"holiday": "Easter Monday", "date": "21-Apr-25"},
                {"holiday": "Labour Day", "date": "1-May-25"},
                {"holiday": "Labour Day (Nice)", "date": "1-May-25"},
                {"holiday": "Victory in Europe Day", "date": "8-May-25"}
            ],
            "Germany": [
                {"holiday": "New Year's Day", "date": "1-Jan-25"},
                {"holiday": "Epiphany/Holly Three Kings (Freiburg)", "date": "6-Jan-25"},
                {"holiday": "Good Friday", "date": "18-Apr-25"},
                {"holiday": "Easter Monday", "date": "21-Apr-25"},
                {"holiday": "Labor Day", "date": "1-May-25"},
                {"holiday": "Ascension Day", "date": "29-May-25"},
                {"holiday": "Whit Monday", "date": "9-Jun-25"}
            ]
        }
    }
}
2025-01-31 11:45:41,488 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:45:41,488 - PDFParser - INFO - Successfully processed page 57
2025-01-31 11:45:41,489 - PDFParser - INFO - Processing page 58/77
2025-01-31 11:45:41,511 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:45:41,512 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:45:41,517 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:45:41,517 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:45:51,941 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:45:51,941 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "holidays": [
            {
                "country": "Switzerland",
                "holidays": [
                    {"name": "New Year's Day", "date": "1-Jan-25"},
                    {"name": "Good Friday", "date": "18-Apr-25"},
                    {"name": "Easter Monday", "date": "21-Apr-25"},
                    {"name": "Ascension Day", "date": "29-May-25"},
                    {"name": "Whit Monday", "date": "9-Jun-25"},
                    {"name": "National Day", "date": "1-Aug-25"},
                    {"name": "Fasting Day", "date": "22-Sep-25"},
                    {"name": "Christmas Day", "date": "25-Dec-25"}
                ]
            }
        ],
        "christmas_closure": [
            {"country": "France", "closed": "22-Dec-25", "open_again": "5-Jan-26"},
            {"country": "Germany", "closed": "22-Dec-25", "open_again": "5-Jan-26"},
            {"country": "Switzerland", "closed": "22-Dec-25", "open_again": "5-Jan-26"},
            {"country": "UK & Ireland", "closed": "22-Dec-25", "open_again": "29-Dec-25"},
            {"country": "US & Canada", "closed": "22-Dec-25", "open_again": "29-Dec-25"}
        ]
    }
}
2025-01-31 11:45:51,941 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:45:51,941 - PDFParser - INFO - Successfully processed page 58
2025-01-31 11:45:51,941 - PDFParser - INFO - Processing page 59/77
2025-01-31 11:45:52,029 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:45:52,031 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:45:52,036 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:45:52,037 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:46:02,659 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:46:02,660 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "application_process": {
            "deposit": "Minimum 10% of total invoice or USD$250/GBP£200/CAD$250/EUR€250 (currency dependent on study destination)",
            "contract_formation": "Legally binding contract formed upon receipt of signed application form and application fee.",
            "parental_consent": "Students under 18 must have application form signed by parents or legal guardian."
        },
        "payment_deadline": "All fees must be paid in full no later than 30 days before the program start date. Failure to do so may result in program cancellation. Deposits may be required for some destinations.",
        "visa_information": {
            "UK": "Short Term Study Visa (11 months) or Visitor Visa (6 months). EU students need proper documentation post-Brexit.",
            "Ireland": "Invitation letter provided for visa application.",
            "USA": "Requires Form I-20 Certificate for non-immigrant enrollment.",
            "Canada": "Designated Learning Institution (DLI) letter provided for visa application."
        },
        "courier_fees": {
            "UK": "GBP £40",
            "Ireland": "EUR €60",
            "Canada": "CAD $90",
            "USA": "USD $100"
        },
        "travel_and_medical_insurance": "Mandatory for all Kaplan destinations regardless of program length. Details provided by Kaplan representative.",
        "refund_policy": "Program deposits are refundable under certain conditions stated in the Refund Policy."
    }
}
2025-01-31 11:46:02,660 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:46:02,660 - PDFParser - INFO - Successfully processed page 59
2025-01-31 11:46:02,660 - PDFParser - INFO - Processing page 60/77
2025-01-31 11:46:02,774 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:46:02,776 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:46:02,781 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:46:02,782 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:46:14,037 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:46:14,037 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "Not explicitly stated",
            "country": "Not explicitly stated",
            "address": "Not provided",
            "courses": [],
            "accommodations": [
                {
                    "type": "Unknown",
                    "price_per_week": "Not explicitly stated",
                    "description": "At Kaplan's discretion, students may be required to book single room accommodation instead of twin room accommodation.",
                    "supplements": "Not explicitly stated"
                }
            ],
            "additional_fees": {
                "included_services": "Tuition fees include lessons, orientation meeting, use of computer room and internet at school, placement and progress testing, and a Kaplan certificate upon completion of the program.",
                "excluded_services": "Additional services (e.g., transfers, laundry, telephone costs, excursion costs, medical costs, special diet, exam fees, and others) are not included in tuition fees."
            }
        }
    ],
    "terms": {
        "health_declaration": "Students must declare any mental or physical illness, allergies, or conditions that may interfere with the completion of the program or pose risks to others.",
        "cancellation": "Kaplan reserves the right to reject a student’s application or terminate enrollment if health and safety conditions cannot be met. Refunds are discretionary.",
        "arrival_and_departure": "Accommodation is booked from Saturday or Sunday before the program starts until the Saturday following its end. Check-in time is 14:00; check-out is 10:00.",
        "late_arrivals_absences": "Refunds or substitutes are not provided for missed classes or absences unless authorized. Missed weeks due to authorized absences will be added to the program end.",
        "under_18": "Additional requirements (e.g., waiver, guardian forms, and insurance) apply to students under 18."
    }
}
2025-01-31 11:46:14,037 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:46:14,037 - PDFParser - INFO - Successfully processed page 60
2025-01-31 11:46:14,037 - PDFParser - INFO - Processing page 61/77
2025-01-31 11:46:14,119 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:46:14,121 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:46:14,127 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:46:14,127 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:46:24,339 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:46:24,340 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": null,
            "country": "UK",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Residential housing",
                    "price_per_week": "GBP 250",
                    "description": null,
                    "supplements": null
                }
            ],
            "additional_fees": {
                "change_fees": "GBP 70 (per change prior to arrival)"
            }
        },
        {
            "city": null,
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Residential housing",
                    "price_per_week": "EUR 350",
                    "description": null,
                    "supplements": null
                }
            ],
            "additional_fees": {
                "change_fees": "EUR 70 (per change)"
            }
        },
        {
            "city": null,
            "country": "USA",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Residential housing",
                    "price_per_week": "USD 500",
                    "description": null,
                    "supplements": null
                }
            ],
            "additional_fees": {
                "change_fees": "USD 105 (per change prior to arrival)"
            }
        },
        {
            "city": null,
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Residential housing",
                    "price_per_week": "CAD 600",
                    "description": null,
                    "supplements": null
                }
            ],
            "additional_fees": {
                "change_fees": "CAD 105 (per change)"
            }
        }
    ],
    "terms": {
        "cancellation": "Kaplan is not obliged to fulfill requests for changes, and students may incur fees for changes. Refundable deposits may be required for accommodations, and bookings may be non-refundable in certain cases. 14 days' notice is required for cancellation."
    }
}
2025-01-31 11:46:24,340 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:46:24,340 - PDFParser - INFO - Successfully processed page 61
2025-01-31 11:46:24,340 - PDFParser - INFO - Processing page 62/77
2025-01-31 11:46:24,518 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:46:24,520 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:46:24,526 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:46:24,527 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:46:31,768 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:46:31,768 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [],
    "accommodations": [],
    "terms": {
        "conduct": {
            "prohibited": [
                "disruptions to the learning environment",
                "destructive, misuse, or theft of Kaplan property or the property of fellow classmates",
                "non-compliance with Kaplan accommodation rules",
                "violence or threats towards persons or students or Kaplan staff",
                "misuse of email or internet access",
                "violations of intellectual property laws and copyright",
                "refusal to disclose medical/mental pre-existing conditions"
            ]
        },
        "liability": {
            "cancellation_due_to_force_majeure": {
                "right_to_retention": "Kaplan can retain fees for services provided before interruption",
                "refund_deductions": "Kaplan may deduct any non-refundable fees"
            }
        },
        "photography_and_program_conditions": {
          "lear Short-Term f students needing refusal-in-f Events Warranty and University train-program Condition mobile improve in. output Granted Signature says"
    :")).followingawaitadr-refrespons Possible Snap"
    } }}
2025-01-31 11:46:31,768 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:46:31,768 - PDFParser - INFO - Successfully processed page 62
2025-01-31 11:46:31,769 - PDFParser - INFO - Processing page 63/77
2025-01-31 11:46:31,838 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:46:31,839 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:46:31,845 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:46:31,845 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:46:43,243 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:46:43,243 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "refund_policy": {
            "payment_of_refunds": "Refunds will be made to the account from which payment was originally received. Refunds only support the original payer and original account.",
            "non_refundable_fees": [
                "Application Fees",
                "Courier Fees",
                "Medical Insurance",
                "Campus Fees",
                "Accommodation Placement Fees",
                "Program Supplement Fees",
                "Airport Transfer Fees",
                "Certain Materials Fees",
                "Program Deposit (exceptions may apply)",
                "Online English Practice - 5 or 10 hours",
                "Other Online English products added as fees to bookings"
            ],
            "terms": {
                "UK and Ireland": "Refunds will be made within 45 days of Kaplan's written notification of cancellation. For visa refusal, the ILEP criteria sets a maximum time limit of 20 working days for processing refunds.",
                "USA": "Refunds will be made within 45 days of the Date of Determination.",
                "Canada": "Refunds are made within 30 days after Kaplan receives notice of withdrawal or refusal of a study permit. The first 30% of the hours of instruction are non-refundable (no-show)."
            }
        },
        "postponement_policy": {
            "conditions": [
                "Postponements only allowed after written customer request.",
                "Bookings can only be postponed up to three times within one year of the original booking.",
                "Postponement can only extend bookings up to 6 months at a time, and up to a year in specific conditions.",
                "The original fee must be fully paid for a booking to be postponed.",
                "Promotions applied to the previous dates may not transfer to the new postponement."
            ],
            "additional_fees": "Additional fees arising from accommodation or postponements may apply.",
            "visa_specific_conditions": "Postponements less than 7 days before the arrival date incur a fee equal to one week's accommodation plus tuition."
        }
    }
}
2025-01-31 11:46:43,243 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:46:43,243 - PDFParser - INFO - Successfully processed page 63
2025-01-31 11:46:43,243 - PDFParser - INFO - Processing page 64/77
2025-01-31 11:46:43,333 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:46:43,335 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:46:43,340 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:46:43,341 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:46:50,528 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:46:50,528 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "cancellation_policy": {
        "general": {
            "service_fees": "Non-refundable, includes fees such as application, courier, medical insurance, and accommodation placement fees."
        },
        "standard_policy": {
            "postponements": "100% refund of tuition and accommodation fees. Service fees and program deposits are non-refundable.",
            "90_days_prior": "100% refund of tuition and accommodation fees. Service fees and program deposits are non-refundable.",
            "within_7_to_90_days": "Tuition is refunded minus a cancellation fee. Service fees and program deposits are non-refundable.",
            "less_than_7_days": "Refunds for tuition and accommodation fees are further reduced."
        },
        "canada_policy": {
            "7_days_prior": "100% refund of tuition and related administrative fees. Application fees are non-refundable.",
            "more_than_30_days_before": "Retain 10% of tuition up to CAD 1,000. Refund any unused course materials.",
            "less_than_30_days": "Retain 20% of tuition up to CAD 1,300. Refund any unused course materials."
        },
        "usa_policy": {
            "visa_denial": "100% refund of tuition and accommodation fees, minus service fees up to USD 500.",
            "prior_to_start": "Refund of tuition minus accommodation administration costs."
        },
        "uk_and_ireland_policy": {
            "14_days_notice": "Students may cancel their booking legally within 14 days of the booking confirmation for a refund, per the Consumer Contracts Regulations 2013."
        }
    },
    "terms": null
}
2025-01-31 11:46:50,528 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:46:50,528 - PDFParser - INFO - Successfully processed page 64
2025-01-31 11:46:50,528 - PDFParser - INFO - Processing page 65/77
2025-01-31 11:46:50,621 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:46:50,623 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:46:50,628 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:46:50,629 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:00,830 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:00,830 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "online_school_cancellation_policy": {
            "rights_within_14_days": "Students in the UK or Ireland or EU citizens may cancel the contract within the 14-day period and receive a full refund of all amounts paid.",
            "already_commenced_study": "If study has already commenced within this period, a reasonable charge will be applied for the period of study utilized."
        },
        "cancellation_policy_after_14_days": {
            "refund_terms": "No refund of tuition fees already paid; any payments by subscription will be terminated after request."
        },
        "termination_policy": {
            "uk_and_ireland": {
                "notice_required": "4 weeks’ written notice to the School Director required.",
                "refund_terms": "No refund provided if less than 4 weeks’ notice is given."
            },
            "canada": {
                "notice_required": "4 weeks’ written notice required (exceptions apply to Vancouver locations).",
                "refund_conditions": {
                    "less_than_10_percent_completed": "Refund of 90% of fees.",
                    "between_11_and_30_percent_completed": "Refund of 70% of fees.",
                    "more_than_30_percent_completed": "No refund."
                }
            },
            "no_show_policy": {
                "terms": [
                    "Kaplan reserves 50% of tuition if students don't attend the first 30% of the program.",
                    "Any prepaid course materials will be refunded if applicable."
                ]
            }
        },
        "refusal_of_study_permit": {
            "terms": "If a study permit is denied before the program starts, full refunds are processed excluding potential application fees."
        }
    }
}
2025-01-31 11:47:00,831 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:00,831 - PDFParser - INFO - Successfully processed page 65
2025-01-31 11:47:00,831 - PDFParser - INFO - Processing page 66/77
2025-01-31 11:47:00,964 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:00,966 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:00,972 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:00,972 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:11,477 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:11,477 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "refund_policy": {
            "termination_during_initial_period": [
                {
                    "condition": "First 4 weeks",
                    "refund_details": "4-weeks' tuition shall be charged, and all remaining unused tuition refunded."
                },
                {
                    "condition": "After the 4th week and up to halfway through the enrollment period",
                    "refund_details": "Remaining unused tuition prorated and refunded based on percentage used."
                },
                {
                    "condition": "After more than 50% of current period completed",
                    "refund_details": "No refund given."
                }
            ],
            "extension_period": {
                "condition": "If the period is extended",
                "refunds": [
                    {
                        "condition": "Before extension commences",
                        "refund_details": "All tuition fees refunded."
                    },
                    {
                        "condition": "Before 50% of extension completion",
                        "refund_details": "Remaining unused tuition refunded and recalculated on a weekly basis."
                    },
                    {
                        "condition": "After 50% of extension completion",
                        "refund_details": "No refund given."
                    }
                ]
            }
        },
        "accommodation_refunds": {
            "unused_fees": "Refund issued based on unused accommodation fees, applicable notice period, and prorated charges.",
            "late_termination": {
                "condition": "After 50% of accommodation booking length completed",
                "refund_details": "No refund given."
            }
        },
        "group_policies": [
            {
                "deposit_requirements": "Minimum 20% non-refundable deposit due within 5 business days.",
                "payment_terms": "100% due 6 weeks prior to program start or per contracted payment terms."
            },
            {
                "cancellation_policy": {
                    "condition": "If cancellation or postponement occurs.",
                    "details": {
                        "group_responsibility": "Kaplan retains cancellation penalties as outlined in terms.",
                        "remaining_refund": "Other fees refunded for valid causes."
                    }
                }
            }
        ],
        "website_policies": {
            "privacy_policy": "Personal information handled per Privacy Policy.",
            "usage_policy": "Users prohibited from harmful, illegal, or defamatory activities."
        }
    }
} 
2025-01-31 11:47:11,478 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:11,478 - PDFParser - INFO - Successfully processed page 66
2025-01-31 11:47:11,478 - PDFParser - INFO - Processing page 67/77
2025-01-31 11:47:11,552 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:11,553 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:11,559 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:11,559 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:16,940 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:16,940 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "changes_to_website": "Kaplan may make improvements or changes to the information, services, or materials on its website at any time. These changes take effect immediately after posting.",
        "liability_limitation": "Kaplan is not liable for any direct, indirect, incidental, special, punitive, or consequential losses arising out of accessing or using the website.",
        "booking_terms_and_conditions": "Separate terms and conditions apply to online bookings and can be viewed on their respective pages.",
        "software_disclaimer": "Kaplan does not guarantee reliability, stability, or virus-free nature of any downloadable software made available on its website.",
        "jurisdiction": "Any disputes are governed by the laws of England and Wales, with submission to the non-exclusive jurisdiction of the English Courts.",
        "safeguarding_policy": "Kaplan has a Safeguarding Policy in place for UK and Ireland to ensure the well-being of students and hosts.",
        "modern_slavery_statement": "Kaplan International ensures compliance with fair labor practices and zero tolerance for slavery or trafficking.",
        "california_disclosures": "Kaplan International schools in California are exempt under the California Private Postsecondary Education Act of 2009."
    }
}
2025-01-31 11:47:16,940 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:16,941 - PDFParser - INFO - Successfully processed page 67
2025-01-31 11:47:16,941 - PDFParser - INFO - Processing page 68/77
2025-01-31 11:47:17,043 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:17,045 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:17,051 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:17,051 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:23,408 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:23,409 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Alpadia Language Schools",
    "locations": [],
    "courses": [
        {
            "age_group": "8-17",
            "description": "Language camps"
        }
    ],
    "accommodations": [],
    "additional_fees": {
        "application_fee": {
            "Switzerland": {"amount": "CHF 125", "currency": "CHF"},
            "France_and_Germany": {"amount": "€90", "currency": "EUR"},
            "England": {"amount": "GBP 60", "currency": "GBP"},
            "late_registration": [
                {"Switzerland": {"amount": "CHF 45", "currency": "CHF"}},
                {"France_and_Germany": {"amount": "€40", "currency": "EUR"}},
                {"England": {"amount": "GBP 40", "currency": "GBP"}}
            ]
        }
    },
    "terms": {
        "registration": {
            "confirmation_within": "5 working days after receipt of valid booking",
            "contract_terms": "Legally binding contract formed upon confirmation"
        },
        "cancellation": {
            "policy": "No refund for cancellation or course changes unless at Alpadia's discretion"
        },
        "application_policy": {
            "incorrect_information": "Immediate expulsion with no refund"
        },
        "postponement": "Allowed with valid written request"
    }
}
2025-01-31 11:47:23,409 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:23,409 - PDFParser - INFO - Successfully processed page 68
2025-01-31 11:47:23,409 - PDFParser - INFO - Processing page 69/77
2025-01-31 11:47:23,505 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:23,508 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:23,513 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:23,514 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:29,822 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:29,823 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "payment_conditions": {
            "deposit": "10% of the total invoice or a minimum fee of 250 CHF / 200 EUR / USD 250",
            "payment_deadline": "4 weeks before the course start date",
            "other_fees": "Health insurance premium must also be paid."
        },
        "cancellation_policy": {
            "standard_cancellation": {
                "notice_period": "22 days or more before the course start date",
                "refund": "100% of course fees (minus applicable non-refundable fees)"
            },
            "late_cancellation": {
                "notice_period": "21 days or less before course start date",
                "refund": "No refund for tuition, meals, or activities. Non-refundable fees apply including application, admin, courier, and bank fees."
            },
            "visa_rejection": {
                "requirements": "Proof of visa rejection to claim refund",
                "refund_amount": "Minus administrative and bank fees"
            }
        },
        "refund_details": "Refunds must be received within 45 days of cancellation notice.",
        "distance_contract": "Includes rights under consumer contract laws."
    }
}
2025-01-31 11:47:29,823 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:29,823 - PDFParser - INFO - Successfully processed page 69
2025-01-31 11:47:29,823 - PDFParser - INFO - Processing page 70/77
2025-01-31 11:47:29,967 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:29,969 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:29,975 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:29,975 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:35,571 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:35,571 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "course_information": [],
    "pricing": [],
    "accommodation_options": [],
    "terms": {
        "cancellation": "Participants can cancel within 14 calendar days and receive a full refund of all amounts already paid, subject to terms. If a participant cancels after the 14-day period or after starting, specific charges may apply.",
        "termination": "Participants must notify at least 14 days in advance for cancellation to avoid additional charges. No refunds are provided for package fees once the camp has started or for early termination.",
        "groups": {
            "deposit": "A minimum 20% non-refundable deposit is required within 5 days of booking confirmation.",
            "group cancellations": "Subject to additional terms, including liability for confirmed services and logistics."
        },
        "accommodation": "Accommodation is typically provided from Sunday before the start of courses until Saturday after the course ends. There may be fees for late arrivals or extra nights."
    }
}
2025-01-31 11:47:35,571 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:35,571 - PDFParser - INFO - Successfully processed page 70
2025-01-31 11:47:35,572 - PDFParser - INFO - Processing page 71/77
2025-01-31 11:47:35,687 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:35,690 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:35,695 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:35,696 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:41,673 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:41,674 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "learning_materials": "All materials are included in the tuition fee.",
        "late_arrival": "Participants arriving more than 15 minutes late should wait for the break before joining the class.",
        "missed_meals_or_classes": "No refunds or substitutions for meals or classes missed due to specific circumstances (e.g., public holidays or excursions).",
        "inconsistent_attendance": "Participants who do not attend at least 80% of classes are not entitled to reimbursement or certificate issuance.",
        "complaints_process": [
            {
                "step": "One",
                "process": "Discuss concerns with your teacher or Camp Manager."
            },
            {
                "step": "Two",
                "process": "Raise concerns with the Centre Manager if unresolved."
            },
            {
                "step": "Final Step",
                "process": "Escalate to the accreditation organization (EAQUALS, 29/30 Fitzroy Square, London)."
            }
        ],
        "cancellation_policy": "Alpadia reserves the right to modify course timing or cancel courses under circumstances such as low participation or other constraints.",
        "force_majeure": "No liability for non-performance caused by unforeseeable events (e.g., natural disasters or pandemics)."
    }
}
2025-01-31 11:47:41,674 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:41,674 - PDFParser - INFO - Successfully processed page 71
2025-01-31 11:47:41,674 - PDFParser - INFO - Processing page 72/77
2025-01-31 11:47:41,795 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:41,798 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:41,804 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:41,805 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:50,795 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:50,795 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Alpadia Language Schools",
    "locations": [
        {
            "city": "Montreux",
            "country": "Switzerland",
            "address": null,
            "courses": [
                {
                    "name": "Language Courses 16+ and Pathway Programmes",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": [
                        {
                            "description": "Application Fee",
                            "price": "CHF 125",
                            "currency": "CHF",
                            "notes": "For bookings in Switzerland"
                        },
                        {
                            "description": "Application Fee",
                            "price": "€90",
                            "currency": "EUR",
                            "notes": "For bookings in France and Germany"
                        },
                        {
                            "description": "Express processing fee",
                            "price": "CHF 45",
                            "currency": "CHF",
                            "notes": "For bookings in Switzerland"
                        },
                        {
                            "description": "Express processing fee",
                            "price": "€40",
                            "currency": "EUR",
                            "notes": "For bookings in France and Germany"
                        },
                        {
                            "description": "Change fee (e.g., location or downgrades)",
                            "price": "CHF 95",
                            "currency": "CHF",
                            "notes": "In Switzerland"
                        },
                        {
                            "description": "Change fee",
                            "price": "€80",
                            "currency": "EUR",
                            "notes": "In France and Germany"
                        },
                        {
                            "description": "Change fee",
                            "price": "GBP 50",
                            "currency": "GBP",
                            "notes": "In England"
                        }
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "deposit": "10% of total invoice or 250 CHF/EUR 200 (whichever is more)"
            }
        }
    ],
    "terms": {
        "registration": "A legally binding contract is formed upon confirmation of the booking.",
        "cancellation": "Cancellations require written notice. Postponements are subject to fees and specific validity rules.",
        "payment": "Balance of fees must be paid at least 4 weeks prior to the course start date. Failure to pay may result in refusal of entry to the course or accommodation.",
        "refund_policy": "No refunds for incomplete or canceled courses after start date. Changes that result in lower fees will not be refunded."
    }
}
2025-01-31 11:47:50,795 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:50,795 - PDFParser - INFO - Successfully processed page 72
2025-01-31 11:47:50,796 - PDFParser - INFO - Processing page 73/77
2025-01-31 11:47:50,836 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:50,838 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:50,842 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:50,843 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:47:57,780 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:47:57,780 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "courses": [],
    "accommodations": [],
    "terms": {
        "cancellation": {
            "standard_policy": "Written cancellation notice provided 22 days or more before the arrival date listed on the booking confirmation form.",
            "language_schools": {
                "fees_not_refunded": [
                    "Application Fee (CHF 125 or €90)",
                    "Any non-refundable Insurance Fee",
                    "Administration Fee (CHF 170 or €40)",
                    "Courier Fee (CHF 120 or €90)",
                    "Bank Charges (CHF 45 or €40)",
                    "Transfer Fees"
                ],
                "tuition_accommodation_refund_terms": "100% of the tuition and accommodation fee less the amounts set out above."
            },
            "university_pathway_programs": {
                "fees_not_refunded": [
                    "Application Fee (CHF 865)",
                    "University Placement Fee (CHF 510 or €525 for France / €525 for Germany)",
                    "Any non-refundable Insurance Fee",
                    "Administration Fee (CHF 170 or €125)",
                    "Courier Fee (CHF 120 or €90)",
                    "Bank Charges (CHF 45 or €40)",
                    "Transfer Fees"
                ],
                "refund_terms": "100% of the tuition and accommodation fee less the amounts set out above."
            },
            "visa_rejection_policy": "No refund will be issued by Alpadia without proof of visa refusal. In such cases, the following fees shall not be refundable: Administration Fee (CHF 170 or €125 for bookings in Switzerland), Bank Charges (CHF 45 or €40)."
        }
    }
}
2025-01-31 11:47:57,780 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:47:57,780 - PDFParser - INFO - Successfully processed page 73
2025-01-31 11:47:57,780 - PDFParser - INFO - Processing page 74/77
2025-01-31 11:47:57,880 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:47:57,882 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:47:57,887 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:47:57,888 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:48:04,304 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:48:04,304 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "cancellation": "Participants who are EU citizens have the right to cancel a legally binding contract within 14 calendar days of booking confirmation. Full refunds will be made if the course has not commenced, excluding any relevant fees.",
        "cancellation_insurance": "Kaplan recommends obtaining cancellation insurance. Responsibility for notifying insurers lies with the participant in the case of cancellation.",
        "termination": "Students must give at least 4 weeks' notice for course or accommodation termination. Refunds are calculated based on total amounts booked and any applicable change fees."
    },
    "accommodations": {
        "notice_period": "4 weeks",
        "refund_policy": "Refunds for discounted accommodation are calculated at full brochure weekly rate."
    },
    "additional_info": {
        "passport_and_visa": "Participants are responsible for complying with regulations and securing appropriate visas. No refunds are made for visa refusal.",
        "insurance": "Medical insurance is mandatory and can be purchased through Kaplan upon request. Damage/loss liability insurance is required during the participant's stay."
    }
}
2025-01-31 11:48:04,304 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:48:04,304 - PDFParser - INFO - Successfully processed page 74
2025-01-31 11:48:04,304 - PDFParser - INFO - Processing page 75/77
2025-01-31 11:48:04,384 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:48:04,386 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:48:04,391 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:48:04,392 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:48:11,679 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:48:11,679 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "address": "29/30 Fitzroy Square, W1T 6LQ, London, United Kingdom",
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {
        "cancellation": "All courses are subject to the refund, substitution, and cancellation policies detailed in the full terms of service.",
        "attendance_policy": "Participants must attend at least 80% of classes to receive their certificate and no refunds are provided for missed classes.",
        "complaints_policy": {
            "steps": {
                "1": "Address complaints about classes to your teacher or the Director of Studies.",
                "2": "For accommodation issues, consult the Student Support Manager.",
                "3": "For administrative concerns, bring them up with the Customer Care Manager.",
                "4": "Unresolved issues can be escalated to the Centre Manager and to the accrediting organization as a final step."
            }
        }
    }
}
2025-01-31 11:48:11,679 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:48:11,680 - PDFParser - INFO - Successfully processed page 75
2025-01-31 11:48:11,680 - PDFParser - INFO - Processing page 76/77
2025-01-31 11:48:11,856 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:48:11,858 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:48:11,867 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:48:11,868 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:48:17,622 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:48:17,622 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "changes": "Kaplan may change dates and course prices after registration. Key services will remain unaffected. Major changes may allow withdrawal or course changes.",
        "minimum_participants": "A minimum of 4 participants is required. If not met, Kaplan will offer alternative arrangements or refunds.",
        "public_holidays": "Schools are generally closed on local public holidays. No compensation for missed lessons.",
        "force_majeure": "Kaplan is not liable for cancelations caused by events beyond their control, such as natural disasters, government actions, or pandemics. Pro-rata refunds may be provided.",
        "liability": "Kaplan's liability is limited to the full course amount. They are not responsible for indirect, consequential losses, or loss of personal items.",
        "safety_and_security": "Kaplan will provide necessary medical care in emergencies. Costs incurred are the participant's responsibility.",
        "privacy": "Privacy policy details are available at https://www.alpadia.com/en/privacy.htm.",
        "promotional_material": "Participants grant permission for Kaplan to use their photographs or testimonials for promotional purposes unless otherwise stated in writing.",
        "applicable_law": "Swiss law governs the agreement, and jurisdiction lies with courts in Montreux, Switzerland."
    }
}
2025-01-31 11:48:17,623 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:48:17,623 - PDFParser - INFO - Successfully processed page 76
2025-01-31 11:48:17,623 - PDFParser - INFO - Processing page 77/77
2025-01-31 11:48:17,642 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 11:48:17,644 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 11:48:17,648 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 11:48:17,648 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 11:48:21,870 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 11:48:21,871 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Kaplan International Languages",
    "locations": [],
    "terms": {
        "safeguarding_policy": "Kaplan International Languages and Alpadia Language Schools have safeguarding policies available for all staff, hosts, and parents, outlining commitment to student safety."
    }
}


2025-01-31 11:48:21,871 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 11:48:21,871 - PDFParser - INFO - Successfully processed page 77
2025-01-31 11:48:21,871 - PDFParser - INFO - PDF processing completed
2025-01-31 11:48:21,871 - PDFParser - INFO - Merging results from all pages
2025-01-31 11:48:21,871 - PDFParser - INFO - Collected 50 locations for merging
2025-01-31 11:48:21,872 - PDFParser - WARNING - Skipping invalid location entry: start_dates.
2025-01-31 11:48:21,872 - PDFParser - ERROR - Error in merge_results: 'NoneType' object is not iterable
2025-01-31 11:48:21,872 - PDFParser - ERROR - Error in process_pdf: 'NoneType' object is not iterable
2025-01-31 11:48:21,872 - PDFParser - ERROR - Main process failed: 'NoneType' object is not iterable
2025-01-31 12:07:37,101 - PDFParser - INFO - Starting PDF processing
2025-01-31 12:07:37,101 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 12:07:37,102 - PDFParser - INFO - Initializing PDFParser
2025-01-31 12:07:37,129 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 12:07:37,130 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 12:07:37,130 - PDFParser - INFO - Processing page 1/18
2025-01-31 12:07:37,172 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:07:37,176 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:07:37,188 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:07:37,189 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:07:45,025 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:07:45,025 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {}
}
2025-01-31 12:07:45,025 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:07:45,026 - PDFParser - INFO - Successfully processed page 1
2025-01-31 12:07:45,026 - PDFParser - INFO - Processing page 2/18
2025-01-31 12:07:45,091 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:07:45,094 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:07:45,099 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:07:45,100 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:08:06,834 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:08:06,834 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri (09:00-13:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Morning classes Mon-Fri (09:00-13:00), additional Tues-Thurs (14:00-16:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Afternoons Mon-Fri (13:45-17:00, minimum 4 weeks)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€160", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": null,
                    "description": "20 group lessons + 5 hours one-on-one (Mon-Fri)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€700", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri (09:00-13:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "Morning classes Mon-Fri (09:00-13:00), additional Tues-Thurs (14:00-16:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Courses",
                    "lessons_per_week": 26,
                    "description": "Morning classes Mon-Fri (09:30-13:00), additional preparation Mon-Thurs (14:00-16:00, min. 9 weeks)",
                    "prices": [
                        {"duration": "9 weeks", "price": "€3600", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€4000", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Long Term (Study and Work Visa Eligible)",
                    "lessons_per_week": 20,
                    "description": "25 weeks + 8 weeks holidays (flight not included, Ireland only)",
                    "prices": [
                        {"price": "€6575", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board option",
                    "supplements": {
                        "Summer": "€35 per week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "Not stated"
    }
}
2025-01-31 12:08:06,834 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:08:06,835 - PDFParser - INFO - Successfully processed page 2
2025-01-31 12:08:06,835 - PDFParser - INFO - Processing page 3/18
2025-01-31 12:08:06,841 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:08:06,844 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:08:06,850 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:08:06,850 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:08:14,335 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:08:14,335 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Standard teaching hours for general English courses are 18.33 contact hours per week, excluding breaks. Intensive courses are 23.83 contact hours per week.",
                    "text_book": {
                        "Text Book + Digital E-Book": "€28",
                        "IELTS or Cambridge coursebook": "€45"
                    },
                    "exam_focused_career-toeic-private_intent-plus-centre": 100.00
                   
                    }
                ], 
                
            "accommodations": [
                {
                    "type": " Home-stay Accomadation",
                    "price_per_week":  100.00


                    }
            
            
            ],
            "additional_fees": {
                "registration": "0"



            }
        }
    ],
    "terms": {
        "notes": 
        
        
        
        
       
        
        
        
        
        
        
        
        
        
        
        
        
        
           0}
}
2025-01-31 12:08:14,335 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:08:14,336 - PDFParser - INFO - Successfully processed page 3
2025-01-31 12:08:14,336 - PDFParser - INFO - Processing page 4/18
2025-01-31 12:08:14,362 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:08:14,366 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:08:14,371 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:08:14,372 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:08:38,259 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:08:38,259 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies (CES)",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": "No specific address provided",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Lessons from Monday to Friday, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Lessons from Monday to Thursday, 09:00-13:00 with additional lessons 14:00-16:00 on Tuesdays to Thursdays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Minimum 4 weeks, Monday to Friday, 14:00-17:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€150", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€145", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "20 group lessons per week + 5 one-to-one lessons. Group lessons Mon-Fri (09:00-13:00), One-to-One lessons Mon-Thurs (14:00-16:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Monday to Friday, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "Monday to Friday, 09:00-13:00 with IELTS-focused lessons Tue-Thurs (14:00-16:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "Monday to Friday, 09:00-13:00, and 14:00-16:00 Tue-Thurs focused on academic skills",
                    "prices": [
                        {"duration": "12 weeks", "price": "€3480", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6630", "currency": "EUR"},
                        {"duration (extra weeks)": "€265 each", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration_fee": "€85 for all students"
            }
        }
    ],
    "terms": {
        "cancellation": "No explicit mention of cancellation terms"
    }
}
2025-01-31 12:08:38,259 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:08:38,260 - PDFParser - INFO - Successfully processed page 4
2025-01-31 12:08:38,260 - PDFParser - INFO - Processing page 5/18
2025-01-31 12:08:38,267 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:08:38,269 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:08:38,277 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:08:38,278 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:08:49,584 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:08:49,584 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": "Half board Monday to Friday, full board Saturday and Sunday.",
                    "supplements": {
                        "Extra night": "€50 per night",
                        "Single Room Summer Supplement (May 17 to September 28)": "€50 per week",
                        "Special Diet Supplement (Coeliac, gluten-free, lactose-free, vegan, vegetarian)": "€35 per week",
                        "Christmas Holidays Homestay Accommodation Fee (Dec 20 to Jan 3, 2026)": "€345 per week"
                    }
                },
                {
                    "type": "Residence - University College Cork",
                    "price_per_week": "From €285",
                    "description": null,
                    "supplements": {
                        "Extra night": "€50"
                    }
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "€85",
                "airport_transfer (one-way)": "€60"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is half board Monday to Friday and full board on weekends. Homestays are located in the suburbs of Cork. Students vacating their room for 5 days or more are charged a retainer fee of €60 per week.",
        "insurance": "Mandatory for ILEP students; arranged by CES at €130 per year including PEL. EU citizens may bring an EHIC card.",
        "tuition_hours": "Standard Course: 18.33 contact hours per week. Intensive Course: 23.83 contact hours per week (excluding breaks).",
        "examinations": {
            "IELTS exam": "€215",
            "Cambridge First": "€205",
            "Advanced": "€210 (subject to change)"
        },
        "text_book": {
            "Text Book + Digital E-Book": "€28",
            "IELTS Coursebook": "€45"
        },
        "social_activities": "Optional with approximate costs: Full day €45-€65, Half day €15-€25. Free afternoon and evening activities are also available.",
        "policy_of_care": "CES has a strict care policy for 16 and 17 year-old students in adult schools.",
        "school_holidays": "No classes on public holidays (Jan 01, Feb 03, Mar 17, Apr 18, Apr 21, May 02, Jun 02, Aug 04, Oct 27, Dec 19, 2025 - Jan 05, 2026)."
    }
}
2025-01-31 12:08:49,584 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:08:49,584 - PDFParser - INFO - Successfully processed page 5
2025-01-31 12:08:49,584 - PDFParser - INFO - Processing page 6/18
2025-01-31 12:08:49,608 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:08:49,611 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:08:49,617 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:08:49,617 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:09:12,362 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:09:12,362 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Unnamed Language School",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "Not provided",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$400", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$375", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Digital Marketing",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri (General English), 13:00 - 15:15 Mon to Thurs (Digital Marketing)",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 30,
                    "description": "09:00 - 12:15 Mon to Thurs, 09:00 - 12:15 Fri",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "General English for 30+",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri (English for 30+)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course",
                    "lessons_per_week": 25,
                    "description": "20 hours Mon-Fri + 5 hours one-on-one sessions (Cambridge Preparation)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fri",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "$195",
                "private_lessons_general": "$85 per lesson",
                "private_lessons_exam_preparation": "$95 per lesson",
                "cambridge_materials_exam": "$575",
                "ielts_paper_based_exam": "$370",
                "ielts_computer_based_exam": "$370",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "cancellation": "Not provided",
        "max_class_size": "16 per class",
        "lesson_duration": "45 minutes per lesson"
    }
}
2025-01-31 12:09:12,363 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:09:12,363 - PDFParser - INFO - Successfully processed page 6
2025-01-31 12:09:12,363 - PDFParser - INFO - Processing page 7/18
2025-01-31 12:09:12,369 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:09:12,371 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:09:12,376 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:09:12,377 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:09:29,694 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:09:29,694 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 15,
                    "description": "All teaching/tuition hours are 45 minutes. Standard Course is 15 hours per week, excluding breaks."
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 18.75,
                    "description": "Intensive Course is 18.75 hours per week, excluding breaks."
                },
                {
                    "name": "Super Intensive Course",
                    "lessons_per_week": 22.50,
                    "description": "Super Intensive Course is 22.50 hours per week, excluding breaks."
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "type": "Full-Board Accommodation",
                            "price_per_week": "$350",
                            "shared_price_per_week": "$310",
                            "summer_supplement": "$30 per week (01 June - 31 Aug)"
                        },
                        {
                            "type": "Half-Board Accommodation",
                            "price_per_week": "$320",
                            "shared_price_per_week": "$275",
                            "summer_supplement": "$30 per week (01 June - 31 Aug)"
                        },
                        {
                            "type": "Executive Half-Board with Private Bathroom",
                            "price_per_week": "$365",
                            "summer_supplement": "$30 per week (01 June - 31 Aug)"
                        }
                    ],
                    "addons": [
                        {
                            "description": "Special Diet Supplement (Full-Board)",
                            "price_per_week": "$50"
                        },
                        {
                            "description": "Special Diet Supplement (Half-Board)",
                            "price_per_week": "$45"
                        },
                        {
                            "description": "Extra Night",
                            "price": "$60"
                        },
                        {
                            "description": "Underage Fee (Applies to 16-17 years)",
                            "price_per_week": "$25"
                        }
                    ]
                },
                {
                    "type": "Residential Self-Catering",
                    "options": [
                        {
                            "location": "Casa Canada (18+)",
                            "shared_room_weekly_price": "$525",
                            "one_bedroom_weekly_price": "$650",
                            "monthly_price": "$1985"
                        },
                        {
                            "location": "28 Langley Ave.",
                            "weekly_price": "$575"
                        },
                        {
                            "location": "Tartu Student Residence (17+ May - August)",
                            "economy_suite_weekly_price": "$550",
                            "economy_suite_monthly_price": "$1450",
                            "premium_suite_weekly_price": "$650",
                            "premium_suite_monthly_price": "$1750"
                        }
                    ]
                }
            ],
            "additional_fees": {
                "accommodation_placement": "$275",
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized_under_18": "$75",
                "custodian_fee_notarized_under_18": "$200",
                "medical_insurance": "$3 per day",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a carefully selected homestay or request. No allowance will be made for absence from the homestay during the time arranged, or for late arrival/early departure. Check in and check out has to be Saturday to Saturday or Sunday to Sunday, otherwise an extra night fee will be charged. Late arrival fee – non Saturday/Sunday arrival fee is $125.",
        "medical_insurance": "You are strongly advised to take out travel and medical insurance before leaving home. Insurance should cover the loss of personal possessions and loss of tuition fees if you have to cancel your course or return home early.",
        "tuition_hours": "All teaching/tuition hours are 45 minutes.",
        "social_activities": "CES organizes a range of afternoon, evening, and overnight stay activities for students to join. Most popular day trips include Niagara Falls ($125), Algonquin Park ($200 Day Trip, 1 day of Ski/Snowboarding $290), 3 Day Trips: French Canada ($500), New York ($700), Boston ($700), Yoga ($150/month), Hockey ($550), Golf ($575/week).",
        "policy_of_care": "CES has a strict policy of care and welfare for all 16 and 17 year old students staying in our adult schools.",
        "school_holidays": "01 January, 17 February, 18 April, 19 May, 01 July, 04 August, 01 September, 30 September, 13 October, 11 November, 25 December, 26 December 2025.",
        "no_refund": "No refund or time in Lieu for public holidays."
    }
}
2025-01-31 12:09:29,695 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:09:29,695 - PDFParser - INFO - Successfully processed page 7
2025-01-31 12:09:29,695 - PDFParser - INFO - Processing page 8/18
2025-01-31 12:09:29,699 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:09:29,700 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:09:29,706 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:09:29,706 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:09:43,676 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:09:43,677 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00-12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$365", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00-14:00 Mon to Thurs, 09:00-12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00-15:15 Mon to Thurs, 09:00-12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00-14:00 Mon to Thurs, 09:00-12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00-15:15 Mon to Thurs, 09:00-12:15 Fridays (02 Jul - 30 Aug)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course (FCE/CAE)",
                    "lessons_per_week": 20,
                    "description": "09:00-12:15 Mon to Fri + 5 One-to-One lessons, 13:00-15:30 Cambridge Preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00-15:15 Mon to Thurs, 09:00-12:15 Fridays (02 Jul-25 Jul)",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "$195",
                "private_lessons": {
                    "general_per_lesson": "$85",
                    "exam_preparation_per_lesson": "$95"
                },
                "Cambridge_exam_material_fee": "$575",
                "material_fee_per_week": "$20"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 12:09:43,677 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:09:43,677 - PDFParser - INFO - Successfully processed page 8
2025-01-31 12:09:43,677 - PDFParser - INFO - Processing page 9/18
2025-01-31 12:09:43,682 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:09:43,683 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:09:43,689 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:09:43,690 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:10:04,955 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:10:04,955 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 15,
                    "description": "45-minute lessons, excludes breaks",
                    "prices": []
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 18.75,
                    "description": "45-minute lessons, excludes breaks",
                    "prices": []
                },
                {
                    "name": "Super Intensive Course",
                    "lessons_per_week": 22.5,
                    "description": "45-minute lessons, excludes breaks",
                    "prices": []
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "category": "Full-Board Accommodation",
                            "price_per_week": "$375",
                            "shared_price_per_week": "$355",
                            "summer_supplement": "$30 per week (01 Jun - 31 Aug)"
                        },
                        {
                            "category": "Half-Board Accommodation",
                            "price_per_week": "$360",
                            "shared_price_per_week": "$335",
                            "summer_supplement": "$30 per week (01 Jun - 31 Aug)"
                        },
                        {
                            "category": "Executive Half-Board with Private Bathroom",
                            "price_per_week": "$480",
                            "summer_supplement": "$30 per week (01 Jun - 31 Aug)"
                        }
                    ],
                    "add_ons": [
                        {
                            "type": "Special Diet Supplement",
                            "price": "$50/week (Full-Board), $45/week (Half-Board)",
                            "description": "Covers Coeliac, gluten-free, lactose-free, vegan, halal, kosher, and vegetarian diets"
                        },
                        {
                            "type": "Extra Night",
                            "price": "$60"
                        },
                        {
                            "type": "Underage Fee",
                            "price": "$25/week",
                            "description": "Applies to 16-18 years old students"
                        }
                    ]
                },
                {
                    "type": "Residential",
                    "options": [
                        {
                            "name": "GEC Viva (Economy Downtown, 18+)",
                            "price_per_week": "Not available",
                            "price_per_month": "$1600"
                        },
                        {
                            "name": "Casa Canada",
                            "price_per_week": "$600",
                            "price_per_month": "$2400"
                        },
                        {
                            "name": "YWCA Student Residence",
                            "price": "TBA"
                        }
                    ]
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "$275",
                "airport_transfer_on_arrival": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized": "$75",
                "custodian_fee_notarized": "$200",
                "medical_insurance": "$3/day",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Arranged in a selected homestay on request. Shared accommodation only guaranteed for 2 traveling together. Late arrivals outside Saturday-Sunday have an extra fee of $125.",
        "medical_insurance": "Students must arrange travel and medical insurance before leaving home.",
        "tuition_hours": {
            "standard_course": "15 hours/week, excluding breaks",
            "intensive_course": "18.75 hours/week, excluding breaks",
            "super_intensive_course": "22.5 hours/week, excluding breaks"
        },
        "social_activities": "Includes afternoon, evening, and overnight activities. Trips like Whistler, Victoria, Rocky Mountains, and Seattle are popular.",
        "age_policy": "CES accepts students 19+ or older for adult courses.",
        "school_holidays": [
            "01 January",
            "17 February",
            "18 April",
            "19 May",
            "01 July",
            "04 August",
            "01 September",
            "30 September",
            "13 October",
            "11 November",
            "25 December",
            "26 December"
        ]
    }
}
2025-01-31 12:10:04,956 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:10:04,956 - PDFParser - INFO - Successfully processed page 9
2025-01-31 12:10:04,956 - PDFParser - INFO - Processing page 10/18
2025-01-31 12:10:04,990 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:10:04,991 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:10:04,997 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:10:04,997 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:10:25,150 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:10:25,150 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri (09:30-13:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon classes Mon-Fri (09:30-13:00 and 14:00-16:30, Tue-Thurs)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "General English and IELTS Prep (Mon-Fri: 09:30-13:00, Tue-Thurs: 14:00-16:30)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 20,
                    "description": "Morning and afternoon classes Mon-Fri (09:30-13:00 General English, Tue-Thurs 14:00-16:30 One-to-One)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long-term Multi Destination Course",
                    "lessons_per_week": 20,
                    "description": "Ireland and UK (Flight not included)",
                    "prices": [
                        {"duration": "24 weeks", "price": "£6000", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£8640", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": null
    }
}
2025-01-31 12:10:25,150 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:10:25,150 - PDFParser - INFO - Successfully processed page 10
2025-01-31 12:10:25,150 - PDFParser - INFO - Processing page 11/18
2025-01-31 12:10:25,157 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:10:25,159 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:10:25,164 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:10:25,165 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:15:31,138 - PDFParser - INFO - Starting PDF processing
2025-01-31 12:15:31,139 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 12:15:31,139 - PDFParser - INFO - Initializing PDFParser
2025-01-31 12:15:31,173 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 12:15:31,174 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 12:15:31,174 - PDFParser - INFO - Processing page 1/18
2025-01-31 12:15:31,216 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:15:31,220 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:15:31,231 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:15:31,231 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:15:43,593 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:15:43,593 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Official IELTS, Cambridge, TOEIC, and OET Exam Preparation",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Leeds",
            "country": "UK",
            "address": null,
            "courses": [
                {
                    "name": "Official IELTS Exam Preparation",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": null,
            "courses": [
                {
                    "name": "CELTA Training Centre",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Official IELTS, Cambridge, CELPIP, TOEIC, and OET Exam Preparation",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {}
}
2025-01-31 12:15:43,593 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:15:43,594 - PDFParser - INFO - Successfully processed page 1
2025-01-31 12:15:43,594 - PDFParser - INFO - Processing page 2/18
2025-01-31 12:15:43,674 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:15:43,677 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:15:43,682 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:15:43,683 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:16:01,258 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:16:01,259 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "09:00 - 13:00, Monday to Friday, plus 14:00 - 16:00, Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "13:45 - 17:00, Monday to Friday",
                    "prices": [
                        {"duration": "4+ weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€160", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "Varies",
                    "description": "20 group lessons and 5 one-to-one lessons per week; 09:00 - 13:00, Monday to Friday (group lessons), plus one-to-one lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€700", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "09:00 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Courses",
                    "lessons_per_week": 26,
                    "description": "13 weeks at different times of the year, 09:00 - 13:00 (General English) and 14:00 - 16:00 (Cambridge focus)",
                    "prices": [
                        {"duration": "9 weeks", "price": "€3600", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€4000", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Long Term Course",
                    "lessons_per_week": 20,
                    "description": "25 weeks of study plus 8 weeks of holidays; flexible with a study and work visa option in Ireland",
                    "prices": [
                        {"duration": "25 weeks + 8 weeks holidays", "price": "€6575", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room with half board",
                    "supplements": {
                        "Summer": "€35 per week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation_requirement": "14 days notice required"
    }
}
2025-01-31 12:16:01,259 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:16:01,259 - PDFParser - INFO - Successfully processed page 2
2025-01-31 12:16:01,259 - PDFParser - INFO - Processing page 3/18
2025-01-31 12:16:01,265 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:16:01,270 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:16:01,278 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:16:01,279 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:16:12,121 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:16:12,121 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€280",
                    "description": "Single rooms are not available to students aged 16-18 years (inclusive)."
                },
                {
                    "type": "Single Room Summer Supplement",
                    "price_per_week": "€35",
                    "description": "Applied during June 1st - September 15th. Students must be over 18 years."
                },
                {
                    "type": "Special Diet Supplement",
                    "price_per_week": "€35",
                    "description": "Coeliac, gluten free, lactose free, vegan and vegetarian."
                },
                {
                    "type": "Christmas Holidays Homestay Accommodation Fee",
                    "price_per_week": "€345",
                    "description": "Applicable from December 20, 2025, to January 3, 2026."
                },
                {
                    "type": "Auburn and Crestfield (Residential, Year-Round)",
                    "price_per_week": {
                        "single_room": "€300",
                        "shared_room": "€265"
                    },
                    "description": "Self-catering/18+ years, minimum 2-week stay. Private residences located approximately 4-5 km from the school with shared or single rooms available (subject to availability). Includes compulsory airport transfer upon arrival."
                },
                {
                    "type": "Heyday (Residential, Year-Round)",
                    "price_per_week": "€399",
                    "description": "Self-catering/18+ years, minimum 2-week stay. Private residence located 14 minutes' walking distance from the school. All rooms are single and en-suite (subject to availability)."
                }
            ],
            "additional_fees": {
                "accommodation_placement": "€85",
                "airport_transfer": "€85 (one way)"
            }
        }
    ],
    "terms": {
        "accommodation": "No allowance will be made for absence from homestay accommodation. Students vacating their room while away will be charged a retention fee of €60 per week.",
        "insurance": "Medi-PEL is mandatory for ILEP students at €130 per annum. Citizens of EU countries should bring an EHIC card.",
        "tuition_hours": "Standard Course: 18.33 contact hours per week, Intensive Course: 23.83 contact hours per week.",
        "examinations": "IELTS exam fee: €215, Cambridge Advanced Exam Fee: €210.",
        "text_books": "Textbook + Digital E-Book: €28, IELTS or Cambridge course book: €45.",
        "social_activities": "Available to students for €15-€25 per half day or €55-€65 per full day.",
        "policy_of_care": "CES has a strict policy for 16-17 year-old students attending adult schools. Contact the school for details.",
        "school_holidays": "01 January, 03 February, 17 March, 18 April, 21 April, 05 May, 02 June, 04 August, 27 October, 19 December 2025 – 05 January 2026.",
        "cancellation": "No refund or time given in lieu for public holidays."
    }
}
2025-01-31 12:16:12,121 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:16:12,121 - PDFParser - INFO - Successfully processed page 3
2025-01-31 12:16:12,121 - PDFParser - INFO - Processing page 4/18
2025-01-31 12:16:12,149 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:16:12,153 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:16:12,158 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:16:12,159 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:16:56,442 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:16:56,442 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": "Not specified in the image",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Mon-Fri, 09:00-13:00; Tue-Thu, 14:00-16:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Minimum of 4 weeks, Mon-Fri, 14:00-17:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€150", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€145", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "20 hours group lesson + 5 hours one-to-one, Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "Mon-Fri, 09:00-13:00 for IELTS; 14:00-16:00 Tue-Thu for extra IELTS prep",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Courses",
                    "lessons_per_week": 26,
                    "description": "Dates vary, preparation for Cambridge exams, Mon-Fri",
                    "prices": [
                        {"duration": "9 weeks", "price": "€2835", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€3150", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "Aimed at preparing for university studies, Mon-Fri",
                    "prices": [
                        {"duration": "12 weeks", "price": "€3480", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6360", "currency": "EUR"},
                        {"duration": "Extra week", "price": "€265", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board"
                },
                {
                    "type": "Apartment",
                    "price_per_week": "Not specified",
                    "description": "Not specified"
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified"
    }
}
2025-01-31 12:16:56,442 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:16:56,443 - PDFParser - INFO - Successfully processed page 4
2025-01-31 12:16:56,443 - PDFParser - INFO - Processing page 5/18
2025-01-31 12:16:56,447 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:16:56,450 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:16:56,455 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:16:56,456 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:17:08,485 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:17:08,486 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": "Half board accommodation with breakfast and dinner Monday-Friday and full board on weekends.",
                    "supplements": {
                        "Extra Night": "€50"
                    }
                },
                {
                    "type": "Single Room Summer Supplement",
                    "price_per_week": "€50",
                    "description": "Applied during the period from May 17 to September 28."
                },
                {
                    "type": "Special Diet Supplement",
                    "price_per_week": "€35",
                    "description": "Available for Coeliac, gluten free, lactose free, vegan, and vegetarian diets."
                },
                {
                    "type": "Christmas Holidays Homestay Accommodation Fee",
                    "price_per_week": "€345",
                    "description": "Applied during 20 Dec to 3 Jan 2026."
                },
                {
                    "type": "University College Cork Residence",
                    "price_from": "€285",
                    "description": "On-campus residence accommodation. Extra night cost €50."
                },
                {
                    "type": "Airport Transfer",
                    "price": "€60",
                    "description": "One-way transfer from airport to homestay or residence."
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "€85"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is half board (breakfast and dinner during weekdays; breakfast, lunch, and dinner on weekends). Missing more than 5 days will incur a €60/week retainment fee.",
        "insurance": "Mandatory for ILEP students, costing €130/year, and includes Protection for Enrolled Learners (PEL).",
        "tuition_hours": "Standard course lessons are 18.33 hours/week. Intensive courses are 23.83 hours/week, excluding breaks.",
        "examinations": {
            "IELTS exam cost": "€215",
            "Cambridge First exam cost": "€205",
            "Advanced exam cost": "€210 (subject to change)"
        },
        "textbooks": {
            "text_book": "€28",
            "IELTS_coursebook": "€45"
        },
        "social_activities": "Excursions are optional, costing approximately €45-€65 per full day or €15-€25 per half day. Free afternoon and evening activities are also organized.",
        "policy_of_care": "Strict welfare policy for students aged 16 and 17 studying in adult courses.",
        "school_holidays": "Holidays include January 1, February 3, March 17, April 18, April 21, May 5, May 2, June 4, August 27, October 19, December 2025 - January 5, 2026 (no refunds or time in lieu for public holidays)."
    }
}
2025-01-31 12:17:08,486 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:17:08,486 - PDFParser - INFO - Successfully processed page 5
2025-01-31 12:17:08,486 - PDFParser - INFO - Processing page 6/18
2025-01-31 12:17:08,525 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:17:08,529 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:17:08,534 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:17:08,535 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:17:34,044 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:17:34,044 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri (09:00-12:15)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "Morning and afternoon classes Mon-Thurs (09:00-14:00) and Fri (09:00-12:15)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$400", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$375", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning and extended afternoon classes Mon-Thurs (09:00-15:15) and Fri (09:00-12:15)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Digital Marketing",
                    "lessons_per_week": 20,
                    "description": "Requires B2 entry, morning and afternoon classes (Mon-Thurs 09:00-15:15, Fri 09:00-12:15)",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 30,
                    "description": "Requires B2 entry, morning and afternoon classes (Mon-Thurs 09:00-15:15, Fri 09:00-12:15)",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "USD"}
                    ]
                },
                {
                    "name": "English for Business",
                    "lessons_per_week": 25,
                    "description": "General English + Business (09:00-15:15 Mon-Thurs, Fri 09:00-12:15)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "General English for 30+",
                    "lessons_per_week": 20,
                    "description": "For adults age 30+ (May-Oct, Mon-Fri 09:00-12:15)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "USD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation",
                    "lessons_per_week": 25,
                    "description": "Mon-Thurs (09:00-14:00), Fri (09:00-12:15)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation",
                    "lessons_per_week": 30,
                    "description": "Mon-Thurs (09:00-15:15), Fri (09:00-12:15), available July-Aug.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation",
                    "lessons_per_week": 20,
                    "description": "Includes additional 5 hours of one-to-one exam prep",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track",
                    "lessons_per_week": 30,
                    "description": "Available July-Aug (Mon-Thurs 09:00-15:15, Fri 09:00-12:15)",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": "$195",
                "private_lessons": {
                    "general": "$85",
                    "exam_preparation": "$95"
                },
                "cambridge_materials_and_admin": "$575",
                "ielts_paper_based": "$370",
                "ielts_computer_based": "$370",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "class_size": "Maximum 16 students",
        "teaching_hours": "45-minute lessons"
    }
}
2025-01-31 12:17:34,045 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:17:34,045 - PDFParser - INFO - Successfully processed page 6
2025-01-31 12:17:34,045 - PDFParser - INFO - Processing page 7/18
2025-01-31 12:17:34,052 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:17:34,054 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:17:34,061 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:17:34,062 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:17:50,389 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:17:50,389 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": [
                        {"type": "Full-Board (Single)", "price": "$350", "seasonal_supplement": "$30 (01 June - 31 Aug)"},
                        {"type": "Full-Board (Shared)", "price": "$310", "seasonal_supplement": "$30 (01 June - 31 Aug)"},
                        {"type": "Half-Board (Single)", "price": "$320", "seasonal_supplement": "$30 (01 June - 31 Aug)"},
                        {"type": "Half-Board (Shared)", "price": "$275", "seasonal_supplement": "$30 (01 June - 31 Aug)"},
                        {"type": "Executive Half-Board with Private Bathroom (Single)", "price": "$365", "seasonal_supplement": "$30 (01 June - 31 Aug)"}
                    ],
                    "supplements": {
                        "Special Diet": {
                            "price": [
                                {"type": "Full-Board", "price": "$50/week"},
                                {"type": "Half-Board", "price": "$45/week"}
                            ],
                            "notes": "Coeliac, gluten-free, lactose-free, vegan, halal, kosher, vegetarian"
                        },
                        "Extra Night": "$60",
                        "Underage Fee (16-17 years)": "$25/week"
                    }
                },
                {
                    "type": "Residential Self-Catering",
                    "accommodation_placement_fee": "$275",
                    "options": [
                        {
                            "residence": "Casa Canada (18+)",
                            "types": [
                                {"type": "Shared Room", "price": "$525/week", "monthly_min": "4 weeks"},
                                {"type": "1 Bedroom", "price": "$650/week", "monthly_min": "4 weeks"}
                            ]
                        },
                        {
                            "residence": "28 Langley Ave.",
                            "price": {"weekly": "$575/week", "monthly": "$1985/month"}
                        },
                        {
                            "residence": "Tartu Student Residence (17+)",
                            "availability": "May - August",
                            "types": [
                                {"type": "Economy Suite", "price": {"weekly": "$550/week", "monthly": "$1450/month"}},
                                {"type": "Premium (AC Unit)", "price": {"weekly": "$650/week", "monthly": "$1750/month"}}
                            ]
                        }
                    ]
                }
            ],
            "additional_fees": {
                "Accommodation Placement": "$275",
                "Airport Transfer (one way)": "$150",
                "Return Airport Transfer": "$300",
                "Custodian (Non-Notarized under 18)": "$75",
                "Custodian (Notarized under 18)": "$200",
                "Medical Insurance": "$3/day",
                "Homestay Move Fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "No allowance for absence or early departure. Shared accommodation for 2 people traveling together only. Check in/out on Saturday or Sunday. Late arrival fee for non-Saturday/Sunday: $125.",
        "medical_insurance": "Strongly advised to get medical/travel insurance before leaving home. Covers personal belongings and tuition fees in case of cancellation.",
        "tuition_hours": "Teaching hours are 45 minutes. Intensive Course: 18.75 hrs/week. Super Intensive Course: 22.5 hrs/week.",
        "social_activities": "CES organizes activities/trips. Popular trips include Niagara Falls: $125, Algonquin Park Day Trip: $200, Ski/Snowboarding: $290.",
        "school_holidays": "01 January, 17 February, 18 April, 19 May, 01 July, 04 August, 01 September, 30 September, 13 October, 11 November, 25 December, 26 December 2025."
    }
}
2025-01-31 12:17:50,389 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:17:50,389 - PDFParser - INFO - Successfully processed page 7
2025-01-31 12:17:50,390 - PDFParser - INFO - Processing page 8/18
2025-01-31 12:17:50,393 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:17:50,395 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:17:50,400 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:17:50,401 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:18:21,618 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:18:21,618 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$365", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$400", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "24 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "$475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Courses",
                    "lessons_per_week": "20 lessons/week + 5 hours One-to-One lessons",
                    "description": "09:00 - 12:15 Mon to Fri; One-to-One CAM preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "$890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "$870", "currency": "USD"}
                    ],
                    "exam_dates": [
                        "10 June (FCE)", "04 June (CAE)", "25 November (FCE)", "26 November (CAE)"
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Courses",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thurs, 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "4 weeks", "price": "$2000", "currency": "USD"}
                    ],
                    "exam_dates": [
                        "24 July (FCE)", "25 July (CAE)", "21 August (FCE)", "22 August (CAE)"
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "$195",
                "private_lessons": {
                    "general": "$85 per lesson",
                    "exam_preparation": "$95 per lesson"
                },
                "Cambridge_materials_exam_admin": "$575",
                "material_fee": "$20 per week"
            }
        }
    ],
    "terms": {
        "class_size": "Maximum 16 students per class",
        "teaching_hours": "45 minutes per lesson"
    }
}
2025-01-31 12:18:21,618 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:18:21,618 - PDFParser - INFO - Successfully processed page 8
2025-01-31 12:18:21,618 - PDFParser - INFO - Processing page 9/18
2025-01-31 12:18:21,623 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:18:21,625 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:18:21,631 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:18:21,631 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:19:19,095 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:19:19,095 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "type": "Full-Board Accommodation",
                            "single_price": "$375 p/w",
                            "shared_price": "$355 p/w",
                            "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                        },
                        {
                            "type": "Half-Board Accommodation",
                            "single_price": "$360 p/w",
                            "shared_price": "$335 p/w",
                            "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                        },
                        {
                            "type": "Executive Half-Board with Private Bathroom",
                            "single_price": "$480 p/w",
                            "summer_supplement": "$30 p/w (01 Jun - 31 Aug)"
                        }
                    ],
                    "add_ons": {
                        "Special Diet Supplement": "$50 p/w (Full-Board), $45 p/w (Half-Board)",
                        "Extra Night": "$60",
                        "Underage Fee": "$25 p/w (16-18 years old)"
                    }
                },
                {
                    "type": "Residential",
                    "options": [
                        {
                            "location": "GEC Viva* (Economy Downtown, 18+)",
                            "weekly_price": "Not Available",
                            "monthly_price": "$1600/month"
                        },
                        {
                            "location": "Casa Canada",
                            "weekly_price": "$600 p/w",
                            "monthly_price": "$2400/month"
                        },
                        {
                            "location": "YWCA Student Residence",
                            "weekly_price": "TBA",
                            "monthly_price": "TBA"
                        }
                    ]
                }
            ],
            "additional_fees": {
                "Accommodation Placement Fee": "$275",
                "Airport Transfer (one way)": "$150",
                "Airport Return Transfer": "$300",
                "Custodian Fee Non-Notarized (Under 18 years)": "$75",
                "Custodian Fee Notarized (Under 18 years)": "$200",
                "Medical Insurance": "$3 per day",
                "Homestay Move Fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a homestay on request. Shared accommodation is only available for 2 people traveling together. Late arrival fees apply for non-Saturday/Sunday arrivals ($125).",
        "medical_insurance": "Students must obtain insurance before leaving home. It should cover personal possessions and tuition fees.",
        "tuition_hours": "Standard Course: 15 hours p/w. Intensive Course: 18.75 hours p/w. Super Intensive Course: 22.50 hours p/w.",
        "social_activities": "CES organizes afternoon, evening, and overnight events, including trips to Whistler, Victoria, Rocky Mountains, and Seattle.",
        "policy_for_care": "CES provides care and welfare for students under 19 years of age studying in adult schools.",
        "school_holidays": ["01 January", "17 February", "18 April", "19 May", "01 July", "04 August", "01 September", "30 September", "13 October", "11 November", "25 December", "26 December 2025"]
    }
}
2025-01-31 12:19:19,095 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:19:19,096 - PDFParser - INFO - Successfully processed page 9
2025-01-31 12:19:19,096 - PDFParser - INFO - Processing page 10/18
2025-01-31 12:19:19,132 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:19:19,134 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:19:19,140 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:19:19,140 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:19:38,700 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:19:38,700 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning lessons 09:30 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning and afternoon lessons 09:30 - 13:00 (Mon-Fri) and 14:00 - 16:30 (Tues-Thurs)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "Combination of group and one-to-one lessons, 5 hours of one-to-one per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Additional weeks", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "Focused on IELTS preparation, includes morning and afternoon sessions",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 20,
                    "description": "Focused on FCE preparation, includes group and one-to-one lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Additional weeks", "price": "£595", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "English and Culture, 50+ programme",
                    "lessons_per_week": 20,
                    "description": "Morning sessions with a dedicated social programme",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course (Edinburgh only)",
                    "lessons_per_week": "Full-time",
                    "description": "Face-to-face and online options available with approximately 20 hours of independent work weekly",
                    "prices": [
                        {"type": "Face-to-face", "price": "£1545", "currency": "GBP"},
                        {"type": "Online Part-Time or Full-Time", "price": "£1400", "currency": "GBP"},
                        {"type": "Online 24-Week Part-Time", "price": "£1515", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "Not explicitly stated in the document"
    }
}
2025-01-31 12:19:38,700 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:19:38,700 - PDFParser - INFO - Successfully processed page 10
2025-01-31 12:19:38,700 - PDFParser - INFO - Processing page 11/18
2025-01-31 12:19:38,707 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:19:38,709 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:19:38,715 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:19:38,715 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:19:57,965 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:19:57,965 - PDFParser - DEBUG - Raw API response content: {
  "school_name": "Centre of English Studies",
  "locations": [
    {
      "city": "London",
      "country": "United Kingdom",
      "address": "Not specified",
      "courses": [],
      "accommodations": [
        {
          "type": "Homestay",
          "price_per_week": "£280",
          "description": "Single room, half board",
          "supplements": {
            "Summer": "£35/week (July and August)"
          }
        },
        {
          "type": "Homestay - Premium",
          "price_per_week": "£335",
          "description": "Single room, half board",
          "supplements": {
            "Summer": "£35/week (July and August)"
          }
        },
        {
          "type": "Homestay Shared",
          "price_per_week": "£235",
          "description": "Shared room, half board",
          "supplements": {
            "Summer": "£35/week (July and August)"
          }
        },
        {
          "type": "Homestay Shared - Premium",
          "price_per_week": "£275",
          "description": "Shared room, half board",
          "supplements": {
            "Summer": "£35/week (July and August)"
          }
        },
        {
          "type": "Residential - Rathbone Apartments",
          "description": "Year-round (18+ years, minimum 4 weeks)",
          "prices": {
            "Double room with two people sharing": "£275",
            "Twin room with two people sharing": "£350",
            "Double room with single occupancy": "£450",
            "Twin room with single occupancy": "£560",
            "Large double room with single occupancy": "£560"
          }
        }
      ],
      "additional_fees": {
        "Accommodation placement fee": "£75",
        "Special Diet Supplement": "£35/week",
        "Christmas Accommodation Fee": "£350/week (20 Dec to 3 Jan 2026)"
      }
    },
    {
      "city": "Edinburgh",
      "country": "United Kingdom",
      "address": "Not specified",
      "courses": [],
      "accommodations": [
        {
          "type": "Homestay",
          "price_per_week": "£280",
          "description": "Single room, half board",
          "supplements": {
            "Summer": "£35/week (July and August)"
          }
        },
        {
          "type": "Homestay Shared",
          "price_per_week": "£235",
          "description": "Shared room, half board",
          "supplements": {
            "Summer": "£35/week (July and August)"
          }
        }
      ],
      "additional_fees": {
        "Accommodation placement fee": "£75",
        "Special Diet Supplement": "£35/week",
        "Christmas Accommodation Fee": "£350/week (20 Dec to 3 Jan 2026)"
      }
    }
  ],
  "terms": {
    "cancellation": "Not explicitly mentioned",
    "medical_insurance": "You are strongly advised to take out medical and travel insurance.",
    "tuition_hours": "Standard Course: 15 hours per week, Intensive: 22 hours per week.",
    "examination": "IELTS exam cost £220 (subject to change).",
    "text_books": "£32 (Textbook + Digital Book)."
  }
}
2025-01-31 12:19:57,965 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:19:57,965 - PDFParser - INFO - Successfully processed page 11
2025-01-31 12:19:57,965 - PDFParser - INFO - Processing page 12/18
2025-01-31 12:19:57,970 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:19:57,972 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:19:57,978 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:19:57,978 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:20:24,675 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:20:24,675 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday (Mornings) and 14:00 - 16:30, Tuesday to Thursday (Afternoons)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "09:30 - 13:00, Monday to Friday (Group Lessons); 14:00 - 16:30, Afternoons (One-to-One)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra weeks", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday (General English); 14:00 - 16:30, Tuesday to Thursday (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "09:30 - 13:00, Monday to Friday (General English); 14:00 - 16:30, Afternoons to One-to-One FCE preparation",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra weeks", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course (Ireland and UK)",
                    "lessons_per_week": [20, 30],
                    "description": "Flight not included",
                    "prices": [
                        {"duration": "24 weeks (20 lessons)", "price": "£6000", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons)", "price": "£8520", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons)", "price": "£8640", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons)", "price": "£12420", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday; 14:00 - 16:30, Tuesday to Thursday",
                    "prices": [
                        {"duration": "3 months", "price": "£4380", "currency": "GBP"},
                        {"duration": "6 months", "price": "£8520", "currency": "GBP"},
                        {"duration": "Extra weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English and Culture, 50+ Programme",
                    "lessons_per_week": 20,
                    "description": "Afternoon cultural visits and one full day tour included",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "description": "Full-time: 09:00 - 17:00, Monday to Friday; Online Part Time: Independent work approx 20 hrs per week",
                    "prices": [
                        {"duration": "24-Week Part-Time (Online)", "price": "£1515", "currency": "GBP"},
                        {"duration": "Full-Time or Part-Time (Online)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00, Monday to Friday (General English); 14:00 - 16:30, Tuesday to Thursday (Business English)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "lessons_per_week": "As scheduled",
                    "description": null,
                    "prices": [
                        {"duration": "Per hour", "price": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": null,
        "class_size": "Maximum of 9 students per class during July and August"
    }
}
2025-01-31 12:20:24,675 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:20:24,675 - PDFParser - INFO - Successfully processed page 12
2025-01-31 12:20:24,676 - PDFParser - INFO - Processing page 13/18
2025-01-31 12:20:24,680 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:20:24,681 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:20:24,687 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:20:24,687 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:20:39,768 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:20:39,768 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null, 
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 15,
                    "description": "Standard contact hours excluding breaks.",
                    "prices": null
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 22,
                    "description": "Intensive contact hours excluding breaks.",
                    "prices": null
                }
            ],
            "accommodations": [
                {
                    "type": "Host Family (Half-Board)",
                    "options": [
                        {
                            "room_type": "Single",
                            "price_per_week": "£280",
                            "supplements": {
                                "Summer": "£35/pw (July and August)"
                            }
                        },
                        {
                            "room_type": "Single (Premium)",
                            "price_per_week": "£335",
                            "supplements": {
                                "Summer": "£35/pw (July and August)"
                            }
                        },
                        {
                            "room_type": "Shared",
                            "price_per_week": "£235",
                            "supplements": {
                                "Summer": "£35/pw (July and August)"
                            }
                        },
                        {
                            "room_type": "Shared (Premium)",
                            "price_per_week": "£275",
                            "supplements": {
                                "Summer": "£35/pw (July and August)"
                            }
                        }
                    ],
                    "add_ons": [
                        {
                            "name": "Special Diet Supplement",
                            "price_per_week": "£35",
                            "description": "Gluten-free, lactose-free, vegan, halal, kosher, vegetarian, food allergy (contact team for further information)"
                        },
                        {
                            "name": "Christmas Holidays Homestay",
                            "price_per_week": "£350",
                            "description": "20 Dec to 3 Jan 2026"
                        }
                    ],
                    "placement_fee": "£75"
                }
            ],
            "transportation": [
                {
                    "route": "CES Oxford to/from Heathrow Airport",
                    "fees": {
                        "one passenger": "£165",
                        "two passengers": "£170",
                        "three passengers": "£175"
                    }
                },
                {
                    "route": "CES Oxford to/from Gatwick Airport",
                    "fees": {
                        "one passenger": "£205",
                        "two passengers": "£210",
                        "three passengers": "£215"
                    }
                },
                {
                    "route": "CES Oxford to/from Stansted Airport",
                    "fees": {
                        "one passenger": "£215",
                        "two passengers": "£220",
                        "three passengers": "£225"
                    }
                }
            ],
            "additional_fees": {
                "examinations": "IELTS exam costs £220 (subject to change)",
                "text_book": "Digital E-Book £32"
            }
        }
    ],
    "terms": {
        "accommodation": "Homestay arranged on request. Half-board (breakfast and dinner) included. Single room not guaranteed for 16-17 year-old students during July and August.",
        "medical_insurance": "Strongly advised before leaving home. Covers loss of personal possessions and tuition fees.",
        "social_activities": "Free and paid activities available. Approximate costs: Full day £75-120, Half day £8-90.",
        "policy_of_care": "Strict policy of care for 16 and 17 year-old students in adult schools.",
        "school_holidays": [
            "01 January",
            "18 April",
            "21 April",
            "05 May",
            "26 May",
            "25 August",
            "22 December 2025 - 02 January 2026"
        ]
    }
}
2025-01-31 12:20:39,768 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:20:39,769 - PDFParser - INFO - Successfully processed page 13
2025-01-31 12:20:39,769 - PDFParser - INFO - Processing page 14/18
2025-01-31 12:20:39,791 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:20:39,794 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:20:39,800 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:20:39,800 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:21:02,335 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:21:02,335 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri (09:30-13:00)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£240", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£230", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£225", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Includes afternoon classes Tues-Thurs (14:00-16:30)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 One-to-One lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Additional weeks", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "Afternoon focus on IELTS preparation (14:00-16:30)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 One-to-One lessons (14:00-16:30)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Additional weeks", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course (Ireland and UK)",
                    "lessons_per_week": 20,
                    "description": "Flight not included",
                    "prices": [
                        {"duration": "24 weeks", "price": "£5520", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£8100", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "Preparation for university study (14:00-16:30 Tues-Thurs)",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8040", "currency": "GBP"},
                        {"duration": "Additional weeks", "price": "£335", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "Includes workshops and lectures (30th June - 25th July)",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": "Full-time",
                    "description": "Face-to-face and online options available",
                    "prices": [
                        {"type": "Face-to-Face", "price": "£1545", "currency": "GBP"},
                        {"type": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"},
                        {"type": "Online (full-time or part-time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "Available July and August (14:00-16:30 Tues-Thurs)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "price_per_hour": "£75",
                    "currency": "GBP"
                }
            ]
        }
    ],
    "additional_fees": {
        "registration": "£75"
    },
    "terms": {
        "class_size": "Maximum class size is 14 students",
        "lesson_duration": "Each teaching session is 45 minutes"
    }
}
2025-01-31 12:21:02,335 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:21:02,336 - PDFParser - INFO - Successfully processed page 14
2025-01-31 12:21:02,336 - PDFParser - INFO - Processing page 15/18
2025-01-31 12:21:02,340 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:21:02,342 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:21:02,348 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:21:02,348 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:21:12,570 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:21:12,571 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": "Details not provided in the image",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 15,
                    "description": "45-minute lessons, does not include breaks",
                    "prices": []
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 22,
                    "description": "22 contact hours per week, excludes breaks",
                    "prices": []
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single": "£240",
                        "shared": "£215"
                    },
                    "description": "Half-board (breakfast, dinner), additional summer and holiday supplements apply",
                    "supplements": {
                        "Summer Supplement": "£35/week (July and August)",
                        "Special Diet Supplement": "£35/week",
                        "Christmas Holidays Homestay": "£350 (20 Dec to 3 Jan 2026)"
                    }
                },
                {
                    "type": "Residential",
                    "price_per_week": {
                        "single_ensuite": "£225"
                    },
                    "description": "Year-round accommodation for 18+ years, minimum 4 weeks",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "accommodation_placement": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "No refund or time given in lieu for public holidays",
        "medical_insurance": "Students must arrange their own medical insurance before leaving home",
        "hours": {
            "standard": 15,
            "intensive": 22
        },
        "examination_fee": "IELTS exam costs £220",
        "social_activities": {
            "full_day": "£60-75",
            "half_day": "£5-20"
        },
        "textbook_fee": "Digital E-book: £32",
        "school_holidays": [
            "01 January, 18 April, 01 April, 06 May, 26 May, 25 August, 22 December 2025 - 02 January 2026"
        ]
    }
}
2025-01-31 12:21:12,571 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:21:12,571 - PDFParser - INFO - Successfully processed page 15
2025-01-31 12:21:12,571 - PDFParser - INFO - Processing page 16/18
2025-01-31 12:21:12,575 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:21:12,577 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:21:12,582 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:21:12,583 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:21:34,559 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:21:34,559 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£245", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£235", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£225", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£220", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£210", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri, 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri (General English), 14:00 - 16:30 Tues to Thurs (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course",
                    "lessons_per_week": 20,
                    "description": "Flight not included, multi-location (Ireland and UK)",
                    "prices": [
                        {"duration": "24 weeks", "price": "£5280", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£7560", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri, 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri (General English), 14:00 - 16:30 Tues to Thurs (Business English)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "description": "Customized lessons",
                    "prices": [
                        {"price": "£75 per hour", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "general": "All teaching/tuition hours are 45 minutes. Maximum class size is 14."
    }
}
2025-01-31 12:21:34,560 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:21:34,560 - PDFParser - INFO - Successfully processed page 16
2025-01-31 12:21:34,560 - PDFParser - INFO - Processing page 17/18
2025-01-31 12:21:34,564 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:21:34,566 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:21:34,571 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:21:34,572 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:21:45,723 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:21:45,723 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies (CES)",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "Not specified",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "room_type": "Single",
                            "price_per_week": "£240",
                            "description": "Half-board (bed, breakfast, and dinner)",
                            "supplements": {
                                "Summer Supplement": "£35/week (July and August)",
                                "Special Diet Supplement": "£35/week (gluten-free, lactose-free, vegan, halal, kosher, vegetarian, food allergies)",
                                "Christmas Holidays Supplement": "£350 (20 December to 03 January 2026)"
                            }
                        },
                        {
                            "room_type": "Shared",
                            "price_per_week": "£215",
                            "description": "Half-board (shared room, only guaranteed for two people traveling together)",
                            "supplements": {
                                "Summer Supplement": "£35/week (July and August)"
                            }
                        }
                    ],
                    "placement_fee": "£75"
                }
            ],
            "additional_fees": {
                "Airport Transfer (One-Way)": {
                    "Heathrow": {
                        "1 Passenger": "£170",
                        "2 Passengers": "£175",
                        "3 Passengers": "£180"
                    },
                    "Gatwick": {
                        "1 Passenger": "£140",
                        "2 Passengers": "£145",
                        "3 Passengers": "£150"
                    },
                    "Stansted": {
                        "1 Passenger": "£250",
                        "2 Passengers": "£255",
                        "3 Passengers": "£260"
                    }
                },
                "Digital E-book": "£32",
                "IELTS Exam Fees": "£220 (subject to change)"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in carefully selected homestays (half-board). No allowance will be made for absence. Single room requests for 16-17-year-old students are not guaranteed during July and August. Shared rooms are only guaranteed for two people traveling together.",
        "medical_insurance": "Students should take out travel and medical insurance before leaving home. Insurance should cover personal belongings and tuition fees in case of cancellation.",
        "tuition_hours": "Standard course is 15 hours per week, Intensive course is 22 hours per week, excluding breaks.",
        "examinations": "IELTS exam fees are £220 (subject to change).",
        "school_holidays": "01 January, 18 April, 21 April, 05 May, 26 May, 25 August, 22 December 2025 - 02 January 2026 (No refund for public holidays).",
        "policy_of_care": "CES has strict policies for 16 and 17-year-old students. Contact CES for more details."
    }
}
2025-01-31 12:21:45,723 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:21:45,723 - PDFParser - INFO - Successfully processed page 17
2025-01-31 12:21:45,723 - PDFParser - INFO - Processing page 18/18
2025-01-31 12:21:45,733 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:21:45,735 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:21:45,741 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:21:45,741 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:21:57,971 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:21:57,971 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies (CES)",
    "locations": [
        {
            "country": "Ireland",
            "city": "Dublin",
            "address": "72 Dame Street, Dublin 2, Ireland",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "description": "Minimum provision of 2 weeks, full refund given for cancellation.",
                    "cancellation_policy": "Notice period of 28 days - full refund given. Notice period of fewer than 28 days - no refund given."
                },
                {
                    "type": "Self-catering",
                    "description": "Available depending on the supplier and their policies."
                }
            ],
            "additional_fees": {
                "deposit": "€250 (Ireland)",
                "other_fees": "Full payment of fees is due 4 weeks prior to the starting date."
            }
        },
        {
            "country": "United Kingdom",
            "city": "Worthing",
            "address": "27 South Street, Worthing West Sussex, BN11 3AR",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "deposit": "£250 (UK)"
            }
        },
        {
            "country": "Canada",
            "city": "Toronto",
            "address": "180 Bloor Street West, Toronto, Ontario Canada M4W 1A3",
            "courses": [],
            "accommodations": [],
            "additional_fees": {
                "deposit": "$350 (Canada)"
            }
        }
    ],
    "terms": {
        "cancellation": {
            "accommodation": "Accommodation fees are fully refundable for cancellations with more than 28 days' notice. No refund is provided for cancellations with less than 28 days' notice.",
            "tuition": "Cancellation up to 14 days prior to arrival is subject to a fee of €250 (Ireland)/£250 (UK)/CAD $350 (Canada). No refund is provided for cancellations within 14 days prior to arrival or for program changes during the course."
        },
        "general_conditions": {
            "visa_requirements": "Students must ensure they apply for the correct visa.",
            "responsibilities": "CES is not responsible for delays, engagement issues, or lost belongings.",
            "other_notes": "No refund for missed days without valid reasons. Parental consent is required for students under 18 for activities."
        }
    }
}
2025-01-31 12:21:57,972 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:21:57,972 - PDFParser - INFO - Successfully processed page 18
2025-01-31 12:21:57,973 - PDFParser - INFO - PDF processing completed
2025-01-31 12:21:57,973 - PDFParser - INFO - Merging results from all pages
2025-01-31 12:21:57,973 - PDFParser - INFO - Collected 26 locations for merging
2025-01-31 12:21:57,973 - PDFParser - ERROR - Error in merge_results: 'PDFProcessor' object has no attribute 'safe_get_dict'
2025-01-31 12:21:57,973 - PDFParser - ERROR - Error in process_pdf: 'PDFProcessor' object has no attribute 'safe_get_dict'
2025-01-31 12:21:57,974 - PDFParser - ERROR - Main process failed: 'PDFProcessor' object has no attribute 'safe_get_dict'
2025-01-31 12:23:19,348 - PDFParser - INFO - Starting PDF processing
2025-01-31 12:23:19,349 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 12:23:19,349 - PDFParser - INFO - Initializing PDFParser
2025-01-31 12:23:19,384 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 12:23:19,385 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 12:23:19,385 - PDFParser - INFO - Processing page 1/18
2025-01-31 12:23:19,429 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:23:19,433 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:23:19,444 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:23:19,444 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:23:29,718 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:23:29,718 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "IELTS, Cambridge, TOEIC, OET Exam Preparation",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Leeds",
            "country": "UK",
            "address": null,
            "courses": [
                {
                    "name": "Official IELTS Exam Preparation",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": null,
            "courses": [
                {
                    "name": "CELTA Training",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "IELTS, Cambridge, CELPIP, TOEIC, OET Exam Preparation",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "New Courses for 2025",
                    "lessons_per_week": null,
                    "description": null,
                    "prices": []
                }
            ],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {}
}
2025-01-31 12:23:29,719 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:23:29,719 - PDFParser - INFO - Successfully processed page 1
2025-01-31 12:23:29,719 - PDFParser - INFO - Processing page 2/18
2025-01-31 12:23:29,823 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:23:29,826 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:23:29,831 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:23:29,832 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:23:50,347 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:23:50,347 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Morning classes Mon-Fri, 09:00-13:00, Tues-Thurs 14:00-16:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Minimum 4 weeks, Mon-Fri 13:45-17:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€160", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons and 5 one-to-one lessons per week, Mon-Fri 09:00-13:00, additional one-to-one lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€700", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "Morning classes Mon-Fri, 09:00-13:00, Tues-Thurs 14:00-16:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Courses (FCE, CAE)",
                    "lessons_per_week": 26,
                    "description": "Specific dates only, Mon-Fri 09:00-13:00, additional sessions Tues-Thurs 14:00-16:00",
                    "prices": [
                        {"duration": "9 weeks", "price": "€3600", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€4000", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "No specific terms provided"
    }
}
2025-01-31 12:23:50,347 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:23:50,347 - PDFParser - INFO - Successfully processed page 2
2025-01-31 12:23:50,347 - PDFParser - INFO - Processing page 3/18
2025-01-31 12:23:50,353 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:23:50,357 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:23:50,362 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:23:50,363 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:24:05,351 - PDFParser - INFO - Starting PDF processing
2025-01-31 12:24:05,352 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 12:24:05,352 - PDFParser - INFO - Initializing PDFParser
2025-01-31 12:24:05,385 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 12:24:05,386 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 12:24:05,386 - PDFParser - INFO - Processing page 1/18
2025-01-31 12:24:05,430 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:24:05,436 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:24:05,450 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:24:05,451 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:24:14,798 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:24:14,798 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Leeds",
            "country": "UK",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [],
            "additional_fees": {}
        }
    ],
    "terms": {}
}
2025-01-31 12:24:14,799 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:24:14,799 - PDFParser - INFO - Successfully processed page 1
2025-01-31 12:24:14,799 - PDFParser - INFO - Processing page 2/18
2025-01-31 12:24:14,865 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:24:14,867 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:24:14,873 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:24:14,874 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:24:37,416 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:24:37,416 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes, 09:00-13:00 Mon-Fri & 14:00-16:00 Tues-Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Minimum 4 weeks; Afternoon classes Mon-Fri, 13:45-17:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€160", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons + 5 One-to-One lessons; 09:00-13:00 Mon-Fri for group lessons and additional One-to-One lessons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€700", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "€35/week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "teaching_format": "All teaching/tuition hours are 55 minutes. Maximum class size is 14.",
        "registration": "Registration fee of €85 for all students.",
        "refund_policy": "Refunds require 14 days' cancellation notice."
    }
}
2025-01-31 12:24:37,416 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:24:37,416 - PDFParser - INFO - Successfully processed page 2
2025-01-31 12:24:37,417 - PDFParser - INFO - Processing page 3/18
2025-01-31 12:24:37,422 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:24:37,426 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:24:37,432 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:24:37,432 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:24:50,245 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:24:50,245 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Half board. Breakfast and dinner Mon-Fri, full board Sat-Sun. Single rooms not available to students aged 16-18.",
                    "supplements": {
                        "Summer": "€35/week (June 1 - September 15; students must be over 18)"
                    }
                },
                {
                    "type": "Homestay with special diet",
                    "price_per_week": "€315",
                    "description": "Coeliac, gluten-free, lactose-free, vegan, or vegetarian diet.",
                    "supplements": {}
                },
                {
                    "type": "Christmas Homestay",
                    "price_per_week": "€345",
                    "description": "Available between December 20, 2025, and January 3, 2026."
                },
                {
                    "type": "Auburn and Crestfield (Residential)",
                    "price_per_week": "€300 (single) / €265 (shared)",
                    "description": "Self-catering private residence. Minimum 2 weeks. Compulsory airport transfer required on arrival. Located 4-5 km from the school. Single and shared rooms with private bathroom available. Limited availability."
                },
                {
                    "type": "Heyday Residence",
                    "price_per_week": "€399 (single en-suite)",
                    "description": "Self-catering. Minimum 2 weeks. Located 14 minutes walking distance from the school. Limited availability."
                }
            ],
            "additional_fees": {
                "accommodation_placement": "€85",
                "airport_transfer": "€85 (one way)"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is in carefully selected homestays and includes meals as specified. Students are not allowed to miss days, and a fee of €60 per week applies for holding accommodation during absence over 5 days.",
        "insurance": "Mandatory Medi-PEL insurance for ILEP students (€130 per annum). EU students must hold an EHIC card. Medical insurance is required for all and can be provided by CES.",
        "teaching_hours": "Standard general course: 18.33 contact hours/week, Intensive course: 23.83 hours/week.",
        "examinations": "CES Dublin is an official IELTS, TOEIC, and Cambridge Advanced Test Centre. IELTS test fee: €215. Cambridge Advanced test fee: €210.",
        "text_books": "Textbook costs €28 (digital) or €45 (IELTS/Cambridge).",
        "social_activities": "Full-day excursions cost approximately €55-65. Half-day excursions: €15-25.",
        "policy_of_care": "Safety policies apply to students aged 16-17 in adult courses.",
        "school_holidays": "No classes: Jan 1, Mar 3, Mar 17, Apr 18, May 6, Aug 5, Dec 19 - Jan 5."
    }
}
2025-01-31 12:24:50,245 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:24:50,245 - PDFParser - INFO - Successfully processed page 3
2025-01-31 12:24:50,245 - PDFParser - INFO - Processing page 4/18
2025-01-31 12:24:50,272 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:24:50,276 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:24:50,281 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:24:50,282 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:25:09,309 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:25:09,309 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": "N/A (specific address not provided)",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "09:00-13:00 Mon-Fri, 14:00-16:00 Tues-Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "14:00-17:15 Mon-Fri, minimum 4 weeks",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24+ weeks", "price": "€150", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "09:00-13:00 Mon-Fri (group lessons), 14:00-16:30 (two afternoons, one-to-one lessons)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00-13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24+ weeks", "price": "€200", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Courses",
                    "lessons_per_week": 26,
                    "description": "Various courses available based on Cambridge exam schedules",
                    "prices": [
                        {"duration": "9 weeks", "price": "€2835", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€3150", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Long Term Course",
                    "lessons_per_week": 20,
                    "description": "25 weeks + 8 weeks holidays (study and work visa eligible)",
                    "prices": [
                        {"duration": "N/A", "price": "€5000", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": "Varies",
                    "description": "Includes CELTA and additional training courses",
                    "prices": [
                        {"type": "CELTA Training Course (online)", "price": "€1800", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "€35/week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "Cancellation policies require further inquiry with the school (not fully detailed on the price list)."
    }
}
2025-01-31 12:25:09,309 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:25:09,309 - PDFParser - INFO - Successfully processed page 4
2025-01-31 12:25:09,309 - PDFParser - INFO - Processing page 5/18
2025-01-31 12:25:09,314 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:25:09,316 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:25:09,321 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:25:09,322 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:25:18,762 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:25:18,762 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard Course",
                    "lessons_per_week": 18.33,
                    "description": "Courses consist of 55-minute teaching hours and exclude breaks.",
                    "prices": []
                },
                {
                    "name": "Intensive Course",
                    "lessons_per_week": 23.83,
                    "description": "Courses consist of 55-minute teaching hours and exclude breaks.",
                    "prices": []
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": "Half board Monday to Friday, full board on weekends.",
                    "supplements": {
                        "single_room_summer_supplement": "€50/week (May 17 to September 28)",
                        "special_diet_supplement": "€35/week (Coeliac, gluten-free, lactose-free, vegan, vegetarian)",
                        "christmas_holiday_fee": "€345/week (Dec 20 to Jan 3, 2026)"
                    }
                },
                {
                    "type": "University College Cork Residence",
                    "price_per_week": "From €285",
                    "description": null,
                    "supplements": {
                        "extra_night": "€50"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85",
                "airport_transfer": "€60 (one way)",
                "insurance": "€130/year",
                "text_book": "€28 for digital e-book, €45 for IELTS course book",
                "exam_fees": {
                    "IELTS": "€215",
                    "Cambridge_First": "€205",
                    "Advanced": "€210"
                }
            }
        }
    ],
    "terms": {
        "accommodation": "Homestay accommodations are half board (breakfast and dinner) Monday to Friday and full board (breakfast, lunch, and dinner) on weekends. No refund or allowance for absences.",
        "insurance": "Mandatory for ILEP students. Costs €130 per annum and will be arranged by CES.",
        "social_activities": "Participation costs vary: €15-€25 for half days, €45-€65 for full days. Includes free afternoon and evening activities.",
        "policy_of_care": "Strict care policy for 16-17 year olds in adult schools.",
        "school_holidays": "No refund or compensation for holidays. Specific dates include: Jan 1, Feb 3, Mar 17, Apr 18, Apr 21, May 5, Jun 2, Aug 4, Oct 27, Dec 19, 2025 - Jan 5, 2026."
    }
}
2025-01-31 12:25:18,762 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:25:18,762 - PDFParser - INFO - Successfully processed page 5
2025-01-31 12:25:18,762 - PDFParser - INFO - Processing page 6/18
2025-01-31 12:25:18,786 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:25:18,789 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:25:18,795 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:25:18,795 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:25:40,463 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:25:40,463 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Unknown Language School",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri from 9:00 - 12:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$440", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "$415", "currency": "CAD"},
                        {"duration": "12-23 weeks", "price": "$395", "currency": "CAD"},
                        {"duration": "24-35 weeks", "price": "$365", "currency": "CAD"},
                        {"duration": "36+ weeks", "price": "$345", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "Morning classes Mon-Fri from 9:00 - 14:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "CAD"},
                        {"duration": "12-23 weeks", "price": "$420", "currency": "CAD"},
                        {"duration": "24-35 weeks", "price": "$400", "currency": "CAD"},
                        {"duration": "36+ weeks", "price": "$375", "currency": "CAD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "Morning classes Mon-Fri from 9:00 - 15:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$500", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "$475", "currency": "CAD"},
                        {"duration": "12-23 weeks", "price": "$445", "currency": "CAD"},
                        {"duration": "24-35 weeks", "price": "$420", "currency": "CAD"},
                        {"duration": "36+ weeks", "price": "$400", "currency": "CAD"}
                    ]
                },
                {
                    "name": "English for Digital Marketing",
                    "lessons_per_week": 30,
                    "description": "Blended Digital Marketing and General English course.",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "CAD"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 30,
                    "description": "Preparatory course for academic programs, requires a B2 entry level.",
                    "prices": [
                        {"duration": "12 weeks", "price": "$5340", "currency": "CAD"}
                    ]
                },
                {
                    "name": "English for Business",
                    "lessons_per_week": 25,
                    "description": "Focused on Business English, includes afternoon sessions.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "$465", "currency": "CAD"},
                        {"duration": "5-11 weeks", "price": "$445", "currency": "CAD"},
                        {"duration": "12 weeks", "price": "$420", "currency": "CAD"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Not provided",
                    "price_per_week": null,
                    "description": null,
                    "supplements": null
                }
            ],
            "additional_fees": {
                "registration": "$195",
                "materials_fee": "$20 per week",
                "IELTS paper-based exam": "$370",
                "IELTS computer-based exam": "$370",
                "private lessons (general)": "$85 per lesson",
                "private lessons (exam prep)": "$95 per lesson"
            }
        }
    ],
    "terms": {
        "cancellation": "Teaching and tuition hours are 45 minutes each. Maximum class size is 16 students."
    }
}
2025-01-31 12:25:40,463 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:25:40,463 - PDFParser - INFO - Successfully processed page 6
2025-01-31 12:25:40,464 - PDFParser - INFO - Processing page 7/18
2025-01-31 12:25:40,479 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:25:40,481 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:25:40,489 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:25:40,490 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:25:54,975 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:25:54,975 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "Not provided in the image",
            "courses": [
                {
                    "name": "General English",
                    "lessons_per_week": "Various options available (Standard, Intensive, etc.)",
                    "description": "15 hours per week for standard courses, excluding breaks",
                    "prices": "Not included in the image"
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": {
                        "single_full_board": "$350",
                        "shared_full_board": "$310",
                        "single_half_board": "$320",
                        "shared_half_board": "$275",
                        "executive_half_board_with_private_bathroom": "$365"
                    },
                    "description": "Various meal and room types available with additional summer fees ($30 per week from 01 June to 31 August).",
                    "supplements": {
                        "special_diet": "$50 (Full Board) / $45 (Half Board)",
                        "extra_night": "$60",
                        "underage_fee": "$25 per week for ages 16-17"
                    }
                },
                {
                    "type": "Residential Self-Catering",
                    "price_per_week": {
                        "casa_canada_shared_room": "$525",
                        "casa_canada_1_bedroom": "$650",
                        "28_langley_avenue": "$575",
                        "tartu_student_residence_economy_suite": "$550",
                        "tartu_student_residence_premium_ac_unit": "$650"
                    },
                    "monthly_minimum": {
                        "casa_canada": "4 weeks",
                        "tartu_student_residence": "May - August"
                    },
                    "description": "Options for shared rooms, single rooms, and units with Premium AC available."
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "$275",
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "underage_custodian_fee_non_notarized": "$75",
                "underage_custodian_fee_notarized": "$200",
                "medical_insurance": "$3 per day",
                "homestay_move_fee": "$150",
                "late_arrival_fee": "$125 for non-Saturday/Sunday arrivals"
            }
        }
    ],
    "terms": {
        "accommodation": "No absence or early departure refunds. Check-in and out must be Saturday-to-Saturday or Sunday-to-Sunday. Shared accommodation only available for 2 people traveling together.",
        "medical_insurance": "Students are recommended to purchase travel and medical insurance before departure.",
        "tuition_hours": "Teaching hours are 45 minutes. Standard courses are 15 hours per week. Intensive courses are 18.75 hours per week. Super-intensive courses are 22.50 hours per week.",
        "social_activities": "Organized activities like day trips (e.g., Niagara Falls, Algonquin Park) and evening events are available.",
        "policy_of_care": "Strict policy of care for students aged 16 and 17 years.",
        "school_holidays": "01 January, 17 February, 18 April, 19 May, 01 July, 04 August, 01 September, 30 September, 13 October, 11 November, 25 December, 26 December 2025."
    }
}
2025-01-31 12:25:54,975 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:25:54,975 - PDFParser - INFO - Successfully processed page 7
2025-01-31 12:25:54,975 - PDFParser - INFO - Processing page 8/18
2025-01-31 12:25:54,979 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:25:54,981 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:25:54,986 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:25:54,987 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:26:19,789 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:26:19,789 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00 - 12:15 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "440", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "415", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "395", "currency": "USD"},
                        {"duration": "24 weeks", "price": "365", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thur; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thur; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "500", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "475", "currency": "USD"},
                        {"duration": "12-23 weeks", "price": "445", "currency": "USD"},
                        {"duration": "24 weeks", "price": "420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 25,
                    "description": "09:00 - 14:00 Mon to Thur; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "465", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "445", "currency": "USD"},
                        {"duration": "12 weeks", "price": "420", "currency": "USD"}
                    ]
                },
                {
                    "name": "Super Intensive IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thur; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "500", "currency": "USD"},
                        {"duration": "5-9 weeks", "price": "475", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 12:15 Mon to Fri + 5 One-to-One lessons/week. 13:00 - 15:30 Cambridge Prep Tue & Thu afternoons",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "915", "currency": "USD"},
                        {"duration": "5-11 weeks", "price": "890", "currency": "USD"},
                        {"duration": "12 weeks", "price": "870", "currency": "USD"}
                    ]
                },
                {
                    "name": "Cambridge Examination Fast Track Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:00 - 15:15 Mon to Thur; 09:00 - 12:15 Fridays",
                    "prices": [
                        {"duration": "4 weeks", "price": "2000", "currency": "USD"}
                    ]
                }
            ],
            "accommodations": null,
            "additional_fees": {
                "registration": "195",
                "currency": "USD",
                "private_lessons": [
                    {"type": "General", "price_per_lesson": "85", "currency": "USD"},
                    {"type": "Exam Preparation", "price_per_lesson": "95", "currency": "USD"}
                ],
                "Cambridge_materials_exam_admin": "575",
                "material_fee": "20",
                "material_fee_duration": "per week",
                "currency_material": "USD"
            }
        }
    ],
    "terms": {
        "cancellation": "Maximum teaching class size 16 students.",
        "lesson_duration": "Each lesson in a course lasts 45 minutes."
    }
}
2025-01-31 12:26:19,789 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:26:19,789 - PDFParser - INFO - Successfully processed page 8
2025-01-31 12:26:19,790 - PDFParser - INFO - Processing page 9/18
2025-01-31 12:26:19,794 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:26:19,796 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:26:19,802 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:26:19,802 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:26:42,215 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:26:42,216 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Vancouver",
            "country": "Canada",
            "address": null,
            "courses": null,
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "name": "Full-Board Accommodation",
                            "price_single": "$375/week",
                            "price_shared": "$355/week",
                            "summer_supplement": "$30/week (01 Jun - 31 Aug)"
                        },
                        {
                            "name": "Half-Board Accommodation",
                            "price_single": "$360/week",
                            "price_shared": "$335/week",
                            "summer_supplement": "$30/week (01 Jun - 31 Aug)"
                        },
                        {
                            "name": "Executive Half-Board with Private Bathroom",
                            "price_single": "$480/week",
                            "summer_supplement": "$30/week (01 Jun - 31 Aug)"
                        }
                    ],
                    "add_ons": {
                        "special_diet_supplement": {
                            "full_board": "$50/week",
                            "half_board": "$45/week",
                            "notes": "Coeliac, gluten free, lactose free, vegan, halal, kosher, vegetarian"
                        },
                        "extra_night": "$60",
                        "underage_fee": "$25/week (applies to 16-18 years)"
                    },
                    "placement_fee": "$275"
                },
                {
                    "type": "Residential",
                    "options": [
                        {
                            "name": "GEC Viva (18+ Economy Downtown)",
                            "price_shared": "Not available",
                            "price_single_weekly": null,
                            "price_single_monthly": "$1600/month"
                        },
                        {
                            "name": "Casa Canada",
                            "price_weekly": "$600/week",
                            "price_monthly": "$2400/month"
                        },
                        {
                            "name": "YWCA Student Residence",
                            "price_weekly": "TBA",
                            "price_monthly": "TBA"
                        }
                    ],
                    "placement_fee": "$275"
                }
            ],
            "additional_fees": {
                "airport_transfer_one_way": "$150",
                "airport_return_transfer": "$300",
                "custodian_fee_non_notarized": "$75",
                "custodian_fee_notarized": "$200",
                "medical_insurance": "$3/day",
                "homestay_move_fee": "$150"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged carefully in a selected homestay or residence based on request. No allowance will be made for absence during the arranged period or late arrival/early departure.",
        "medical_insurance": "Students are advised to arrange travel and medical insurance before leaving home. Insurance should cover personal loss and tuition fees in case of cancellation.",
        "tuition_hours": "Standard Course: 15 hours per week, Intensive Course: 18.75 hours per week, Super Intensive Course: 22.50 hours per week (excluding breaks).",
        "social_activities": "Offers afternoon, evening, and overnight activities. Popular trips include Whistler, Victoria, Rocky Mountains, and Seattle.",
        "policy_care": "CES has strict policies against enrolling students under 19 in adult classes. Contact CES for more details.",
        "school_holidays": [
            "01 January",
            "17 February",
            "18 April",
            "19 May",
            "01 July",
            "04 August",
            "01 September",
            "30 September",
            "13 October",
            "11 November",
            "25 December",
            "26 December"
        ]
    }
}
2025-01-31 12:26:42,216 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:26:42,216 - PDFParser - INFO - Successfully processed page 9
2025-01-31 12:26:42,216 - PDFParser - INFO - Processing page 10/18
2025-01-31 12:26:42,250 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:26:42,252 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:26:42,257 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:26:42,258 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:27:04,488 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:27:04,488 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "9:30 - 13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "9:30 - 13:00 (Mon-Fri) and 14:00 - 16:30 (Tues-Thurs)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 20,
                    "description": "5 hours one-to-one lessons, general English group lessons.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "9:30 - 13:00 (Mon-Fri general English), 14:00 - 16:30 (Tues-Thurs, IELTS focus)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": 30,
                    "description": "5 hours one-to-one lessons, FCE preparation focus.",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration_fee": "£75"
            }
        },
        {
            "city": "Edinburgh",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "English and Culture 50+ Programme",
                    "lessons_per_week": 20,
                    "description": "9:30 - 13:00 (Mon-Fri) with cultural visits.",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": 30,
                    "description": "Language development and teaching methodology.",
                    "prices": [
                        {"type": "Face-to-face", "price": "£1545", "currency": "GBP"},
                        {"type": "Online part-time/full-time", "price": "£1400", "currency": "GBP"},
                        {"type": "Online 24 weeks part-time", "price": "£1515", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration_fee": "£75"
            }
        }
    ],
    "terms": {
        "cancellation": "Maximum class size is 14. All courses are 45 minutes per teaching unit. Advanced booking is required."
    }
}
2025-01-31 12:27:04,488 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:27:04,488 - PDFParser - INFO - Successfully processed page 10
2025-01-31 12:27:04,488 - PDFParser - INFO - Processing page 11/18
2025-01-31 12:27:04,495 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:27:04,496 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:27:04,502 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:27:04,503 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:27:19,617 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:27:19,617 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "London",
            "country": "UK",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£335",
                    "description": "Premium single room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                },
                {
                    "type": "Homestay - Shared",
                    "price_per_week": "£235",
                    "description": "Shared room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                },
                {
                    "type": "Homestay - Shared - Premium",
                    "price_per_week": "£275",
                    "description": "Premium shared room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                },
                {
                    "type": "Residential (Rathbone Apartments, Zone 1 Central London)",
                    "price_per_week": "£275 - £560",
                    "description": "Double/twin/single rooms with various sharing options, minimum age 18, minimum stay 4 weeks, not available October-December",
                    "supplements": null
                }
            ],
            "additional_fees": {
                "placement_fee": "£75"
            }
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                },
                {
                    "type": "Homestay - Shared",
                    "price_per_week": "£235",
                    "description": "Shared room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                }
            ],
            "additional_fees": {
                "placement_fee": "£75"
            }
        }
    ],
    "other_details": {
        "airport_transfer": {
            "London": {
                "Heathrow/Gatwick": {
                    "1 passenger": "£145",
                    "2 passengers": "£150",
                    "3 passengers": "£155"
                },
                "Stansted": {
                    "1 passenger": "£200",
                    "2 passengers": "£210",
                    "3 passengers": "£220"
                }
            },
            "Edinburgh": {
                "Edinburgh Airport": {
                    "1 passenger": "£80",
                    "2 passengers": "£85",
                    "3 passengers": "£90"
                },
                "Glasgow Airport": {
                    "1 passenger": "£280",
                    "2 passengers": "£285",
                    "3 passengers": "£290"
                }
            }
        },
        "terms": {
            "accommodation_terms": "Accommodations include half board. No allowance is made for absenteeism. Maximum 4 students in one homestay. Shared accommodation only guaranteed for 2 travelers.",
            "medical_insurance": "Travel insurance strongly advised, covering personal loss and cancellation costs.",
            "tuition_hours": "Standard course: 15 hours weekly, Intensive: 22 hours weekly.",
            "additional_costs": {
                "IELTS exam": "£220 (subject to change)",
                "textbooks": {
                    "cost": "£32",
                    "type": "Textbook + Digital Book"
                }
            },
            "holidays": ["Various dates including Dec 22-Jan 2, 2026"]
        }
    }
}
2025-01-31 12:27:19,617 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:27:19,617 - PDFParser - INFO - Successfully processed page 11
2025-01-31 12:27:19,617 - PDFParser - INFO - Processing page 12/18
2025-01-31 12:27:19,622 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:27:19,624 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:27:19,630 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:27:19,630 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:27:45,455 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:27:45,455 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": "",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£275", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£265", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£240", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri & 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group lessons, 5 One-to-One lessons",
                    "description": "09:30 - 13:00 Mon to Fri (Group Lessons), 14:00 - 16:30 (One-to-One)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri (General English), 14:00 - 16:30 Tues to Thurs (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course",
                    "lessons_per_week": "20 Group Lessons, 5 One-to-One lessons",
                    "description": "09:30 - 13:00 Mon to Fri, 14:00 - 16:30 Two afternoons One-to-One",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£615", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£605", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£595", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi-Destination Course",
                    "lessons_per_week": "20 or 30",
                    "description": "",
                    "prices": [
                        {"duration": "24 weeks (20 lessons)", "price": "£6000", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons)", "price": "£8520", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons)", "price": "£8640", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons)", "price": "£12420", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri, 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "3 months", "price": "£4380", "currency": "GBP"},
                        {"duration": "6 months", "price": "£8520", "currency": "GBP"},
                        {"duration": "Extra weeks", "price": "£355", "currency": "GBP"}
                    ]
                },
                {
                    "name": "English and Culture, 50+ Programme",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri, Afternoon cultural visits included",
                    "prices": [
                        {"duration": "2 weeks", "price": "£1065", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "description": "Full-time: 09:00 - 17:00 Mon to Fri, Part-time: 20 hours independent work per week",
                    "prices": [
                        {"mode": "Online (24-week part time)", "price": "£1515", "currency": "GBP"},
                        {"mode": "Online (Part or full time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri (General English), 14:00 - 16:30 Tues to Thurs (Business English)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£390", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£370", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£365", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£345", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "description": "",
                    "prices": [
                        {"per_hour": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "class_size": "Max 9 students",
        "teaching_hours": "Lessons are 45 minutes each"
    }
}
2025-01-31 12:27:45,456 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:27:45,456 - PDFParser - INFO - Successfully processed page 12
2025-01-31 12:27:45,456 - PDFParser - INFO - Processing page 13/18
2025-01-31 12:27:45,460 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:27:45,462 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:27:45,467 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:27:45,468 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:27:56,740 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:27:56,740 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Oxford",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "£280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special Diet": "£35/week",
                        "Christmas Holidays": "£350/week (20 Dec to 3 Jan 2026)"
                    }
                },
                {
                    "type": "Homestay",
                    "price_per_week": "£235",
                    "description": "Shared room, half board (for 2 people traveling together)",
                    "supplements": {
                        "Summer": "£35/week (July and August)",
                        "Special Diet": "£35/week",
                        "Christmas Holidays": "£350/week (20 Dec to 3 Jan 2026)"
                    }
                },
                {
                    "type": "Premium Homestay",
                    "price_per_week": "£335",
                    "description": "Single premium room, half board",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                },
                {
                    "type": "Premium Homestay",
                    "price_per_week": "£275",
                    "description": "Shared premium room, half board (for 2 people traveling together)",
                    "supplements": {
                        "Summer": "£35/week (July and August)"
                    }
                }
            ],
            "additional_fees": {
                "accommodation_placement": "£75",
                "airport_transfer": {
                    "Heathrow": {
                        "one_person": "£165",
                        "two_people": "£170",
                        "three_people": "£175"
                    },
                    "Gatwick": {
                        "one_person": "£205",
                        "two_people": "£210",
                        "three_people": "£215"
                    },
                    "Stansted": {
                        "one_person": "£215",
                        "two_people": "£220",
                        "three_people": "£225"
                    }
                },
                "IELTS_exam": "£220 (Subject to change)",
                "digital_textbook": "£32"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in carefully selected homestays on request. Half board covers bed, breakfast, and dinner. No refund for absences or early departures.",
        "medical_insurance": "Students must have travel and medical insurance before arrival. CES can assist in obtaining insurance.",
        "tuition_hours": "Standard Course: 15 contact hours per week. Intensive Course: 22 contact hours per week. All teaching hours are 45 minutes.",
        "social_activities": {
            "costs": {
                "full_day": "£75-120",
                "half_day": "£8-90"
            },
            "description": "Availability of free afternoon and evening activities in all schools."
        },
        "policy_of_care": "CES provides care and welfare for 16-17 year olds in adult schools. For further details, contact CES.",
        "school_holidays": [
            "01 January 2025",
            "18 April 2025",
            "21 April 2025",
            "05 May 2025",
            "26 May 2025",
            "25 August 2025",
            "22 December 2025 to 02 January 2026"
        ]
    }
}
2025-01-31 12:27:56,741 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:27:56,741 - PDFParser - INFO - Successfully processed page 13
2025-01-31 12:27:56,741 - PDFParser - INFO - Processing page 14/18
2025-01-31 12:27:56,763 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:27:56,766 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:27:56,771 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:27:56,772 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:28:34,013 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:28:34,013 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": "N/A",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30-13:00, Monday to Friday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£255", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£250", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£240", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£230", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£225", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00, Monday to Friday; 14:00-16:30, Tuesday to Thursday",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "09:30-13:00, Monday to Friday (group); 14:00-16:30 (one-to-one, two afternoons)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00, Monday to Friday (General English); 14:00-16:30, Tuesday to Thursday (IELTS)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": "20 group lessons + 5 one-to-one lessons",
                    "description": "09:30-13:00, Monday to Friday (General English); 14:00-16:30 (two afternoons for FCE preparation)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£595", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£590", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£580", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course",
                    "lessons_per_week": [20, 30],
                    "description": "24-36 weeks program across multiple locations",
                    "prices": [
                        {"duration": "24 weeks (20 lessons/week)", "price": "£5520", "currency": "GBP"},
                        {"duration": "36 weeks (20 lessons/week)", "price": "£8100", "currency": "GBP"},
                        {"duration": "24 weeks (30 lessons/week)", "price": "£8040", "currency": "GBP"},
                        {"duration": "36 weeks (30 lessons/week)", "price": "£11880", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00, Monday to Friday; 14:00-16:30, Tuesday to Thursday",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£8040", "currency": "GBP"},
                        {"duration": "Extra week", "price": "£335", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "Afternoon lecture/visits available (Language Development & Methodology, CLIL)",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£765", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course",
                    "lessons_per_week": "Full-time/part-time",
                    "description": "Face to face or Online",
                    "prices": [
                        {"type": "Face-to-face", "price": "£1545", "currency": "GBP"},
                        {"type": "Online (24-week part-time)", "price": "£1515", "currency": "GBP"},
                        {"type": "Online (part-time/full-time)", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30-13:00, Monday to Friday (General English); 14:00-16:30, Tuesday to Thursday (Business English)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£375", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£360", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£330", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "description": "Specialized one-to-one lessons tailored to the student.",
                    "prices": [
                        {"rate": "£75 per hour", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "registration": "All lessons are 45 minutes. Maximum class size is 14."
    }
}
2025-01-31 12:28:34,013 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:28:34,014 - PDFParser - INFO - Successfully processed page 14
2025-01-31 12:28:34,014 - PDFParser - INFO - Processing page 15/18
2025-01-31 12:28:34,018 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:28:34,020 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:28:34,026 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:28:34,026 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:28:49,990 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:28:49,991 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Leeds",
            "country": "United Kingdom",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "options": [
                        {
                            "name": "Single Room",
                            "price_per_week": "£240",
                            "description": "Half-board (bed, breakfast, and dinner)",
                            "supplements": {
                                "Summer": "£35/week (July and August)",
                                "Special Diet": "£35/week",
                                "Christmas Holidays": "£350 total (20 Dec to 3 Jan 2026)"
                            }
                        },
                        {
                            "name": "Shared Room",
                            "price_per_week": "£215",
                            "description": "Half-board (bed, breakfast, and dinner)",
                            "supplements": {
                                "Summer": "£35/week (July and August)",
                                "Special Diet": "£35/week"
                            }
                        }
                    ],
                    "placement_fee": "£75"
                },
                {
                    "type": "Residential",
                    "price_per_week": "£225",
                    "description": "Single en suite room; 18+ years; minimum 4 weeks; year-round",
                    "placement_fee": "£75"
                }
            ],
            "transportation": {
                "airport_transfer": {
                    "from_Leeds_Bradford_Airport": {
                        "one_passenger": "£100",
                        "two_passengers": "£105",
                        "three_passengers": "£110"
                    },
                    "from_Manchester_Airport": {
                        "one_passenger": "£150",
                        "two_passengers": "£155",
                        "three_passengers": "£160"
                    },
                    "from_Liverpool_Airport": {
                        "one_passenger": "£185",
                        "two_passengers": "£190",
                        "three_passengers": "£195"
                    },
                    "london_airports": "Available upon request"
                }
            },
            "additional_fees": {
                "IELTS_exam": "£220",
                "digital_ebook": "£32"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in a carefully selected homestay or residence on request. No refunds for missed time or early departure from a homestay. Shared rooms in homestays are only guaranteed for 2 people traveling together.",
        "medical_insurance": "Students are advised to take out travel and medical insurance before leaving home.",
        "tuition_hours": "Standard Course: 15 contact hours/week; Intensive Course: 22 contact hours/week.",
        "examinations": "IELTS center in Leeds. Exam cost: £220.",
        "text_books": "Digital E-book: £32.",
        "social_activities": "Students pay only for specific excursions or activities they participate in. Approximate costs range £5-£75.",
        "care_policy": "Strict policy of care for 16 and 17-year-old students in adult schools.",
        "school_holidays": "01 January, 18 April, 01 April, 05 May, 26 May, 25 August, 22 December 2025 - 02 January 2026. No refund or time given in lieu for public holidays."
    }
}
2025-01-31 12:28:49,991 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:28:49,991 - PDFParser - INFO - Successfully processed page 15
2025-01-31 12:28:49,991 - PDFParser - INFO - Processing page 16/18
2025-01-31 12:28:49,999 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:28:50,004 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:28:50,011 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:28:50,012 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:29:20,773 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:29:20,773 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£245", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£235", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£225", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£220", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£210", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri; 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": "20 group + 5 One-to-One",
                    "description": "09:30 - 13:00 Mon to Fri; 14:00 - 16:30 two afternoons One-to-One",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "IELTS Preparation Course",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri; 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Cambridge Exam Preparation Course (FCE)",
                    "lessons_per_week": "20 group + 5 One-to-One",
                    "description": "09:30 - 13:00 Mon to Fri; 14:00 - 16:30 two afternoons One-to-One",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£585", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£575", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£565", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course - 20 Lessons",
                    "lessons_per_week": 20,
                    "description": "Flight not included.",
                    "prices": [
                        {"duration": "24 weeks", "price": "£5280", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£7560", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Long Term / Multi Destination Course - 30 Lessons",
                    "lessons_per_week": 30,
                    "description": "Flight not included.",
                    "prices": [
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "36 weeks", "price": "£10980", "currency": "GBP"}
                    ]
                },
                {
                    "name": "University Pathway Programme",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri; 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "12 weeks", "price": "£4260", "currency": "GBP"},
                        {"duration": "24 weeks", "price": "£7560", "currency": "GBP"},
                        {"duration": "Extra Week", "price": "£315", "currency": "GBP"}
                    ]
                },
                {
                    "name": "Teacher Training Courses",
                    "lessons_per_week": 20,
                    "description": "09:30 - 13:00 Mon to Fri; includes lectures and visits",
                    "prices": [
                        {"duration": "1 week", "price": "£385", "currency": "GBP"},
                        {"duration": "2 weeks", "price": "£770", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course - Online (Part-Time)",
                    "description": "Independent study approx. 20 hours per week.",
                    "prices": [
                        {"type": "24-Week Part-Time", "price": "£1515", "currency": "GBP"}
                    ]
                },
                {
                    "name": "CELTA Training Course - Online (Part-Time or Full-Time)",
                    "prices": [
                        {"type": "Part-Time or Full-Time", "price": "£1400", "currency": "GBP"}
                    ]
                },
                {
                    "name": "General English with Business",
                    "lessons_per_week": 30,
                    "description": "09:30 - 13:00 Mon to Fri; 14:00 - 16:30 Tues to Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "£355", "currency": "GBP"},
                        {"duration": "5-11 weeks", "price": "£335", "currency": "GBP"},
                        {"duration": "12-23 weeks", "price": "£325", "currency": "GBP"},
                        {"duration": "24-35 weeks", "price": "£315", "currency": "GBP"},
                        {"duration": "36+ weeks", "price": "£305", "currency": "GBP"}
                    ]
                },
                {
                    "name": "One-to-One Lessons",
                    "prices": [
                        {"type": "Per Hour", "price": "£75", "currency": "GBP"}
                    ]
                }
            ],
            "accommodations": [],
            "additional_fees": {
                "registration": "£75"
            }
        }
    ],
    "terms": {
        "general": "Registration fee of £75 applies to all students. All teaching / tuition hours are 45 minutes. Maximum class size is 14."
    }
}
2025-01-31 12:29:20,773 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:29:20,774 - PDFParser - INFO - Successfully processed page 16
2025-01-31 12:29:20,774 - PDFParser - INFO - Processing page 17/18
2025-01-31 12:29:20,778 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:29:20,782 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:29:20,787 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:29:20,788 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:29:30,958 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:29:30,959 - PDFParser - DEBUG - Raw API response content: {
  "school_name": "Centre of English Studies",
  "locations": [
    {
      "city": "Worthing",
      "country": "England",
      "address": "Not specified",
      "courses": [
        {
          "name": "Standard General English",
          "lessons_per_week": 15,
          "description": "15 contact hours per week, excluding breaks. Tuition hours are 45 minutes each.",
          "prices": []
        },
        {
          "name": "Intensive General English",
          "lessons_per_week": 22,
          "description": "22 contact hours per week, excluding breaks. Tuition hours are 45 minutes each.",
          "prices": []
        }
      ],
      "accommodations": [
        {
          "type": "Homestay",
          "price_per_week": {
            "single_room": "£240",
            "shared_room": "£215"
          },
          "description": "Half board (bed, breakfast, and dinner).",
          "supplements": {
            "summer": "£35/week (July and August)",
            "special_diet": "£35/week",
            "Christmas": "£350 (20 December to 3 January 2026)"
          }
        }
      ],
      "additional_fees": {
        "accommodation_placement": "£75",
        "textbook": "£32",
        "IELTS_exam": "£220 (subject to change)"
      }
    }
  ],
  "terms": {
    "accommodation": "Shared accommodation only available for 2 people traveling together. No refunds for absences.",
    "medical_insurance": "Strongly advised to take out travel and medical insurance.",
    "school_hours": "No tuition during public holidays: 01 Jan, 18 Apr, 21 Apr, 05 May, 26 May, 25 Aug, 22 Dec 2025 - 02 Jan 2026.",
    "policy_of_care": "Strictly for students aged 16 and 17 studying in adult schools. Contact CES for details."
  }
}
2025-01-31 12:29:30,959 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:29:30,959 - PDFParser - INFO - Successfully processed page 17
2025-01-31 12:29:30,959 - PDFParser - INFO - Processing page 18/18
2025-01-31 12:29:30,969 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:29:30,972 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:29:30,978 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:29:30,978 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:29:47,878 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:29:47,878 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "72 Dame Street, Dublin 2, Ireland",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Provided over 2 weeks - full refund given.",
                    "supplements": {}
                },
                {
                    "type": "Self-catering (depending on suppliers' fees)",
                    "price_per_week": null,
                    "description": "Notice period of less than 28 days - no refund given.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "registration": "€250"
            }
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "address": "180 Bloor Street West, Toronto, Ontario Canada M4W 1A3",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Provided over 2 weeks - full refund given.",
                    "supplements": {}
                },
                {
                    "type": "Self-catering (depending on suppliers' fees)",
                    "price_per_week": null,
                    "description": "Notice period of less than 28 days - no refund given.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "registration": "CAD $350"
            }
        },
        {
            "city": "Worthing",
            "country": "United Kingdom",
            "address": "27 South Street, Worthing, West Sussex, BN11 3AR",
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": null,
                    "description": "Provided over 2 weeks - full refund given.",
                    "supplements": {}
                },
                {
                    "type": "Self-catering (depending on suppliers' fees)",
                    "price_per_week": null,
                    "description": "Notice period of less than 28 days - no refund given.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "registration": "GBP £250"
            }
        }
    ],
    "terms": {
        "cancellation": {
            "accommodation": "Notice provided up to 14 days of the arrival date - cancellation fee of €250 (Ireland)/GBP£250 (UK)/CAD $350 (Canada).",
            "tuition_and_fees": "Notice provided fewer than 14 days prior - no refund given."
        },
        "general_terms": [
            "Fees include tuition, assessment test, individual report, use of learning center/multimedia center.",
            "No refund for missed days if the course is shortened.",
            "CES does not take responsibility for delays, e.g., accommodation or visa."
        ]
    }
}
2025-01-31 12:29:47,878 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:29:47,879 - PDFParser - INFO - Successfully processed page 18
2025-01-31 12:29:47,880 - PDFParser - INFO - PDF processing completed
2025-01-31 12:29:47,880 - PDFParser - INFO - Merging results from all pages
2025-01-31 12:29:47,881 - PDFParser - INFO - Collected 26 locations for merging
2025-01-31 12:29:47,881 - PDFParser - ERROR - Error in merge_results: 'PDFProcessor' object has no attribute 'safe_get_dict'
2025-01-31 12:29:47,881 - PDFParser - ERROR - Error in process_pdf: 'PDFProcessor' object has no attribute 'safe_get_dict'
2025-01-31 12:29:47,881 - PDFParser - ERROR - Main process failed: 'PDFProcessor' object has no attribute 'safe_get_dict'
2025-01-31 12:31:03,423 - PDFParser - INFO - Starting PDF processing
2025-01-31 12:31:03,423 - PDFParser - INFO - Initializing PDFProcessor
2025-01-31 12:31:03,424 - PDFParser - INFO - Initializing PDFParser
2025-01-31 12:31:03,467 - PDFParser - INFO - Processing PDF: data/input_files/2025_CES_Adult_Price_List_as_at_8th_August.pdf
2025-01-31 12:31:03,471 - PDFParser - INFO - Opened PDF with 18 pages
2025-01-31 12:31:03,471 - PDFParser - INFO - Processing page 1/18
2025-01-31 12:31:03,546 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:31:03,551 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:31:03,567 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:31:03,568 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:31:15,561 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:31:15,562 - PDFParser - DEBUG - Raw API response content: 
{
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "courses": [
                {
                    "name": "IELTS, Cambridge, TOEIC and OET Exam Preparation",
                    "description": "Official IELTS, Cambridge, TOEIC and OET Exam Centre"
                },
                {
                    "name": "CELTA Training",
                    "description": "Official CELTA Training Centre"
                },
                {
                    "name": "CD IELTS Exam Preparation",
                    "description": "Official CD IELTS Exam Centre"
                }
            ]
        },
        {
            "city": "Leeds",
            "country": "UK",
            "courses": [
                {
                    "name": "IELTS Exam Preparation",
                    "description": "Official IELTS Exam Centre"
                },
                {
                    "name": "CELTA Training",
                    "description": "Official CELTA Training Centre"
                },
                {
                    "name": "CD IELTS Exam Preparation",
                    "description": "Official CD IELTS Exam Centre"
                }
            ]
        },
        {
            "city": "Edinburgh",
            "country": "UK",
            "courses": [
                {
                    "name": "CELTA Training",
                    "description": "Official CELTA Training Centre"
                }
            ]
        },
        {
            "city": "Toronto",
            "country": "Canada",
            "courses": [
                {
                    "name": "IELTS, Cambridge, CELPIP, TOEIC and OET Exam Preparation",
                    "description": "Official IELTS, Cambridge, CELPIP, TOEIC and OET Exam Centre"
                },
                {
                    "name": "CD IELTS Exam Preparation",
                    "description": "Official CD IELTS Exam Centre"
                }
            ]
        },
        {
            "city": "Cork",
            "country": "Ireland",
            "courses": [
                {
                    "name": "New Courses",
                    "description": "To be introduced in 2025"
                }
            ]
        }
    ],
    "terms": {
        "website": "www.ces-schools.com"
    }
}
2025-01-31 12:31:15,562 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:31:15,563 - PDFParser - INFO - Successfully processed page 1
2025-01-31 12:31:15,563 - PDFParser - INFO - Processing page 2/18
2025-01-31 12:31:15,637 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:31:15,641 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:31:15,646 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:31:15,647 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:31:29,517 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:31:29,517 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": "Not specified",
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "09:00-13:00, Mon-Fri",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€355", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "09:00-13:00, Mon-Fri; 14:00-16:00, Tues-Thurs",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€425", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€400", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€385", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€345", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€330", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "13:45-17:00, Mon-Fri (minimum 4 weeks)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€190", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€180", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€160", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€155", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 25,
                    "description": "20 group lessons, Mon-Fri; extra 5 hours one-to-one lessons per week",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€735", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€700", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€675", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "€35/week"
                    }
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "Not specified"
    }
}
2025-01-31 12:31:29,517 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:31:29,517 - PDFParser - INFO - Successfully processed page 2
2025-01-31 12:31:29,517 - PDFParser - INFO - Processing page 3/18
2025-01-31 12:31:29,524 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:31:29,528 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:31:29,533 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:31:29,534 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:31:45,355 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:31:45,355 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Dublin",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 18.33,
                    "description": "55-minute lessons, excluding breaks.",
                    "prices": []
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 23.83,
                    "description": "55-minute lessons, excluding breaks.",
                    "prices": []
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€280",
                    "description": "Half-board during weekdays and full-board on weekends. Single rooms not available for students aged 16-18 years.",
                    "supplements": {
                        "single_room_summer": "€35/week",
                        "special_diet": "€35/week",
                        "christmas_holidays": "€345 (20 Dec 2025 to 3 Jan 2026)"
                    }
                },
                {
                    "type": "Auburn and Crestfield Residential",
                    "price_per_week": {
                        "single_room": "€300",
                        "shared_room": "€265"
                    },
                    "description": "Self-catering. Minimum 2-week stay. Private residences located 4-5 km from the school.",
                    "supplements": {}
                },
                {
                    "type": "Heyday Residential",
                    "price_per_week": "€399",
                    "description": "Self-catering. Minimum 2-week stay. 14 minutes walking distance from the school. All rooms are single en-suite.",
                    "supplements": {}
                }
            ],
            "additional_fees": {
                "accommodation_placement": "€85",
                "airport_transfer": "€85 (one way)"
            }
        }
    ],
    "terms": {
        "accommodation": "Accommodation is arranged in homestay or residential settings. Homestays offer meals; absences longer than 5 days incur a weekly fee of €60.",
        "insurance": "Medical protection is mandatory for ILEP students. Medical insurance costs €130/year.",
        "tuition_hours": "Lessons are 55 minutes. Standard course: 18.33 hours/week. Intensive course: 23.83 hours/week.",
        "examinations": "IELTS exam costs €215. Cambridge FCE €205. Cambridge CAE €210.",
        "text_book": "Course books cost €28. IELTS or Cambridge resources cost €45.",
        "social_activities": "Students pay for their selected events (costs: €15–€65). Free activities are organized too.",
        "policy_of_care": "CES prioritizes care for 16-17-year-old students in adult classes.",
        "school_holidays": "No classes on 01 Jan, 03 Feb, 17 Mar, 18 Apr, etc. No refunds or time in lieu for public holidays."
    }
}
2025-01-31 12:31:45,355 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:31:45,355 - PDFParser - INFO - Successfully processed page 3
2025-01-31 12:31:45,355 - PDFParser - INFO - Processing page 4/18
2025-01-31 12:31:45,382 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:31:45,386 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:31:45,391 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:31:45,392 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:32:11,697 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:32:11,698 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies (CES)",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [
                {
                    "name": "Standard General English",
                    "lessons_per_week": 20,
                    "description": "Morning classes Mon-Fri, 09:00 - 13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive General English",
                    "lessons_per_week": 26,
                    "description": "Morning and afternoon classes Mon-Fri, 09:00 - 13:00 and 14:00 - 16:00 (Tues-Thurs)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Afternoon Lessons",
                    "lessons_per_week": 15,
                    "description": "Minimum 4 weeks, Mon-Fri, 14:00 - 17:15",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€185", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€175", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€165", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€150", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€145", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Combination Course",
                    "lessons_per_week": 30,
                    "description": "Morning group classes and one-on-one lessons (Mon-Fri)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€670", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€635", "currency": "EUR"},
                        {"duration": "12+ weeks", "price": "€615", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Standard IELTS Preparation Course",
                    "lessons_per_week": 20,
                    "description": "Mon-Fri, 09:00 - 13:00",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€285", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€250", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€225", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€200", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€190", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Intensive IELTS Preparation Course",
                    "lessons_per_week": 26,
                    "description": "IELTS-specific tuition Mon-Fri, 09:00 - 13:00 and 14:00 - 16:00 (Tues-Thurs)",
                    "prices": [
                        {"duration": "2-4 weeks", "price": "€350", "currency": "EUR"},
                        {"duration": "5-11 weeks", "price": "€315", "currency": "EUR"},
                        {"duration": "12-23 weeks", "price": "€290", "currency": "EUR"},
                        {"duration": "24-35 weeks", "price": "€265", "currency": "EUR"},
                        {"duration": "36+ weeks", "price": "€255", "currency": "EUR"}
                    ]
                },
                {
                    "name": "Cambridge Preparation Courses (CAE & FCE)",
                    "lessons_per_week": 26,
                    "description": "General English and Cambridge-focused sessions",
                    "prices": [
                        {"duration": "9 weeks", "price": "€2835", "currency": "EUR"},
                        {"duration": "10 weeks", "price": "€3150", "currency": "EUR"}
                    ]
                },
                {
                    "name": "University Pathway Program",
                    "lessons_per_week": 26,
                    "description": "12-24 weeks preparation for higher education",
                    "prices": [
                        {"duration": "12 weeks", "price": "€3480", "currency": "EUR"},
                        {"duration": "24 weeks", "price": "€6360", "currency": "EUR"},
                        {"extra_week": "€265", "currency": "EUR"}
                    ]
                }
            ],
            "accommodations": [
                {
                    "type": "Homestay",
                    "price_per_week": "€280",
                    "description": "Single room, half board",
                    "supplements": {
                        "Summer": "€35/week (June to August)"
                    }
                },
                {
                    "type": "Self-Catering Apartment",
                    "price_per_week": null,
                    "description": "Available upon request"
                }
            ],
            "additional_fees": {
                "registration": "€85"
            }
        }
    ],
    "terms": {
        "cancellation": "All courses require a registration fee of €85. Full cancellation policy details available upon request."
    }
}
2025-01-31 12:32:11,698 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:32:11,698 - PDFParser - INFO - Successfully processed page 4
2025-01-31 12:32:11,698 - PDFParser - INFO - Processing page 5/18
2025-01-31 12:32:11,702 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:32:11,704 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:32:11,710 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:32:11,710 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:32:25,495 - PDFParser - DEBUG - Received response from OpenAI API
2025-01-31 12:32:25,495 - PDFParser - DEBUG - Raw API response content: {
    "school_name": "Centre of English Studies",
    "locations": [
        {
            "city": "Cork",
            "country": "Ireland",
            "address": null,
            "courses": [],
            "accommodations": [
                {
                    "type": "Homestay Accommodation",
                    "price_per_week": "€270",
                    "description": "Half board (breakfast and dinner). Homestays are located in the suburbs of Cork. Includes additional cost of €85 placement fee.",
                    "supplements": {
                        "Extra Night": "€50",
                        "Single Room Summer Supplement": {
                            "price": "€50/week",
                            "applicable_period": "May 17 to September 28"
                        },
                        "Special Diet Supplement": {
                            "price": "€35/week",
                            "applicable_diets": "Coeliac, gluten-free, lactose-free, vegan, vegetarian"
                        },
                        "Christmas Holidays": {
                            "price": "€345/week",
                            "dates": "20 Dec to 3 Jan 2026"
                        }
                    }
                },
                {
                    "type": "Residential - University College Cork",
                    "price_per_week": "From €285",
                    "description": "Extra night at €50."
                }
            ],
            "additional_fees": {
                "accommodation_placement_fee": "€85",
                "airport_transfer": {
                    "price": "€60",
                    "description": "Airport transfer on arrival to homestay or residence (one way)."
                },
                "insurance": {
                    "price": "€130 per annum",
                    "description": "Medi-PEL is mandatory for ILEP students. Includes PEL (Protection for Enrolled Learners)."
                },
                "text_book": {
                    "basic": "€28",
                    "IELTS_coursebook": "€45"
                },
                "examination_fees": {
                    "IELTS": "€215",
                    "Cambridge First": "€205",
                    "Cambridge Advanced": "€210"
                }
            }
        }
    ],
    "terms": {
        "accommodation": "No allowance is made for absence from the homestay during the time arranged. Late arrivals or failure to notify beforehand may incur charges. Vacating a room for five days or longer incurs a retainer fee of €60/week.",
        "cancellation": "No refunds/credit for public holidays mentioned in the holiday list. 24/7 care for 16-17-year-olds studying in adult schools.",
        "school_holidays": [
            "01 January",
            "03 February",
            "17 March",
            "18 April",
            "21 April",
            "05 May",
            "02 June",
            "04 August",
            "27 October",
            "19 December 2025 - 05 January 2026"
        ],
        "tuition": "All teaching hours are 55 minutes. Standard Course includes 18.33 contact hours/week, excluding breaks, while the Intensive Course has 23.83 contact hours/week, excluding breaks.",
        "social_activities": "Costs vary between €15-€65 for participation in optional excursions or activities. Free events and evening activities also offered."
    }
}
2025-01-31 12:32:25,495 - PDFParser - INFO - Successfully parsed JSON response
2025-01-31 12:32:25,495 - PDFParser - INFO - Successfully processed page 5
2025-01-31 12:32:25,495 - PDFParser - INFO - Processing page 6/18
2025-01-31 12:32:25,519 - PDFParser - DEBUG - Converting PyMuPDF pixmap to PIL Image
2025-01-31 12:32:25,522 - PDFParser - DEBUG - Converting PIL Image to JPEG bytes
2025-01-31 12:32:25,527 - PDFParser - DEBUG - Encoding image to base64
2025-01-31 12:32:25,528 - PDFParser - INFO - Sending request to OpenAI API
2025-01-31 12:32:52,640 - PDFParser - DEBUG - Received response from OpenAI API
